WEBVTT

00:00.000 --> 00:06.520
Hi everyone.

00:06.520 --> 00:08.800
So I'm Abhishek Dasgupta.

00:08.800 --> 00:14.800
I'm a senior research software engineer in the University of Oxford and I'm presenting

00:14.800 --> 00:20.320
carpenters offline today with my colleagues Janata and Colin.

00:20.320 --> 00:26.560
And so carpenters offline is about teaching data science and coding skills in low resource

00:26.560 --> 00:30.560
settings in places where you don't have internet.

00:30.560 --> 00:37.200
It's a way to do courses without access to the internet.

00:37.200 --> 00:39.200
So who are we?

00:39.200 --> 00:43.160
So Janata is at Newcastle.

00:43.160 --> 00:45.320
Colin is at the National Oceanography Center.

00:45.320 --> 00:49.080
I'll let them introduce themselves later on.

00:49.080 --> 00:50.720
And there are other people as well.

00:50.720 --> 00:54.840
We have collaborators from the University of Florida and also Stella and Barsha and

00:54.840 --> 00:58.520
Durham.

00:58.520 --> 00:59.520
What is the carpentry?

00:59.520 --> 01:05.960
So for those of you who do not know, the carpentry is a non-profit organization which

01:05.960 --> 01:11.320
was built to teach foundational coding and data science skills to researchers.

01:11.320 --> 01:19.720
And their vision is to be inclusive and to make the software teaching skills as accessible

01:19.720 --> 01:22.000
to as many people as possible.

01:22.000 --> 01:25.400
And they have various kinds of carpentries.

01:25.400 --> 01:31.880
So they share some courses like software carpentry, data carpentry which is focused on data science

01:31.880 --> 01:36.720
and also library carpentry for library and information sciences.

01:36.720 --> 01:41.520
And we have various roles like we have a carpentry instructor so anyone can go through

01:41.520 --> 01:46.000
instructor training and be a certified carpentry instructor.

01:46.000 --> 01:49.480
There are carpentries workshops which goes through the approved carpentries curriculum

01:49.480 --> 01:54.760
which includes things like introduction to Git, introduction to Shell and introductory

01:54.760 --> 01:57.320
courses in R and Python.

01:57.320 --> 02:01.920
And we use technologies like WebBest.

02:01.920 --> 02:06.400
Our course notes are all open source and online.

02:06.400 --> 02:15.960
And we use Etherpad and Google Docs for shared notes and everything is on GitHub.

02:15.960 --> 02:18.240
So how did carpentries offline start?

02:18.240 --> 02:25.400
So again it was at the Software System in the Institute Collaborations Workshop, HACTA.

02:25.400 --> 02:32.200
So we started upon this idea that what if you do not have internet and of course a lot

02:32.200 --> 02:36.880
of the instructions in the current carpentries curriculum require you to access to internet.

02:36.880 --> 02:45.000
So they will say download this from PyPI or download Python or RStudio and install it.

02:45.000 --> 02:50.360
What happens when you do not have access to internet or maybe internet is very expensive

02:50.360 --> 02:54.880
or maybe you want to work on the EuroStar which we found out that internet does not

02:54.880 --> 02:59.880
really work and the Wi-Fi is there but it is a sham.

02:59.880 --> 03:05.020
So we came up with the idea that why not use Raspberry Pi's because they are cheap and

03:05.020 --> 03:06.020
available.

03:06.020 --> 03:11.960
I think this was before they suddenly became unavailable but basically using some sort

03:11.960 --> 03:19.400
of low cost single board computer to host the carpentries infrastructure and allow

03:19.400 --> 03:22.800
people to access it offline.

03:22.800 --> 03:31.560
So it won the HACTA and it also, you know, had the SSI Fellowship on that in 2022.

03:31.560 --> 03:36.920
So the first part of it is actually getting the data from the internet onto the Raspberry

03:36.920 --> 03:38.160
Pi.

03:38.160 --> 03:42.120
So that is a package developed by a team at the University of Florida in collaboration

03:42.120 --> 03:45.640
with us and that is called offline data site.

03:45.640 --> 03:50.640
So offline data site is a component of carpentries offline but you can use it outside.

03:50.640 --> 03:57.000
So if you for some reason want to get R and Python and like the common packages, you know,

03:57.000 --> 04:02.520
pandas and ampi all that, on cash onto your computer so they can work offline, you can

04:02.520 --> 04:04.280
do that.

04:04.280 --> 04:09.360
By default it will install a certain set of packages which are customized for carpentries

04:09.360 --> 04:15.960
but you can add your own packages to that and it's available on PiPI so you can install

04:15.960 --> 04:19.520
it.

04:19.520 --> 04:26.640
What we mirror is the latest installers in Python and R and also we use partial mirrors

04:26.640 --> 04:28.680
of PiPI and CRAN.

04:28.680 --> 04:35.080
You can customize the packages so you can specify your own packages to download and

04:35.080 --> 04:43.440
once you download it you can set your local PiP or CRAN to get data from that and then

04:43.440 --> 04:49.240
we also mirror carpentries online material of course and installers like RStudio.

04:49.240 --> 04:54.520
So I'll hand over to Colin.

04:54.520 --> 04:57.520
Thank you.

04:58.360 --> 05:01.840
There's been three threads to our project in terms of building hardware that people

05:01.840 --> 05:02.840
can actually go and use.

05:02.840 --> 05:06.640
The first is to put the carpentries offline onto a Raspberry Pi that can be booted up

05:06.640 --> 05:08.400
and run at a workshop.

05:08.400 --> 05:11.960
The other is to actually build a bootable flash drive that can be used with an old laptop

05:11.960 --> 05:16.920
perhaps and then the third and latest one is to actually build a miniature HPC high

05:16.920 --> 05:21.520
performance computer that can be used for teaching HPC lessons.

05:21.520 --> 05:24.240
So for the first option we have the Raspberry Pi.

05:24.240 --> 05:29.520
I have here a Raspberry Pi Zero, one of the cheaper ones.

05:29.520 --> 05:36.400
I think these when they're in stock cost about $10 or $15 or euros and they can run as a

05:36.400 --> 05:40.480
Wi-Fi access point mirroring everything.

05:40.480 --> 05:44.040
Some of our lessons require us to have Git Hub so instead of Git Hub we have a program

05:44.040 --> 05:48.720
called Git T which kind of has all the functionality of Git Hub but is self-hosted on the Raspberry

05:48.720 --> 05:49.720
Pi.

05:49.720 --> 05:57.000
We can also run an EtherPAD server, mirrors of all the lessons and CRAN and PiPi mirrors.

05:57.000 --> 06:01.560
So what it looks like we can use this, the Pi Zero or we can use the bigger Pi 1, 2,

06:01.560 --> 06:04.160
3, 4, 5 now.

06:04.160 --> 06:08.000
And when this boots up and I will try and do a little demo.

06:08.000 --> 06:25.000
So when it boots up you should see an access point called Carpentries Offline that will

06:25.000 --> 06:26.360
be accessible.

06:26.360 --> 06:31.800
If you were to then join that access point and go to your web browser and type in Carpentries

06:31.800 --> 06:38.640
Offline.org or 192.1681.1 you will see the web page that is listed there and that will

06:38.640 --> 06:41.560
then enable you to get onto the Carpentries Offline.

06:41.560 --> 06:44.880
Do we dare to do this?

06:44.880 --> 06:52.160
Where's the Wi-Fi chooser?

06:52.160 --> 07:06.000
It should be at the bottom there.

07:06.000 --> 07:12.360
Oh, it's on there.

07:12.360 --> 07:14.480
Good.

07:14.480 --> 07:20.360
Is that joining?

07:20.360 --> 07:21.360
Connecting.

07:21.360 --> 07:27.200
You can see this on the up screen.

07:27.200 --> 07:40.080
It says we're established so let's see if the demo gods are in our favour.

07:40.080 --> 07:41.080
And there we go.

07:41.080 --> 07:44.120
The web page being served from this little Raspberry Pi Zero.

07:44.120 --> 07:48.840
If I was to click, for instance, on the data Carpentry and go to the R Ecology lesson,

07:48.840 --> 07:54.480
there is a complete mirror of the R Ecology lesson that we can then teach from.

07:54.480 --> 08:00.160
And we also have Git T so you can log into Git T and have a very similar experience to

08:00.160 --> 08:05.320
GitHub or if you want to download some software to say you need to install R there is an R

08:05.320 --> 08:08.760
Windows and an R Mac package available for you to download.

08:09.480 --> 08:13.600
We also haven't got it listed on this page but you can then point your CRAN or your

08:13.600 --> 08:18.040
PIPI installation at this server and install things from those mirrors instead of having

08:18.040 --> 08:19.840
to get them off the internet.

08:19.840 --> 08:22.280
And I will put this back on.

08:22.280 --> 08:24.320
Edgy Rome to keep going with the slides.

08:24.320 --> 08:26.320
The slides are idiotic.

08:26.320 --> 08:28.320
Oh, okay.

08:28.320 --> 08:31.320
So I don't need the internet.

08:31.320 --> 08:34.320
It's beautiful.

08:34.880 --> 08:37.880
It's not working.

08:37.880 --> 08:41.480
I'm just going to keep going from there.

08:41.480 --> 08:45.600
So one of the problems we're trying to build the image for the Raspberry Pi is we initially

08:45.600 --> 08:49.640
started with a set of instructions of boot up your Raspberry Pi with an image you've just

08:49.640 --> 08:53.040
downloaded, type this and type this and type this and type this and eventually you'll have

08:53.040 --> 08:54.760
a Carpentries image.

08:54.760 --> 08:58.440
We then moved to having a shell script that could run all of that automatically so that

08:58.440 --> 09:00.600
it was a bit easier to reproduce.

09:00.680 --> 09:05.240
Then at a hackathon we went to, someone suggested what seemed like brilliant idea of we could

09:05.240 --> 09:09.440
run this in GitHub actions and do it all in the cloud and have that spit out a Raspberry

09:09.440 --> 09:12.040
Pi image for us.

09:12.040 --> 09:16.200
Many hard months of work later realized this wasn't quite so easy because the emulator

09:16.200 --> 09:19.880
for the Raspberry Pi is really slow and it turns out that GitHub actions actually has

09:19.880 --> 09:24.160
a six hour time limit which wasn't enough to do all of our installation.

09:24.160 --> 09:27.560
We had a few hacks to speed things up so one of the things we found is that not just is

09:27.560 --> 09:32.000
the computation slow but the network access out of the emulator is really really slow.

09:32.000 --> 09:35.960
So downloading anything inside the emulator was much slower than downloading outside so

09:35.960 --> 09:41.240
we actually download all of the offline data size stuff outside of the emulator, mount

09:41.240 --> 09:44.720
it in a virtual drive and then copy it into the emulated image and build the emulated

09:44.720 --> 09:49.280
image and now we've got it down to about two hours and it pretty much works.

09:49.280 --> 09:52.840
The one snag I'm currently having is that GitHub is not allowing us to upload the final

09:52.840 --> 09:56.720
image and I think we're hitting the maximum file size limit from GitHub and need to find

09:56.720 --> 10:01.600
somewhere else to host our images but there's a link later on to our GitHub if you do want

10:01.600 --> 10:08.040
to go and download the last image we managed to get on there.

10:08.040 --> 10:12.560
As a kind of side effect of doing that I started testing builds in the cloud just natively

10:12.560 --> 10:17.640
on a AMD64 system and realized that we could also then build a Docker container containing

10:17.640 --> 10:21.600
all of this and that was actually kind of useful during workshops because sometimes

10:21.600 --> 10:24.360
some of the carpentries infrastructure would go down midway through a workshop and the

10:24.360 --> 10:27.920
last thing you want halfway through a workshop is telling everyone to go and download something

10:27.920 --> 10:32.520
and finding that the website they want has gone down so we found that we could also replicate

10:32.520 --> 10:36.720
all the infrastructure in the cloud or on our own server if we have a server and it

10:36.720 --> 10:40.640
meant we had a backup version of everything needed to run a workshop which has saved me

10:40.640 --> 10:46.680
on multiple occasions now from workshops where we lost access to something and I've now got

10:46.680 --> 10:52.480
a almost one press solution with a Docker container that I can deploy out to a cloud which also

10:52.600 --> 10:57.600
works very nicely for testing stuff.

10:57.600 --> 10:59.880
It's sort of the tail end of the COVID pandemic.

10:59.880 --> 11:02.960
Raspberry Pi's got really, really hard to get hold of and really expensive.

11:02.960 --> 11:07.800
It was always the joke that Janetta had all of them in her house but I don't think she

11:07.800 --> 11:11.680
was the sole cause of that but the chip shortage certainly didn't help us and so we started

11:11.680 --> 11:14.240
looking for alternatives to the Pi.

11:14.240 --> 11:15.240
Do you want to take over at this point?

11:15.240 --> 11:17.240
Do I want to do this bit?

11:17.240 --> 11:18.240
I don't want to.

11:18.240 --> 11:19.240
Where are we now?

11:19.240 --> 11:20.240
On to option two.

11:21.000 --> 11:22.000
Oh, okay.

11:22.000 --> 11:27.720
So this option two is also because some people say but I already have a laptop so why do

11:27.720 --> 11:29.280
I want to go and buy a Pi?

11:29.280 --> 11:33.960
Especially if we look at countries where you don't have access, that's already a big problem

11:33.960 --> 11:37.960
apart from when there are two scares to find.

11:37.960 --> 11:42.600
So we've come up with the idea of doing exactly what we're doing with the SD card for the

11:42.600 --> 11:49.600
Pi and creating an image for that but creating an image on a flash drive which can also be

11:50.320 --> 11:56.120
downloaded, written to a flash drive and it has exactly basically the same software on

11:56.120 --> 12:03.120
as the SD card and you can just boot any laptop that you can boot from a flash drive.

12:04.720 --> 12:09.720
You can boot from the flash drive and it turns it into the same server as we have here.

12:09.720 --> 12:14.720
Oh, okay, so now let's put this.

12:15.600 --> 12:21.360
So more or less last year, April, I was running a workshop, an intro to HPC and everything

12:21.360 --> 12:24.560
that could possibly go wrong did.

12:24.560 --> 12:30.840
So I was starting to think, well, I also had a shed load of my fellowship money left and

12:30.840 --> 12:35.360
I had to spend that on something and I thought, but hang on, if we extend this project to

12:35.360 --> 12:41.440
cover the intro to HPC, that would be a really cool thing to do and there were a few things

12:41.440 --> 12:44.560
that we could do with the money HPC.

12:44.600 --> 12:49.200
The hardware is more visible so people don't know really what an HPC is, this massive thing

12:49.200 --> 12:54.680
in the cloud somewhere hidden and they don't really ever get to see the HPC that they work

12:54.680 --> 13:01.440
on it and it's also quite easy to mimic the original limitations which you're not going

13:01.440 --> 13:08.440
to do during a lesson on a big HPC but on the many HPC you could actually do that, you

13:08.680 --> 13:14.680
could hit limitations and see what will happen and teach people how to cope with that.

13:14.680 --> 13:19.720
You also, and this was the big thing, people get this email, say register for your account

13:19.720 --> 13:23.440
on the HPC, they don't do that, they show up on the day and you've got to jump through

13:23.440 --> 13:28.880
all those hoop of keeping people registered which is not a quick thing to do because sometimes

13:28.880 --> 13:34.880
there are loads of things to be done before you get your actual HPC account.

13:34.880 --> 13:41.880
So also the nice thing is it doesn't interfere with the real HPC so users can get quite afraid,

13:41.880 --> 13:47.000
they're going to break something on the real machine so in this case you can assure them

13:47.000 --> 13:54.000
it's here, we're not going to break anything of national importance or international security

13:54.000 --> 14:02.000
or something and of course if you don't have access to a real HPC then that's also covered.

14:03.000 --> 14:08.560
Also the day when we ran the workshop one of the things was somebody was doing something

14:08.560 --> 14:12.840
on the node, they were running on the login node and you know what's that, you can't even

14:12.840 --> 14:19.200
log in, let alone run your scripts so you won't have that and you won't also have problems

14:19.200 --> 14:26.200
with network access because it's all local. So like Colin said the reason there was a

14:26.200 --> 14:31.360
scarcity of Raspberry Pi's was because I probably had them all in my house. So although I got

14:31.360 --> 14:38.360
the money for building a many HPC I decided to go for these rock pies which are sold in

14:41.400 --> 14:48.400
the UK by a company called OkDoo and RS Electronic and it was an absolute disaster trying to

14:48.520 --> 14:53.160
get these things ordered and the time I had to work on this thing was passing because

14:53.160 --> 14:57.800
these guys couldn't get my order, it's all too dark. So I collected all the Raspberry

14:57.840 --> 15:02.120
Pi's in my house and built this one that you see there in the picture and that consisted

15:02.120 --> 15:08.760
of three Raspberry Pi 4.4 nodes and then one for the login node, in the meantime I've added

15:08.760 --> 15:15.760
I think two more nodes or something and it's running the Pi OS Lite, the 64 bit one and

15:17.200 --> 15:23.760
then the head node also acts as a Wi-Fi access point so everybody can just log into that.

15:23.760 --> 15:29.560
So in the meantime I did manage to buy the rock pies but we are still in the process

15:29.560 --> 15:34.560
of setting that up because the idea in the end is especially the Raspberry Pi's would

15:34.560 --> 15:39.880
probably make more sense but the rock pies were slightly more at a higher spec but the

15:39.880 --> 15:46.880
idea is in the end to produce two images that you can again just download from the website

15:47.880 --> 15:54.880
and we want to be able to build up this operating system with scripts so we still need to do

15:55.200 --> 15:59.960
the scripting, at the moment I'm still doing everything manually but so we want to work

15:59.960 --> 16:04.040
to do the scripting and then download an SD card image which you can just write to it

16:04.040 --> 16:11.040
so that the people who will end up with this mini-HPC don't need the knowledge to set all

16:11.560 --> 16:18.560
of this up and this is basically the software that we want installed on it because this

16:18.560 --> 16:25.560
is what the lesson covers and what most people will be using and what we need to actually

16:26.040 --> 16:34.480
do what we want to do for the networking, for the scheduling, etc.

16:34.480 --> 16:40.160
And then I've got to get to the point where I credit everybody so all our gets here, if

16:40.240 --> 16:47.240
you want to know where I got the STL's for the printing so a lot of people I do have

16:49.520 --> 16:56.020
to give them credit because everything is their work. I forgot to put this picture on

16:56.020 --> 17:03.020
last night so this is pseudo for executing bash commands so I forgot that one to add

17:03.080 --> 17:06.080
it then, it's the important one.

17:06.080 --> 17:11.080
And then there's the small one that was called RM.

17:11.080 --> 17:17.080
And so here's some more links and credits. The Raspberry Pi image that we have at the

17:17.320 --> 17:21.960
moment that Colin's been talking about can be downloaded from that link there. You can

17:21.960 --> 17:28.040
find us at CarpentriesOrFlying.org and what's not on there would hopefully soon be on there

17:28.040 --> 17:34.040
because it's a work in progress all the time. We also have a Slack channel on Carpentries

17:34.720 --> 17:40.360
workspace and so we can be found there so if you have any questions or anything you can

17:40.360 --> 17:47.360
get us there and that QR code will lead you to CarpentriesOrFlying.org and I think that's

17:48.640 --> 17:51.640
the end.

17:51.640 --> 17:58.640
Thank you. We have time for questions.

18:04.040 --> 18:11.040
Can you share with more how people are using CarpentriesOrFlying outside the team?

18:19.360 --> 18:23.360
Okay so, I forget to repeat the question.

18:23.360 --> 18:30.360
Oh, how can we use CarpentriesOrFlying being used outside the team? So one of the things

18:31.360 --> 18:37.360
so far was because we're still working on this image is that we have not, we've got a lot

18:37.360 --> 18:42.360
of people that keep saying they're interested but nobody has really taken it on yet. So

18:42.360 --> 18:49.360
especially with the Mini HPC also I'm still working on it but I hope to now soon be able

18:49.360 --> 18:53.600
to run my first workshop on it and then hopefully it'll take off from there because then I can

18:53.600 --> 19:00.600
say to people okay we've done it. Also I've kind of used it, I went to UNO's first year

19:01.040 --> 19:08.040
of Strathclyte to give a, to run a workshop and the power went down and the internet went

19:09.800 --> 19:15.800
down and I was able to use it there just from my laptop actually that day. No, I didn't

19:15.800 --> 19:20.600
use the Pi, I didn't use the Pi too because I had it all there but I've known we've not

19:20.600 --> 19:27.160
been able to get people because I feel it's not in a state where I can actually set somebody

19:27.160 --> 19:33.440
off with no experience because we also need to develop an off-boarding lesson. So we hope

19:33.440 --> 19:38.080
to have more hackathons and more work sessions where we can work on these things and get

19:38.080 --> 19:42.920
it ready for other people to adopt. So if anybody here wants to go off and adopt it please let

19:42.920 --> 19:47.920
me know and you know where to find me.

19:47.920 --> 19:54.920
Actually there was another one that I ran in South Africa where we wanted to test this

20:02.400 --> 20:08.900
and we ran into a limit of eight people connecting at that point but I think Colin has sorted

20:08.900 --> 20:09.900
the problem out.

20:09.900 --> 20:13.040
He sorted the newer Raspberry Pi's but there's zero, I think so there's a limit and some

20:13.040 --> 20:20.040
of the older ones do but there was a firmware fix for that. A typical Carpiti's workshop

20:20.040 --> 20:27.040
would probably have between 10 and 30 people so we'd be aiming for that sort of size again.

20:27.080 --> 20:32.120
A typical Carpiti's workshop would be between 10 and 30 people but we had limits with the

20:32.120 --> 20:35.320
older hardware but we think the newer hardware doesn't have that problem and we should be

20:35.320 --> 20:40.320
able to get 30 people on it.

20:40.320 --> 20:47.320
Another question.

20:48.760 --> 20:55.760
Yeah I spoke faster than I rattled over because I didn't know how much time it was left.

21:01.560 --> 21:04.560
And this hat makes me warm.

21:04.560 --> 21:07.560
At least we didn't get the hot hats.

21:07.800 --> 21:09.800
Five minutes.

21:09.800 --> 21:12.800
If there are questions please ask away.

21:12.800 --> 21:15.800
If not, it's cool.

21:15.800 --> 21:20.800
You all have been informed that we have a social event tonight.

21:20.800 --> 21:27.800
We are going as an organizer team of this room to the tavernier bar so you can check

21:28.400 --> 21:31.400
the queue on the left.

21:31.400 --> 21:34.400
That's the way to the tavernier.

21:34.400 --> 21:41.400
We are also organizing an event next week that's going to take place online with some

21:43.360 --> 21:49.360
other talks not only that couldn't make it in the tight schedule today but people who

21:49.360 --> 21:52.360
couldn't travel to Brussels.

21:52.360 --> 21:58.240
We wanted to be inclusive of those people too so that's the QR code in the middle and

21:58.240 --> 22:05.240
the website is the last QR code that's on the back of the room and the right there.

22:09.440 --> 22:12.440
A very important question.

22:12.440 --> 22:17.440
Where can I get a hat?

22:17.440 --> 22:19.440
I've got some more at home.

22:19.440 --> 22:26.440
Next time I go to touring I'll ring one.

22:28.240 --> 22:35.240
These tools are all representative of the carpentries.

22:35.240 --> 22:37.240
This is the Alipay software.

22:37.240 --> 22:40.240
This is the library carpentries.

22:40.240 --> 22:47.240
We also have a protractor but we are figuring out how to get that on the bed.

22:48.240 --> 22:52.240
Thank you very much.

22:52.240 --> 22:59.240
Thank you.

