WEBVTT

00:00.000 --> 00:12.180
Sorry you picked a missed call.

00:12.180 --> 00:19.420
...

00:19.420 --> 00:21.420
Yes.

00:21.420 --> 00:23.420
Rocky.

00:23.420 --> 00:25.420
Rocky.

00:29.420 --> 00:31.420
We'll close the doors.

00:31.420 --> 00:33.420
Thank you very much.

00:33.420 --> 00:57.420
So anyone that knows some history of Rust is going to be very excited about this talk, and Rocky is going to tell us about what's going on with Rust with Servo.

00:57.420 --> 01:01.420
Hello. Hi. Thank you.

01:03.420 --> 01:09.420
I am Rocky and I'm software engineer. I work on Servo at Tegalia.

01:09.420 --> 01:19.420
Before even I start with the talk, I'm very curious about the audience. How many of you are writing Rust professionally or full-time?

01:19.420 --> 01:21.420
Many of you.

01:21.420 --> 01:25.420
And how many of you are writing personal projects, interest?

01:25.420 --> 01:29.420
How many of you are coming from front end or back end world?

01:29.420 --> 01:35.420
I still see some. This is like perfect audience for this talk.

01:35.420 --> 01:45.420
Normally when I start a talk, I tell about the project I'm going to talk about. But today I want to start by answering some questions because people have questions.

01:45.420 --> 01:53.420
What is happening? Is it bad? Is it lie? What is happening with Servo project?

01:53.420 --> 01:59.420
I'm simply going to take you a bit back and walk you through.

01:59.420 --> 02:06.420
So I was journey in this slide around 2012. It started at modular research around the same time when Rust project also started.

02:06.420 --> 02:09.420
They were quite working together actually.

02:09.420 --> 02:19.420
And people who have been active in Rust community or have known about Servo project, they knew Servo on 2016, 17, 18, what was happening.

02:19.420 --> 02:34.420
But in my previous slide, these questions came in when we were in 2020. A lot was happening in 2020 but this also happened when Muzla's layoff impacted Servo team.

02:34.420 --> 02:44.420
And this kind of affected the whole team and the future was not that bright as we thought.

02:44.420 --> 02:54.420
Around the same time, Servo project joined Linux foundation. There were few people from Servo team who were trying to maintain the project in their personal time.

02:54.420 --> 03:04.420
But that is not enough. Servo project is huge and that's not enough. It needs funding. It needs more people, expertise and many other things.

03:04.420 --> 03:15.420
Around 2022, we started restarting Servo. I just mentioned it needs lots of funding, lots of expertise, lots of people. Who is going to start?

03:15.420 --> 03:22.420
In 2023, a team was formed at Igalia and we restarted the Servo project.

03:22.420 --> 03:32.420
So what we did in 2023, like list is not huge but I want to keep it small because this is not really focus of the talk today.

03:32.420 --> 03:40.420
We restarted the project first half of the year. We were trying to maintain the project, take it out of the maintenance mode actually.

03:40.420 --> 03:49.420
Tell people what is happening with project and we have restarted the project. That's what I'm trying to mean thereby outreach.

03:49.420 --> 03:57.420
Make it easy for new people to contribute because an open source project is literally nothing without the contributors.

03:57.420 --> 04:08.420
We started work on layout engine. We started shipping CSS to features. We also had to make a choice between layout engine.

04:08.420 --> 04:16.420
We in Servo have two layout engines. Still have it but we haven't deprecated the last one.

04:16.420 --> 04:24.420
We ended up choosing to work on layout 2020. The old one is called layout 2030. I'm not going to talk too much about it.

04:24.420 --> 04:31.420
You can go to the wiki and you can find why we took the decision of choosing layout 2020.

04:31.420 --> 04:38.420
At the end of the project I have a QR code that will give you access to this slide. Don't worry about searching for it now.

04:38.420 --> 04:49.420
In 2023 we also worked on internal WPT so that we can track the web platform tests and build lots of Servo demos.

04:49.420 --> 04:55.420
When you are talking about a project, it is very important to show things.

04:55.420 --> 05:03.420
You can't just sit at computer and code and talk about we are doing this and that but there is no way to test it.

05:03.420 --> 05:12.420
I'm saying we built CSS feature but hey, how can I test it? There were a few Servo demos before available as well.

05:12.420 --> 05:18.420
We also moved it to the new Servo demo website. Then we did quite a lot of embedding work.

05:18.420 --> 05:22.420
We built a mini browser that is going to be focused on this talk.

05:22.420 --> 05:30.420
This was 2023. I also want to cover what we are going to do in 2024 because it is already here. We are in February.

05:30.420 --> 05:38.420
We want to continue the project maintenance and the outreach because some of you I'm sure were not sure about where Servo project is going.

05:38.420 --> 05:42.420
I'm sure there are people outside this room who are still not sure.

05:42.420 --> 05:46.420
We want to make sure that everyone in communities aware what is going on.

05:46.420 --> 05:56.420
We want to continue shipping CSS support. Right now, while I'm standing, we still have a few PRs open that is related to tables.

05:56.420 --> 06:02.420
We are really trying to ship this table support in Servo.

06:02.420 --> 06:06.420
We want to continue working on embedding API and the initial Android support.

06:06.420 --> 06:18.420
We already have initial build that runs on CI already. We landed this PR, I think, two weeks ago or maybe one week ago.

06:18.420 --> 06:24.420
Let's not go with somewhere between two or one week ago.

06:24.420 --> 06:30.420
If you see the list is pretty much similar to what we did last year.

06:30.420 --> 06:34.420
This is the focus of the talk today.

06:34.420 --> 06:40.420
I'm talking about embedding because embedding has been asked from the community for very long.

06:40.420 --> 06:48.420
I was just looking on internet, read it, hack and use, and just twitter, github.

06:48.420 --> 06:54.420
What are people asking? I ended up collecting some things.

06:54.420 --> 07:02.420
If you see that screenshot, this Servo embedding part was asked 11 years ago.

07:02.420 --> 07:06.420
This is exactly what I'm trying to tell you.

07:06.420 --> 07:22.420
I'm saying that we can't just tell, hey, we are adding support to Servo or X or Y feature without showing you a POC how this feature is working or how you as a user can test it.

07:22.420 --> 07:34.420
Last year around the summer, when we did lots of maintenance and took it out of maintenance mode, we decided we want to work on embedding.

07:34.420 --> 07:38.420
Then we ended up building a mini browser.

07:38.420 --> 07:48.420
When we were talking about mini browser, any open source project for the first step is to open an issue.

07:48.420 --> 07:54.420
That's what I did. I opened the issue. We wanted to decide how we want to move.

07:54.420 --> 07:58.420
Which library we want to use. I opened the issue initially.

07:58.420 --> 08:04.420
We had some discussion. The whole idea behind opening the issue was to get comments from the community.

08:04.420 --> 08:14.420
If they have some suggestions on using libraries, we already had this window that we were using in the code base.

08:14.420 --> 08:28.420
We can have a quick POC. You don't want to spend years building something without knowing how people or how companies or users who are going to use your product are going to feel about it.

08:28.420 --> 08:36.420
We ended up building a mini browser. I want to show you actually.

08:36.420 --> 08:44.420
If I go and do a macro, I hope you can see the screen.

08:44.420 --> 08:54.420
This is the mini browser. Just keep a mental model of how this toolbar is looking. I'm going to show you some code in a bit.

08:54.420 --> 09:08.420
This is about how we can make your life easier.

09:08.420 --> 09:19.420
This is the demo website I was talking about. You can go and do stuff there. Check out how some performance is happening.

09:19.420 --> 09:27.420
We have some demo that talks about the technical test. You can test the WebGL support as well.

09:27.420 --> 09:33.420
Certain things. Play around, go back forward.

09:33.420 --> 09:39.420
Just to give you an idea of how this looks in the code.

09:39.420 --> 09:51.420
Depending on what kind of ideas you prefer when you are reading code, I prefer to go from top to bottom and then I take myself up from there.

09:51.420 --> 10:02.420
You want to go to Sarvoshel. Once you arrive in Sarvoshel, you want to look for mini browser.

10:02.420 --> 10:10.420
I can see some code here. This initialization part is okay.

10:10.420 --> 10:18.420
This is not the focus. If you see the if condition here that we say,

10:18.420 --> 10:28.420
what is happening here is we just don't provide an option for you to have the mini browser.

10:28.420 --> 10:32.420
We also provide an option for you to disable it. It is enabled by default.

10:32.420 --> 10:41.420
In case I have to show you how it looks, you just need to pause this.

10:41.420 --> 10:54.420
You can already see how it looks. You don't have a toolbar. This is the window we also used to test how our Web platform test is looking.

10:54.420 --> 11:02.420
While you are here, we also want to look for even loop. That is an important part.

11:02.420 --> 11:08.420
Not actually run forever. Yes, this part, even loop.

11:08.420 --> 11:17.420
As like names are just, it runs forever. In this particular case for mini browser, we want to see this part.

11:17.420 --> 11:27.420
We are using VINIT. We run the event loop of VINIT that really helps initialize the window.

11:27.420 --> 11:33.420
As I was saying, I want you to remember how the toolbar looked like.

11:33.420 --> 11:42.420
I want to go to mini browser and just show you something that we have going on in the update function.

11:42.420 --> 11:47.420
This particular code that I want to walk you through.

11:47.420 --> 11:58.420
This is something that we did. Like I was saying, we opened an initial issue where we wanted to decide what library we want to use.

11:58.420 --> 12:04.420
We were already using the VINIT to create the whole window. We ended up using Igui.

12:04.420 --> 12:08.420
They have really good support for Igui VINIT and Igui Glow.

12:08.420 --> 12:13.420
This was very helpful for input and output stuff we needed to do with the mini browser.

12:13.420 --> 12:16.420
As you can see, there are just two parts going on.

12:16.420 --> 12:22.420
From left to right, we had back and forward button. On the left and right side, you can imagine the toolbar as two parts.

12:22.420 --> 12:25.420
Left to right, there was back and forward button.

12:25.420 --> 12:31.420
Then the other part was right to left. That was on the right side, you had the go button.

12:31.420 --> 12:38.420
On the left side, you had the location field. All together, it was whole toolbar.

12:38.420 --> 12:42.420
One other thing that I want to show you is how we are initializing servo.

12:42.420 --> 12:45.420
This is like, I can go to the server new.

12:45.420 --> 12:56.420
This part is like, inside the even loop dot run forever, we are passing all the data to the new function that initializes the servo.

12:56.420 --> 13:02.420
A lot is going on here. I am not going to walk you through all the code because it will take forever.

13:02.420 --> 13:05.420
The next 10 minutes is not enough.

13:05.420 --> 13:11.420
Initializing servo man, creating a thread for WebGL.

13:11.420 --> 13:15.420
One of the most important things that is going on here is the configuration of constellation.

13:15.420 --> 13:21.420
If I have to show you here, it should be here already, actually.

13:21.420 --> 13:24.420
Here is the constellation. It creates the constellation here.

13:24.420 --> 13:29.420
If I have to go and see how to start constellation, this is the constellation part.

13:29.420 --> 13:33.420
This is the Gram-Cyndra of servo.

13:33.420 --> 13:38.420
I love this comment. Someone left this comment like 11 years ago and this is still valid.

13:38.420 --> 13:45.420
From here, you can really get lost in the code and not lost in a bad way because this is the place where everything is connected.

13:45.420 --> 13:54.420
Here, you go to the pipeline, navigation, layout thread, script thread, and you can really go to layout and then the script.

13:54.420 --> 13:57.420
From here, you can go everywhere.

13:57.420 --> 14:03.420
Then I was just showing you this code right here.

14:03.420 --> 14:06.420
We are on lib.rs. This is our engine.

14:06.420 --> 14:11.420
We call it lib servo and this is the whole engine we are talking about.

14:11.420 --> 14:20.420
I want to keep it short here now because I want you to see something else as well.

14:20.420 --> 14:23.420
This was about the mini browser that we built.

14:23.420 --> 14:28.420
Next was around the same time when we were done with mini browser.

14:28.420 --> 14:36.420
We were talking with Tauri about how we can collaborate to integrate servo in the RIBE project they have.

14:36.420 --> 14:50.420
Thanks to the funding we got from NLNet and the collaboration from Tauri team, we did a collaborative work where we embedded servo in RIBE.

14:50.420 --> 14:59.420
RIBE is a library that aims to provide a fully open-source web view to users.

14:59.420 --> 15:08.420
This is the screen shot or the demo that RIBE team built that is like a hello world from servo and RIBE.

15:08.420 --> 15:16.420
If you have questions about Tauri and RIBE, Daniel is sitting here. You should catch up with him.

15:16.420 --> 15:20.420
He has lots of answers for you on that side.

15:20.420 --> 15:27.420
Thanks to my colleague, D-Lyn, for putting it all together so that I can show you today.

15:27.420 --> 15:34.420
Earlier when I started this talk, I asked how many of you are coming from front-end or back-end world.

15:34.420 --> 15:39.420
I have spent quite a lot of time in my career doing front-end and back-end work.

15:39.420 --> 15:51.420
When this embedding stuff happened, when we started this embedding, we worked with Tauri team to create this whole task, what is not needed.

15:51.420 --> 16:05.420
We shipped off-screen rendering, we shipped pre-compiled MozAngle, we still got to figure out how we are going to do the package and distribution of the shared object we have been creating for two biggest dependencies of servo, that is MoJS and MozAngle.

16:05.420 --> 16:14.420
We shipped the MoJS shared object already, but yet to figure out how we are going to do the distribution.

16:14.420 --> 16:23.420
MoJS is still working on progress. We have some work going on on the static-lib side as well, so we are going to do that as well.

16:23.420 --> 16:35.420
Before I started this talk, for this one, I wanted to see how this, as a user, how I am going to use Rai, how it is going to impact me.

16:36.420 --> 16:43.420
I started this, this tells me that I am close to the finish. This is the demo I built on top of Rai.

16:43.420 --> 16:52.420
Behind the scenes, servo is running, rendering things for you and Rai integration. This is the result of the integration work we did.

16:52.420 --> 17:02.420
Just to show you quickly what I had to do in order to run this project, I just had to write this HTML, CSS and JavaScript code.

17:02.420 --> 17:09.420
That is all. As a user, I don't need to care what is happening on the server side or what is happening behind the scene in Rai itself.

17:09.420 --> 17:13.420
As a user, I just need to write HTML, CSS and JavaScript.

17:13.420 --> 17:22.420
Things are ready. Maybe you can go ahead and try to write an input and browse the UI and maybe you will have something like that.

17:22.420 --> 17:29.420
It was pretty cool to see that as well. I was personally very happy.

17:29.420 --> 17:38.420
One of the reasons why I showed you this issue, and even we have a meta issue for mini-browser, there are some unchecked boxes in case you want to contribute.

17:38.420 --> 17:43.420
We will be very happy to help you review PR or help you getting started.

17:43.420 --> 17:48.420
This was about integrating servo rendering engine itself.

17:48.420 --> 17:53.420
We have another story with Dioxys that is doing pretty unique work.

17:53.420 --> 18:00.420
By just taking one crate, you might know about this. It is stylo-crate for CSS styles and selector matching.

18:00.420 --> 18:08.420
This is something unique because we have been talking about integrating the whole servo rendering engine into a project.

18:08.420 --> 18:15.420
This opens another opportunity where you maybe just want to use the script crate or stylo-crate in your project.

18:15.420 --> 18:20.420
You can simply do that. It is possible and Dioxys is proving it.

18:21.420 --> 18:31.420
After this whole talk, one question that some of you might have, how you can do it in your project.

18:31.420 --> 18:37.420
In short, you are literally one step away from doing it.

18:37.420 --> 18:41.420
You just need to reach out to us on Zulip Chat.

18:41.420 --> 18:48.420
If you have time, you can check out how mini-browser is working or how the integration with write took place.

18:48.420 --> 18:51.420
You can try it out with your applications, with your projects.

18:51.420 --> 18:57.420
If it works, great. If it is not working and you figured that you need us,

18:57.420 --> 19:05.420
so our team, to implement a particular feature, you can reach out to us on Zulip or you can open a discussion on servo.

19:05.420 --> 19:12.420
We will be really happy to help you get started and answer questions.

19:13.420 --> 19:23.420
We really have lots of people coming in and asking questions like, I want to integrate, we have some talks about Velo,

19:23.420 --> 19:27.420
we have some talks about certain other things going on.

19:27.420 --> 19:31.420
You can also follow up there and lots of things happening in servo.

19:31.420 --> 19:38.420
In short, that is what you are just one step away from reaching out to us.

19:38.420 --> 19:44.420
Thanks for listening to me. You can scan this QR code to get access to this slide.

19:44.420 --> 19:46.420
Thank you.

19:52.420 --> 19:55.420
Unfortunately, there is no time for questions here.

19:55.420 --> 19:58.420
I am here. Please catch up with me.

19:58.420 --> 20:00.420
Yes, I am happy to answer your questions.

20:08.420 --> 20:11.420
Thank you.

