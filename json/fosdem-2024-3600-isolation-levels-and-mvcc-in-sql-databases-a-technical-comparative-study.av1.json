{"text": " So, yeah, the idea is to talk about resolution in postgres, compare it with other databases. We will see the concept and we will see also the practical usage from developer point of view. I'm Frank Bacheau. I've always been working with databases. Now I'm developer advocate at Sugabite that is distributed postgres. We use the postgres code for the SQL layer but the storage is completely different. So, let's start if my clicker works. I have a question for you. So this is a picture of a car, obviously. Do you think the car is moving forward or backward? So, think about it. Actually it's not moving because it's a picture, not a movie. But the snapshot, the picture was taken when the car was moving. But I cannot tell you if it was moving forward or backward. There are two snapshots there because it was taken with a long exposure during the night. So this is why you see this movement of the light and also with a short flash taken either at the beginning or at the end. And this is why with the same movement you see different kind of anomaly there with lights in front or the other. So I'm showing that to compare with databases. Databases are always moving because people are changing data. And when we want to read it, we want to see a consistent view of it of something that is moving. But the same. There are some anomalies that can happen because when you read things change. So how can you solve this anomaly? One solution is to stop the car. You stop the car, you take the picture and then you have a nice picture of it. But then the car cannot move. Another one is to take a movie of the car and then when you want to see the full picture of the car, you can go maybe back in the movie and pause it and then you can see it. And actually databases do the same. They can stop the database for modifications with locks or they can take a movie of the changes to be able to go back to the past. So two kind of implementations and you find them in all databases mostly. You look, you can look what you read and then it stops. It cannot be changed until the end of your transaction or you can read from a preview snapshot. So you lag, you don't see the latest changes but you have a consistent point of view. If you have read books, learned about isolation levels, it was probably not introduced with the pictures I've seen. It was probably introduced with that. Don't try to read it. I will not even talk about that. This is what you find in most courses. This is what you find in the SQL standard but actually no database implements that. That was defined before any implementation and the modern databases do not work like that and do not provide those isolation levels even if they put the name to match what is in the standard. They do not really do that. So let's forget about it. If you want to read about it, there are plenty of sources. I would like more to explain how the real databases work and basically the isolation levels that you find in modern databases, you find so really simple that is very similar to what is defined in the SQL standard but the others are based on snapshot isolation like the picture we have taken. Okay. So I'm really saying that there is the SQL standard on one side and there are the databases that you use on the other side and there is a big difference. For the SQL standard, when SQL standard was defined, the idea was that users do not have to care about the others in the database. You just work, define your transactions, code your access to the database as if you are alone in the database. You do not have to look explicitly anything. The database will do it for you. So for the SQL standard, looks is something that can happen in the database but not visible to the user in the SQL standard. There is no lock command for example. But in real life, in the real databases that exist today, this is not how it works. Most of databases are able to read from a past snapshot. They record the changes and they are able to read from the past so that they don't have to look too much and the developers can also choose to look themselves some information that they don't want to change, to be changed by other transactions during their transaction. That's typically the select for updates. You will not find that in the SQL standard. You will find the syntax for select for updates but not to lock it. So yeah, big mismatch between the theory and how databases work. Before talking more about MVCC and defining it, I will introduce a few concepts. My idea is that there are many databases and they have many versions. You cannot learn, remember how everything works but if you have the basic concept then you can understand better how all those things are working. So I will explain a bit more what is special about SQL transactions especially if you come from no SQL databases. I will explain the reads and writes time in a transaction because transactions can be long and we will see optimistic and payment-seemistic locking and maybe name them differently. This explicit locking in SQL that is not in the standard but that you use in SQL applications. Any questions so far? Okay, first, SQL transactions are complex. So if you work with SQL databases you probably know that if you work with no SQL databases and if you see the no SQL database vendors telling you that they have transaction, they have AC properties, they may be, they are not talking about the same thing exactly. SQL transactions are complex because they do many reads and writes during the transaction and the transaction can take a few milliseconds or seconds or even minutes. Many reads and writes and the complexity is that in a transaction usually the writes depend on what you have read. Usually if you take a simple example you check in for a flight so you read to see the seats available and then you will pick one. But your choice to pick one that is a write will depend on what you have read. You don't want to pick a seat that is not free. And then the problem is that another transaction may have read the same map of the three seats and may pick the same. This is where we will have conflicts and we will see how it is solved. So SQL transactions are complex especially when you have a decision on what you have read that will determine what is done later. And in SQL you do not declare everything that you will do. I can say begin transaction, read something, have a coffee, come back, write something because during the coffee I was thinking about what I will write. That's very different from, for example, no SQL databases where each call you exactly tell what you do, what the database has to do. Here you have a transaction with user, maybe user interaction between them. And even if you do a single row insert that looks like a simple write, so not this complex problem of reading, writing, actually on your table you may have foreign keys, you may have secondary indexes to update, you have a primary key. So even this simple statement has to read before write. You read, does the key already exist? If it exists already you have an exception. If it doesn't exist then you can write. And when you write you write to secondary index, you check the foreign keys. So even something that is very simple from the developer point of view can be a complex transaction where write depends on reads. And as I mentioned, no SQL vendors now start to have some transactional behavior. But when they call that ACID like the SQL properties, it's not about those complex transactions. For example, in no SQL databases you just have single calls you put or you get something. Many no SQL databases do not try to be consistent. They have individual consistency when updating the secondary index. They don't have unique keys, etc. So that was what is more complex with SQL and why it's not so easy to implement a database. And then during this transaction where you have reads and writes they cannot all happen at the same time because it's different place on disk, it's different CPU instructions. So the problem is that the reads and writes happen at different time during your transaction. Cannot be atomic. But for the application it has to look like it is at atomic all happening at commit time. And so it happens at different time then on different states of the database and then the consistency is difficult. So how databases can try to reduce the number of different states where it reads and writes. You can read from the past if you recorded all changes like in a movie. You can read from the past but you cannot read from the future. Obviously you don't know what the others will do. Except if there is no modification for example if you look everything that you read you can read from the future because you know that the future state is exactly the same as the current one. For writes it's the opposite. You cannot write to the past when you see movies where people go to the past and change something it's really consistent at the end. But again you can be sure that there are no modifications. You look everything that you write and then where you write is the same state as at the end. So if I have a timeline between my begin transaction and commit I read and write at multiple times I can read and see as of the time of the start of my transaction for example. And I can read and write and at commit time come back to set the right time stamp as the commit time because this is where everything is visible. So we'll see that in NVCC databases you read from a state at the beginning of your transaction and you write as of the commit time. That's the magic of databases to be able to do something that looks like happening at the same time even if it's not possible physically. So to do that in NVCC databases the writes take an exclusive look. In NVCC is about reading from the past the write you cannot do anything else than looking what you write to be sure that it doesn't change until the end of the transaction. To read you can read from the past and then instead of multiple different states of the database you have only two states the read state and the write state. But then you need some additional logic in the database that compares those states check if they are compatible. If something has changed in between it may have to raise an error to tell you okay you have read from this state you have written on this state but they are not compatible because someone changed something in the state in between. Another concept optimistic and pessimistic looking and so those are general names that are used at many levels. At low level in the implementation but also from the application you can the idea is that optimistic looking you think you will not have any conflicts or you do not do additional things for that you will just raise an error and retry if it happens. Pessimistic looking you expect that you will be in conflict and then you wait on it. But those terms are a bit misleading. Those are terms for example in new Gabbai when we did the documentation we used other terms like wait on conflict. So this is really the behavior. A conflict is detected for example you want to take an exclusive lock someone else has locked the row. You just wait that they are finished so that you can continue so there is an thank you. So you wait for you detect the conflict on the row for example but you wait for transaction. Another one is fail on conflict just you detect a conflict you don't wait you just raise an error to the application and then the application can retry later with the hope that the conflict is gone. But there is another one and that's also why optimistic and pessimistic looking are not really useful. There is another case where you may want to skip on conflict. For example you want to read and lock a row that is locked by another transaction. You don't want to wait for it. You don't want to raise an error you will just ignore this row. This again of course locks are not in SQL standard but this cannot be in the SQL standard because it's not very deterministic but this is used a lot for queues for example if you want to dequeue events that are in a table you want to lock them when you process them but if someone else is processing a row you just want to process the next one. Typically we will see that it's the case of select for update skip locked. And last concept before going into the different implementation. Explicit locking so by the application again this is not in the SQL standard but this is our most application under the anomalies that could happen in the different isolation levels that you will see. And typically when you read a select for update is a read but it's a bit more than a read you read and you tell the database about your intention to update something which means that it's a read that behaves like a write like an update lock with a lock on it. And then you have those choices. Wait on conflict. Don't wait. Raise an error or skip lock. Those three possibilities where the developer tells the database I want to read that I don't want it to change or lock it and if you cannot lock it then give me an error or wait until you can lock it or just go to the next row I will come back to this one later. So you can just ignore the isolation levels and just manage that from the application. If you know what you are doing for example if I know that I'm reading the status of a hotel room that I want to book I can select for update what I read and then I know that nobody will change its status until I commit my transaction. So you don't really need to care about isolation levels if you are okay about thinking about the conflict yourself. Thinking is in the code and of course in tests the problem with concurrency is that it's not always easy to test the different combinations. But it's totally possible. And those select for update we will see also for share those concern rows but sometimes to avoid some anomalies you may want to lock more than a row maybe a row that doesn't exist yet. For example you don't want anyone to insert a new row that's where you realize that this row does not exist then you can also lock a table. Again you don't find that in the SQL standard but all databases give you the possibility to lock. Okay do you have any question about that? So the main message there is that it's totally okay you can ignore the isolation levels do your own looking it's totally okay but only if you understand them. So most people use the default isolation levels read committed in Postgres and that's fine. You don't need other isolation level if you don't want to but you need to understand how it works to be sure that you handle correctly the cases where you have to block something yourself. So basically that's the goal of the presentation talking about how it works so that you understand it maybe you will not change your isolation level after understanding all that but at least you will understand how it works and if you have some flaws in the logic with the select for update you use for example. So MVCC stands for multiversion concurrency control I don't really like this name others may call it multiversion read consistency at least it makes it clear that it is only about reads. The writes you cannot do anything else than looking what you write this is only about reads isolation levels are only about reads it was also called multi-generational architecture in the first databases that implement it but basically it's versioning when you change a row the database keeps the old version of the row so that you can read from a previous snapshot. Twenty years ago IBM in a paper that compared with Oracle was saying MVCC is implemented in only one database Oracle no other database did it because basically it's not good and today I think that only DB2 is not using MVCC release or the history has proved that they were actually wrong now all databases use MVCC because you don't have to look too much when you read. Another thing that they were saying was that the model where you look what you read the one that is defined in the SQL standard is better because the developer or the user doesn't have to think about the code around the select for updates but finally most application developers really prefer to put the select for updates in the transactions where they are needed rather than going to isolation levels that may have other problems the only thing where they were right in this paper was saying that you need to understand it in your database because all implementations are different. So the non-NVCC ones like the DB2 they cannot read from the past because they do not record all the changes they have to record it for recovery reason but they don't record it for this reason. So they cannot go to the past the only way is to look when you read you look in share mode so many people can read at the same time but nobody can update something that you have read which cause problem because then you may have deadlocks then you may have you look too much basically for no LTP application and MVCC databases they look only for the rights they read from the past and they have some conflict detection to see if those two states conflict with your transaction consistency or not. This is also for repeatable read only because if you do read commit even within transaction you will read the current... The remark is that when I say I read from the beginning of the transaction that's the general case in read committed we will see the isolation level at the end the read time may be reset for each statement and we will see why. But the idea is that you have only two states when you are reading your statement. And yeah this is about read. I will go first I have a reference on the first mention of this architecture but basically the changes are versioned we will see that there are different implementation Postgres versions the rows in the table and query can read as of a specific time so we will see as of the beginning of the transaction or as of the start of a statement and then it can do those optimistic looking without locks that's the main value of it the readers do not block the writers. Typically in non-MVCC databases if you are the DBA and just want to count the tables the rows in the table and you do a select count star which you do easily in Postgres if you do that in DB2 you will lock all your applications because you will lock everything so yeah quite nice to be able to read without blocking the others. So basically MVCC became popular because it allowed mixed workloads even if you have a no LTP application there is some reporting on it there are some analytic queries on it and you don't want them to block the others. So then the implementation all databases most databases today implement MVCC but all in a different way and then the bravio may be different and that's why it's interesting to understand it. First when you version you have a version number some databases use a timestamp some databases use a number that is always increasing the log sequence number for example in Postgres and what do you version? Many databases version the rows in Postgres each row if you update a row you will have a new version of the row. Then the question is I say what about the index entries? There are some databases that also version the index entries Postgres doesn't do versioning for the index so the index has the two entries and then in the row you have this version number. There are some databases actually I think there is only one database that doesn't version at all level but at block level so a low level the storage the page or vehicle does that at block level so very different implementation and where do you store the past versions? That's also a big problem you can store it keep it where it is for example in Postgres you have a row you update it the new version will be written at the end of the heap table and the old versions just stays there in other databases this old version will be moved to an undue log a rollback segment can have a different name and both are pros and cons. If you move it then you have the overhead to move it but you don't put overhead on the other that we have to read and the size of the table so many different implementations. Also you need to change the versions if an index go to a row and then you see that this version is too early when compared to your read time you want to go to a past version or it can be the opposite you always go to the past version and then you see if there are new changes. So in Postgres when a row is updated a new version is written at the end of the heap and the old version has a pointer to it so from old to the old. Question? I didn't get the end of the question. We have a microphone it will be easier. I'm just asking that the version number whatever it is which shows that a change has been made so will it also point to the row or rows which have been updated or deleted or changed like in one version or it just shows that this table has been changed in this version? For example in Postgres it is per row so typically if I read from an index the index entry the value that I'm looking for I have one or multiple index entries for that and then it will go to the table and then if it's not the right version it will go to the right version so it follows it. Okay so I think it's kind of an idea which is attached to each row and not the whole table right? Yeah the version is per row for each row. I think only Oracle is very different where the version is per page so you read a page you see which transactions are there and then there is the information to undo the page to a previous version but most databases do it per row. Of course it has an overhead in the row because you need enough information to follow that. And also the big question you keep all versions but how long? Because your database will grow if you just keep all versions. So you need to keep all versions to cover the longest query. If I have a long report that takes one hour and if it's read time is one hour ago I need one hour of versions but after some time you need to clean that and it Postgres is the vacuum that does that. Kind of garbage collection again it has different name in all databases but basically you need something that cleans that. If the old version was moved in a different place then the cleanup may be easy. You have the overhead when you move it but then the cleanup may be easy. If it's done in a lazy way where the old version stays in place then you need something that cleans up. So all implementations are different and then the most difficult is the indexes. The secondary indexes in Postgres all indexes are secondary indexes because the row is stored in the heap tables. They have all the entries and then when you clean up the old version you need also to clean up the index. So it's really something that is very complex to implement MVCC in databases. It has the big value of readers not blocking writers but it's not easy and all implementations are different. I will not go into the detail in a few databases that I compared. So I already mentioned the level of versioning table rows for Postgres. Oracle does it per block. For example in Ugabite we are per row but also per index. So the index has also the versioning. The interface is the same as it's compatible with Postgres but the storage is completely different. So I already mentioned how it works with Postgres, happened to the heap table. Then you have to think about where are those versions. If it is happened then the different versions are scattered. There are some other implementations where all versions of a key, the primary key are together. For example SQL Server implemented MVCC very late compared to the other databases. They move the old version to another database where initially the time DB now they have a specific storage for that. But it's all per key. MySQL is also very special. MySQL doesn't have heap tables. It's only in the index organized table. So the rows stored in the primary key. And they have two logs. They have an insert log which you don't really care when you read from the past. You just ignore the new insert but they have also a log for the updates or deletes. If you delete it, it's just marked like an update saying it is the end of lifecycle of the whole. So they have another log for that. Yeah, question? It has only one log, not two logs. It has different types. In MySQL? In Unodebs. Yeah, okay. Yeah, thanks. Only one log. Those are very different. I know quite well Postgres, the Wacol and of course, you Gabbite. I know a bit less those. The documentation is also not very... The SQL Server implementation, there are not a lot of documentation about it. MySQL, yeah. But basically, they all have also garbage collection and the main difference, the choice of the databases. I said that the retention of version must cover the longest query. Some databases, for example, Wacol, doesn't care after a while not to have too many old versions. So it will remove it. You set the retention that you do. But that means that a long query may encounter this snapshot to old error saying, oh, I cannot rebuild the read time that you ask for. Other databases will just don't do garbage collection, render longer running queries. For example, in Postgres, if you have a long running query, vacuum will not be able to clean up everything that it has to clean up. And that can be problematic when you read from a standby. And that can be different. You can have the same equivalent of error. I'm not going to go into all detail. The most important is that you understand the different concepts. Those are different. Those are pros and cons, the overhead on different operations. One that is very nice with Postgres because you have all the old version in place. Rollback is very fast. Usually don't really care about how fast is a rollback in normal operation. But when you have a crash recovery, you need to rollback the transaction that were not committed at the time of the crash. So this is really fast in Postgres. But in Postgres, keeping the old version in place, you have all these problems with bloat and vacuum that you have to manage. In other databases, the problem of stopping garbage collection or not when you have long running query, do you want to give priority to those queries that they can finish? Or do you want to give priority to the garbage collection that maintains the performance? So those are different pros and cons that we have seen. Important to know what is the default isolation level. Important to know because most people do not change it. They use the default. So at least you should know what you are using. In Postgres, it is the read committed isolation level. The same for many databases. And mostly for performance reasons. If serializable was easy and fast, probably everybody would use it, but not the case. And even if they all use read committed, they have a different behavior. I said that at some point it has to detect conflicts between reads and writes. And when it detects a conflict, the big advantage of read committed, and I will explain that later, the big advantage is that when there is a conflict, in some cases the database can restart the statement to a newer read time. So from the application point of view, you just wait a bit more and it is managed by the database. Postgres does not restart the statement, but it can reread a row, which may show some inconsistency because it can read a row from a different read time. In my SQL, the default is repeatable read. We have also some strange things that may happen and look like inconsistency. Some operations are not really isolated. The serializable. Very few databases use serializable by default. A few distributed SQL databases use it, but for example, co-crochet is implementing read committed. Mostly to be compatible with existing applications and because serializable has to look too many things. So I mentioned the read restart. When, so in read committed, what is different with read committed is that the contract with the developer is that the read time can change during a transaction for each statement. If I am in isolation levels above, the read time is also the time where the transaction starts, the begin transaction. With read committed, each statement has its own read time, which may bring more anomalies if you rely on what has been read before. But the big advantage of it, because the read time can change during a transaction, if a conflict is detected within a statement, the database may be able to restart it as of a newer read time. You cannot do that for the whole transaction because you don't know what the application did before. Maybe the transaction did something not transactional. Some databases restart the read in read committed when they encounter a problem. Postgres doesn't. Postgres just rereads the new whole. I think, I'm not sure, I think the main reason is that to restart a statement, you have to take a snapshot just before and to roll back to this safe point. I said stop shots, I must say a safe point. To roll back to this safe point to redo it. And in postgres, current version taking safe points for each statement is probably too much overhead. Actually, this read restart is also possible in other isolation levels if it is the first statement of the transaction. The thing is not really related to the isolation level. It's more when the database knows that the application did nothing before, then it can move the read point. So basically, I'm going fast on that. Basically, bad things can happen with all databases at all isolation level and it's good to know it. So postgres can read rows at different point in time. Oracle can set a reusable that is not reusable. It's kind of a lie in interpreting the isolation levels. SQL server has MVCC, but when it needs to lock, there is an eye overhead, so it's not always recommended. MySQL in repeatable read can see commits by others. So basically, bad things can happen at any level, not at real serializable, but this has a cost in terms of performance. But it's not a big problem if you understand it and you know that you can do your own concurrency control with select for update, for example. So the goal is to know which problem can happen with your transaction. It depends on the isolation level, the database you use, but also what you are doing in your transaction, and then you can use mostly select for update to manage that. So with implicit locking, I already said that it was not in the SQL standard. SQL standard was made for a lot of user interactions, long transactions, where a user really starts a transaction, can go back later at the time where users are at only one screen, so you cannot switch to another application and leave a transaction open. Today, you just don't want to do that. Today, applications probably know all the transaction intent from the beginning, which means that the application can say, okay, I'm reading, but with the goal, the intent of writing, then I do a select for update. And in short, if you use read committed, big advantage, there are no locks on what you read, and the read time is the start of the statement, which is really cool. And if you want, but may have some anomalies, if you don't want those anomalies, just use select for share, select for update to lock what you want. Instead of having the database locking all reads, you just lock the few ones that you need to lock. In repeatable read, the difference is that the read time is the start of the transaction, not the start of the statement. The problem is that there, a conflict may raise an error, and then in the application, you need to catch this error, a serializable error, to retry later. But you can also lock with select for update, or lock at a higher level, lock a table, but then, be careful, you lock a table, nobody can update it. In serializable level, everything works well. You don't have to care, you don't have to lock anything yourself. There is a performance penalty, but also, the developer doesn't have to care about locking, but has to care about the retry logic. And that's not so easy, it's not just retry until it works. You probably went like an exponential back off, you retry 10 milliseconds later, if it still blocked, you retry 100 milliseconds later. Okay. Going fast on that, there is more than select for updates, you can select for share, it's just a read lock, many sessions can select for share, but be careful, if in a transaction, you select for share, and then you update, you may have some cases where you will have a conflict, and then you prefer to reserve with an exclusive lock before. You can lock tables, but be careful, and for all of them, you have the choice of wait on conflict, or raise and error, or skip it, if it's a queue. Okay, we are just on time. I have a series, or I don't know, maybe 10 block post about it. So I try to summarize that in this presentation. This is a topic that is very interesting, because different in all databases, and many developers, there are a lot of developers that do not develop only on Postgres, they have other databases, and many developers think that they can write database agnostic applications by using a framework that can generate the syntax for many databases, that works for the syntax, but as we have seen, the preview is different on all databases, so there is nothing like a database agnostic application. If you have questions, do not hesitate to contact me. I will be there all day, but I have a session in one hour, the other side on something different, Linux, load average, if you want to look at it.", "segments": [{"id": 0, "seek": 0, "start": 0.0, "end": 14.56, "text": " So, yeah, the idea is to talk about resolution in postgres, compare it with other databases.", "tokens": [50364, 407, 11, 1338, 11, 264, 1558, 307, 281, 751, 466, 8669, 294, 2183, 45189, 11, 6794, 309, 365, 661, 22380, 13, 51092], "temperature": 0.0, "avg_logprob": -0.41077314917720964, "compression_ratio": 1.436046511627907, "no_speech_prob": 0.2716430127620697}, {"id": 1, "seek": 0, "start": 14.56, "end": 20.52, "text": " We will see the concept and we will see also the practical usage from developer point of", "tokens": [51092, 492, 486, 536, 264, 3410, 293, 321, 486, 536, 611, 264, 8496, 14924, 490, 10754, 935, 295, 51390], "temperature": 0.0, "avg_logprob": -0.41077314917720964, "compression_ratio": 1.436046511627907, "no_speech_prob": 0.2716430127620697}, {"id": 2, "seek": 0, "start": 20.52, "end": 21.52, "text": " view.", "tokens": [51390, 1910, 13, 51440], "temperature": 0.0, "avg_logprob": -0.41077314917720964, "compression_ratio": 1.436046511627907, "no_speech_prob": 0.2716430127620697}, {"id": 3, "seek": 0, "start": 21.52, "end": 22.52, "text": " I'm Frank Bacheau.", "tokens": [51440, 286, 478, 6823, 363, 6000, 1459, 13, 51490], "temperature": 0.0, "avg_logprob": -0.41077314917720964, "compression_ratio": 1.436046511627907, "no_speech_prob": 0.2716430127620697}, {"id": 4, "seek": 0, "start": 22.52, "end": 26.16, "text": " I've always been working with databases.", "tokens": [51490, 286, 600, 1009, 668, 1364, 365, 22380, 13, 51672], "temperature": 0.0, "avg_logprob": -0.41077314917720964, "compression_ratio": 1.436046511627907, "no_speech_prob": 0.2716430127620697}, {"id": 5, "seek": 2616, "start": 26.16, "end": 31.68, "text": " Now I'm developer advocate at Sugabite that is distributed postgres.", "tokens": [50364, 823, 286, 478, 10754, 14608, 412, 39131, 455, 642, 300, 307, 12631, 2183, 45189, 13, 50640], "temperature": 0.0, "avg_logprob": -0.28752366886582487, "compression_ratio": 1.4553990610328638, "no_speech_prob": 0.02081386186182499}, {"id": 6, "seek": 2616, "start": 31.68, "end": 38.28, "text": " We use the postgres code for the SQL layer but the storage is completely different.", "tokens": [50640, 492, 764, 264, 2183, 45189, 3089, 337, 264, 19200, 4583, 457, 264, 6725, 307, 2584, 819, 13, 50970], "temperature": 0.0, "avg_logprob": -0.28752366886582487, "compression_ratio": 1.4553990610328638, "no_speech_prob": 0.02081386186182499}, {"id": 7, "seek": 2616, "start": 38.28, "end": 45.32, "text": " So, let's start if my clicker works.", "tokens": [50970, 407, 11, 718, 311, 722, 498, 452, 2052, 260, 1985, 13, 51322], "temperature": 0.0, "avg_logprob": -0.28752366886582487, "compression_ratio": 1.4553990610328638, "no_speech_prob": 0.02081386186182499}, {"id": 8, "seek": 2616, "start": 45.32, "end": 46.519999999999996, "text": " I have a question for you.", "tokens": [51322, 286, 362, 257, 1168, 337, 291, 13, 51382], "temperature": 0.0, "avg_logprob": -0.28752366886582487, "compression_ratio": 1.4553990610328638, "no_speech_prob": 0.02081386186182499}, {"id": 9, "seek": 2616, "start": 46.519999999999996, "end": 49.04, "text": " So this is a picture of a car, obviously.", "tokens": [51382, 407, 341, 307, 257, 3036, 295, 257, 1032, 11, 2745, 13, 51508], "temperature": 0.0, "avg_logprob": -0.28752366886582487, "compression_ratio": 1.4553990610328638, "no_speech_prob": 0.02081386186182499}, {"id": 10, "seek": 2616, "start": 49.04, "end": 54.56, "text": " Do you think the car is moving forward or backward?", "tokens": [51508, 1144, 291, 519, 264, 1032, 307, 2684, 2128, 420, 23897, 30, 51784], "temperature": 0.0, "avg_logprob": -0.28752366886582487, "compression_ratio": 1.4553990610328638, "no_speech_prob": 0.02081386186182499}, {"id": 11, "seek": 5456, "start": 54.56, "end": 59.84, "text": " So, think about it.", "tokens": [50364, 407, 11, 519, 466, 309, 13, 50628], "temperature": 0.0, "avg_logprob": -0.26792628189613077, "compression_ratio": 1.4609929078014185, "no_speech_prob": 0.023751085624098778}, {"id": 12, "seek": 5456, "start": 59.84, "end": 68.0, "text": " Actually it's not moving because it's a picture, not a movie.", "tokens": [50628, 5135, 309, 311, 406, 2684, 570, 309, 311, 257, 3036, 11, 406, 257, 3169, 13, 51036], "temperature": 0.0, "avg_logprob": -0.26792628189613077, "compression_ratio": 1.4609929078014185, "no_speech_prob": 0.023751085624098778}, {"id": 13, "seek": 5456, "start": 68.0, "end": 74.24000000000001, "text": " But the snapshot, the picture was taken when the car was moving.", "tokens": [51036, 583, 264, 30163, 11, 264, 3036, 390, 2726, 562, 264, 1032, 390, 2684, 13, 51348], "temperature": 0.0, "avg_logprob": -0.26792628189613077, "compression_ratio": 1.4609929078014185, "no_speech_prob": 0.023751085624098778}, {"id": 14, "seek": 5456, "start": 74.24000000000001, "end": 78.32000000000001, "text": " But I cannot tell you if it was moving forward or backward.", "tokens": [51348, 583, 286, 2644, 980, 291, 498, 309, 390, 2684, 2128, 420, 23897, 13, 51552], "temperature": 0.0, "avg_logprob": -0.26792628189613077, "compression_ratio": 1.4609929078014185, "no_speech_prob": 0.023751085624098778}, {"id": 15, "seek": 7832, "start": 78.32, "end": 86.19999999999999, "text": " There are two snapshots there because it was taken with a long exposure during the night.", "tokens": [50364, 821, 366, 732, 19206, 27495, 456, 570, 309, 390, 2726, 365, 257, 938, 10420, 1830, 264, 1818, 13, 50758], "temperature": 0.0, "avg_logprob": -0.19123235940933228, "compression_ratio": 1.7157894736842105, "no_speech_prob": 0.24549178779125214}, {"id": 16, "seek": 7832, "start": 86.19999999999999, "end": 94.88, "text": " So this is why you see this movement of the light and also with a short flash taken either", "tokens": [50758, 407, 341, 307, 983, 291, 536, 341, 3963, 295, 264, 1442, 293, 611, 365, 257, 2099, 7319, 2726, 2139, 51192], "temperature": 0.0, "avg_logprob": -0.19123235940933228, "compression_ratio": 1.7157894736842105, "no_speech_prob": 0.24549178779125214}, {"id": 17, "seek": 7832, "start": 94.88, "end": 97.67999999999999, "text": " at the beginning or at the end.", "tokens": [51192, 412, 264, 2863, 420, 412, 264, 917, 13, 51332], "temperature": 0.0, "avg_logprob": -0.19123235940933228, "compression_ratio": 1.7157894736842105, "no_speech_prob": 0.24549178779125214}, {"id": 18, "seek": 7832, "start": 97.67999999999999, "end": 104.75999999999999, "text": " And this is why with the same movement you see different kind of anomaly there with", "tokens": [51332, 400, 341, 307, 983, 365, 264, 912, 3963, 291, 536, 819, 733, 295, 42737, 456, 365, 51686], "temperature": 0.0, "avg_logprob": -0.19123235940933228, "compression_ratio": 1.7157894736842105, "no_speech_prob": 0.24549178779125214}, {"id": 19, "seek": 7832, "start": 104.75999999999999, "end": 107.0, "text": " lights in front or the other.", "tokens": [51686, 5811, 294, 1868, 420, 264, 661, 13, 51798], "temperature": 0.0, "avg_logprob": -0.19123235940933228, "compression_ratio": 1.7157894736842105, "no_speech_prob": 0.24549178779125214}, {"id": 20, "seek": 10700, "start": 107.0, "end": 111.6, "text": " So I'm showing that to compare with databases.", "tokens": [50364, 407, 286, 478, 4099, 300, 281, 6794, 365, 22380, 13, 50594], "temperature": 0.0, "avg_logprob": -0.20943981022029728, "compression_ratio": 1.6229508196721312, "no_speech_prob": 0.06232042610645294}, {"id": 21, "seek": 10700, "start": 111.6, "end": 115.84, "text": " Databases are always moving because people are changing data.", "tokens": [50594, 40461, 1957, 366, 1009, 2684, 570, 561, 366, 4473, 1412, 13, 50806], "temperature": 0.0, "avg_logprob": -0.20943981022029728, "compression_ratio": 1.6229508196721312, "no_speech_prob": 0.06232042610645294}, {"id": 22, "seek": 10700, "start": 115.84, "end": 122.12, "text": " And when we want to read it, we want to see a consistent view of it of something that", "tokens": [50806, 400, 562, 321, 528, 281, 1401, 309, 11, 321, 528, 281, 536, 257, 8398, 1910, 295, 309, 295, 746, 300, 51120], "temperature": 0.0, "avg_logprob": -0.20943981022029728, "compression_ratio": 1.6229508196721312, "no_speech_prob": 0.06232042610645294}, {"id": 23, "seek": 10700, "start": 122.12, "end": 123.12, "text": " is moving.", "tokens": [51120, 307, 2684, 13, 51170], "temperature": 0.0, "avg_logprob": -0.20943981022029728, "compression_ratio": 1.6229508196721312, "no_speech_prob": 0.06232042610645294}, {"id": 24, "seek": 10700, "start": 123.12, "end": 124.12, "text": " But the same.", "tokens": [51170, 583, 264, 912, 13, 51220], "temperature": 0.0, "avg_logprob": -0.20943981022029728, "compression_ratio": 1.6229508196721312, "no_speech_prob": 0.06232042610645294}, {"id": 25, "seek": 10700, "start": 124.12, "end": 131.64, "text": " There are some anomalies that can happen because when you read things change.", "tokens": [51220, 821, 366, 512, 24769, 48872, 300, 393, 1051, 570, 562, 291, 1401, 721, 1319, 13, 51596], "temperature": 0.0, "avg_logprob": -0.20943981022029728, "compression_ratio": 1.6229508196721312, "no_speech_prob": 0.06232042610645294}, {"id": 26, "seek": 13164, "start": 131.64, "end": 137.67999999999998, "text": " So how can you solve this anomaly?", "tokens": [50364, 407, 577, 393, 291, 5039, 341, 42737, 30, 50666], "temperature": 0.0, "avg_logprob": -0.1491290111931003, "compression_ratio": 1.8617021276595744, "no_speech_prob": 0.10013961791992188}, {"id": 27, "seek": 13164, "start": 137.67999999999998, "end": 139.11999999999998, "text": " One solution is to stop the car.", "tokens": [50666, 1485, 3827, 307, 281, 1590, 264, 1032, 13, 50738], "temperature": 0.0, "avg_logprob": -0.1491290111931003, "compression_ratio": 1.8617021276595744, "no_speech_prob": 0.10013961791992188}, {"id": 28, "seek": 13164, "start": 139.11999999999998, "end": 142.67999999999998, "text": " You stop the car, you take the picture and then you have a nice picture of it.", "tokens": [50738, 509, 1590, 264, 1032, 11, 291, 747, 264, 3036, 293, 550, 291, 362, 257, 1481, 3036, 295, 309, 13, 50916], "temperature": 0.0, "avg_logprob": -0.1491290111931003, "compression_ratio": 1.8617021276595744, "no_speech_prob": 0.10013961791992188}, {"id": 29, "seek": 13164, "start": 142.67999999999998, "end": 145.07999999999998, "text": " But then the car cannot move.", "tokens": [50916, 583, 550, 264, 1032, 2644, 1286, 13, 51036], "temperature": 0.0, "avg_logprob": -0.1491290111931003, "compression_ratio": 1.8617021276595744, "no_speech_prob": 0.10013961791992188}, {"id": 30, "seek": 13164, "start": 145.07999999999998, "end": 151.07999999999998, "text": " Another one is to take a movie of the car and then when you want to see the full picture", "tokens": [51036, 3996, 472, 307, 281, 747, 257, 3169, 295, 264, 1032, 293, 550, 562, 291, 528, 281, 536, 264, 1577, 3036, 51336], "temperature": 0.0, "avg_logprob": -0.1491290111931003, "compression_ratio": 1.8617021276595744, "no_speech_prob": 0.10013961791992188}, {"id": 31, "seek": 13164, "start": 151.07999999999998, "end": 159.16, "text": " of the car, you can go maybe back in the movie and pause it and then you can see it.", "tokens": [51336, 295, 264, 1032, 11, 291, 393, 352, 1310, 646, 294, 264, 3169, 293, 10465, 309, 293, 550, 291, 393, 536, 309, 13, 51740], "temperature": 0.0, "avg_logprob": -0.1491290111931003, "compression_ratio": 1.8617021276595744, "no_speech_prob": 0.10013961791992188}, {"id": 32, "seek": 15916, "start": 159.16, "end": 162.24, "text": " And actually databases do the same.", "tokens": [50364, 400, 767, 22380, 360, 264, 912, 13, 50518], "temperature": 0.0, "avg_logprob": -0.18834893327010305, "compression_ratio": 1.6, "no_speech_prob": 0.04920664429664612}, {"id": 33, "seek": 15916, "start": 162.24, "end": 170.24, "text": " They can stop the database for modifications with locks or they can take a movie of the", "tokens": [50518, 814, 393, 1590, 264, 8149, 337, 26881, 365, 20703, 420, 436, 393, 747, 257, 3169, 295, 264, 50918], "temperature": 0.0, "avg_logprob": -0.18834893327010305, "compression_ratio": 1.6, "no_speech_prob": 0.04920664429664612}, {"id": 34, "seek": 15916, "start": 170.24, "end": 176.44, "text": " changes to be able to go back to the past.", "tokens": [50918, 2962, 281, 312, 1075, 281, 352, 646, 281, 264, 1791, 13, 51228], "temperature": 0.0, "avg_logprob": -0.18834893327010305, "compression_ratio": 1.6, "no_speech_prob": 0.04920664429664612}, {"id": 35, "seek": 15916, "start": 176.44, "end": 183.51999999999998, "text": " So two kind of implementations and you find them in all databases mostly.", "tokens": [51228, 407, 732, 733, 295, 4445, 763, 293, 291, 915, 552, 294, 439, 22380, 5240, 13, 51582], "temperature": 0.0, "avg_logprob": -0.18834893327010305, "compression_ratio": 1.6, "no_speech_prob": 0.04920664429664612}, {"id": 36, "seek": 15916, "start": 183.51999999999998, "end": 188.32, "text": " You look, you can look what you read and then it stops.", "tokens": [51582, 509, 574, 11, 291, 393, 574, 437, 291, 1401, 293, 550, 309, 10094, 13, 51822], "temperature": 0.0, "avg_logprob": -0.18834893327010305, "compression_ratio": 1.6, "no_speech_prob": 0.04920664429664612}, {"id": 37, "seek": 18832, "start": 188.32, "end": 193.23999999999998, "text": " It cannot be changed until the end of your transaction or you can read from a preview", "tokens": [50364, 467, 2644, 312, 3105, 1826, 264, 917, 295, 428, 14425, 420, 291, 393, 1401, 490, 257, 14281, 50610], "temperature": 0.0, "avg_logprob": -0.20159464297087296, "compression_ratio": 1.6604651162790698, "no_speech_prob": 0.11345703899860382}, {"id": 38, "seek": 18832, "start": 193.23999999999998, "end": 194.23999999999998, "text": " snapshot.", "tokens": [50610, 30163, 13, 50660], "temperature": 0.0, "avg_logprob": -0.20159464297087296, "compression_ratio": 1.6604651162790698, "no_speech_prob": 0.11345703899860382}, {"id": 39, "seek": 18832, "start": 194.23999999999998, "end": 204.44, "text": " So you lag, you don't see the latest changes but you have a consistent point of view.", "tokens": [50660, 407, 291, 8953, 11, 291, 500, 380, 536, 264, 6792, 2962, 457, 291, 362, 257, 8398, 935, 295, 1910, 13, 51170], "temperature": 0.0, "avg_logprob": -0.20159464297087296, "compression_ratio": 1.6604651162790698, "no_speech_prob": 0.11345703899860382}, {"id": 40, "seek": 18832, "start": 204.44, "end": 210.88, "text": " If you have read books, learned about isolation levels, it was probably not introduced with", "tokens": [51170, 759, 291, 362, 1401, 3642, 11, 3264, 466, 16001, 4358, 11, 309, 390, 1391, 406, 7268, 365, 51492], "temperature": 0.0, "avg_logprob": -0.20159464297087296, "compression_ratio": 1.6604651162790698, "no_speech_prob": 0.11345703899860382}, {"id": 41, "seek": 18832, "start": 210.88, "end": 212.0, "text": " the pictures I've seen.", "tokens": [51492, 264, 5242, 286, 600, 1612, 13, 51548], "temperature": 0.0, "avg_logprob": -0.20159464297087296, "compression_ratio": 1.6604651162790698, "no_speech_prob": 0.11345703899860382}, {"id": 42, "seek": 18832, "start": 212.0, "end": 215.44, "text": " It was probably introduced with that.", "tokens": [51548, 467, 390, 1391, 7268, 365, 300, 13, 51720], "temperature": 0.0, "avg_logprob": -0.20159464297087296, "compression_ratio": 1.6604651162790698, "no_speech_prob": 0.11345703899860382}, {"id": 43, "seek": 18832, "start": 215.44, "end": 216.51999999999998, "text": " Don't try to read it.", "tokens": [51720, 1468, 380, 853, 281, 1401, 309, 13, 51774], "temperature": 0.0, "avg_logprob": -0.20159464297087296, "compression_ratio": 1.6604651162790698, "no_speech_prob": 0.11345703899860382}, {"id": 44, "seek": 21652, "start": 216.52, "end": 218.56, "text": " I will not even talk about that.", "tokens": [50364, 286, 486, 406, 754, 751, 466, 300, 13, 50466], "temperature": 0.0, "avg_logprob": -0.17546302197026273, "compression_ratio": 1.7822222222222222, "no_speech_prob": 0.03770578280091286}, {"id": 45, "seek": 21652, "start": 218.56, "end": 220.84, "text": " This is what you find in most courses.", "tokens": [50466, 639, 307, 437, 291, 915, 294, 881, 7712, 13, 50580], "temperature": 0.0, "avg_logprob": -0.17546302197026273, "compression_ratio": 1.7822222222222222, "no_speech_prob": 0.03770578280091286}, {"id": 46, "seek": 21652, "start": 220.84, "end": 226.36, "text": " This is what you find in the SQL standard but actually no database implements that.", "tokens": [50580, 639, 307, 437, 291, 915, 294, 264, 19200, 3832, 457, 767, 572, 8149, 704, 17988, 300, 13, 50856], "temperature": 0.0, "avg_logprob": -0.17546302197026273, "compression_ratio": 1.7822222222222222, "no_speech_prob": 0.03770578280091286}, {"id": 47, "seek": 21652, "start": 226.36, "end": 233.56, "text": " That was defined before any implementation and the modern databases do not work like", "tokens": [50856, 663, 390, 7642, 949, 604, 11420, 293, 264, 4363, 22380, 360, 406, 589, 411, 51216], "temperature": 0.0, "avg_logprob": -0.17546302197026273, "compression_ratio": 1.7822222222222222, "no_speech_prob": 0.03770578280091286}, {"id": 48, "seek": 21652, "start": 233.56, "end": 239.36, "text": " that and do not provide those isolation levels even if they put the name to match what is", "tokens": [51216, 300, 293, 360, 406, 2893, 729, 16001, 4358, 754, 498, 436, 829, 264, 1315, 281, 2995, 437, 307, 51506], "temperature": 0.0, "avg_logprob": -0.17546302197026273, "compression_ratio": 1.7822222222222222, "no_speech_prob": 0.03770578280091286}, {"id": 49, "seek": 21652, "start": 239.36, "end": 240.68, "text": " in the standard.", "tokens": [51506, 294, 264, 3832, 13, 51572], "temperature": 0.0, "avg_logprob": -0.17546302197026273, "compression_ratio": 1.7822222222222222, "no_speech_prob": 0.03770578280091286}, {"id": 50, "seek": 21652, "start": 240.68, "end": 242.32000000000002, "text": " They do not really do that.", "tokens": [51572, 814, 360, 406, 534, 360, 300, 13, 51654], "temperature": 0.0, "avg_logprob": -0.17546302197026273, "compression_ratio": 1.7822222222222222, "no_speech_prob": 0.03770578280091286}, {"id": 51, "seek": 21652, "start": 242.32000000000002, "end": 244.8, "text": " So let's forget about it.", "tokens": [51654, 407, 718, 311, 2870, 466, 309, 13, 51778], "temperature": 0.0, "avg_logprob": -0.17546302197026273, "compression_ratio": 1.7822222222222222, "no_speech_prob": 0.03770578280091286}, {"id": 52, "seek": 24480, "start": 244.8, "end": 248.48000000000002, "text": " If you want to read about it, there are plenty of sources.", "tokens": [50364, 759, 291, 528, 281, 1401, 466, 309, 11, 456, 366, 7140, 295, 7139, 13, 50548], "temperature": 0.0, "avg_logprob": -0.2191666322595933, "compression_ratio": 1.6330275229357798, "no_speech_prob": 0.010294854640960693}, {"id": 53, "seek": 24480, "start": 248.48000000000002, "end": 255.76000000000002, "text": " I would like more to explain how the real databases work and basically the isolation", "tokens": [50548, 286, 576, 411, 544, 281, 2903, 577, 264, 957, 22380, 589, 293, 1936, 264, 16001, 50912], "temperature": 0.0, "avg_logprob": -0.2191666322595933, "compression_ratio": 1.6330275229357798, "no_speech_prob": 0.010294854640960693}, {"id": 54, "seek": 24480, "start": 255.76000000000002, "end": 263.8, "text": " levels that you find in modern databases, you find so really simple that is very similar", "tokens": [50912, 4358, 300, 291, 915, 294, 4363, 22380, 11, 291, 915, 370, 534, 2199, 300, 307, 588, 2531, 51314], "temperature": 0.0, "avg_logprob": -0.2191666322595933, "compression_ratio": 1.6330275229357798, "no_speech_prob": 0.010294854640960693}, {"id": 55, "seek": 24480, "start": 263.8, "end": 268.44, "text": " to what is defined in the SQL standard but the others are based on snapshot isolation", "tokens": [51314, 281, 437, 307, 7642, 294, 264, 19200, 3832, 457, 264, 2357, 366, 2361, 322, 30163, 16001, 51546], "temperature": 0.0, "avg_logprob": -0.2191666322595933, "compression_ratio": 1.6330275229357798, "no_speech_prob": 0.010294854640960693}, {"id": 56, "seek": 24480, "start": 268.44, "end": 271.96000000000004, "text": " like the picture we have taken.", "tokens": [51546, 411, 264, 3036, 321, 362, 2726, 13, 51722], "temperature": 0.0, "avg_logprob": -0.2191666322595933, "compression_ratio": 1.6330275229357798, "no_speech_prob": 0.010294854640960693}, {"id": 57, "seek": 24480, "start": 271.96000000000004, "end": 272.96000000000004, "text": " Okay.", "tokens": [51722, 1033, 13, 51772], "temperature": 0.0, "avg_logprob": -0.2191666322595933, "compression_ratio": 1.6330275229357798, "no_speech_prob": 0.010294854640960693}, {"id": 58, "seek": 27296, "start": 273.08, "end": 280.76, "text": " So I'm really saying that there is the SQL standard on one side and there are the databases", "tokens": [50370, 407, 286, 478, 534, 1566, 300, 456, 307, 264, 19200, 3832, 322, 472, 1252, 293, 456, 366, 264, 22380, 50754], "temperature": 0.0, "avg_logprob": -0.16116709611853774, "compression_ratio": 1.8544600938967135, "no_speech_prob": 0.007364042568951845}, {"id": 59, "seek": 27296, "start": 280.76, "end": 285.15999999999997, "text": " that you use on the other side and there is a big difference.", "tokens": [50754, 300, 291, 764, 322, 264, 661, 1252, 293, 456, 307, 257, 955, 2649, 13, 50974], "temperature": 0.0, "avg_logprob": -0.16116709611853774, "compression_ratio": 1.8544600938967135, "no_speech_prob": 0.007364042568951845}, {"id": 60, "seek": 27296, "start": 285.15999999999997, "end": 291.47999999999996, "text": " For the SQL standard, when SQL standard was defined, the idea was that users do not have", "tokens": [50974, 1171, 264, 19200, 3832, 11, 562, 19200, 3832, 390, 7642, 11, 264, 1558, 390, 300, 5022, 360, 406, 362, 51290], "temperature": 0.0, "avg_logprob": -0.16116709611853774, "compression_ratio": 1.8544600938967135, "no_speech_prob": 0.007364042568951845}, {"id": 61, "seek": 27296, "start": 291.47999999999996, "end": 294.59999999999997, "text": " to care about the others in the database.", "tokens": [51290, 281, 1127, 466, 264, 2357, 294, 264, 8149, 13, 51446], "temperature": 0.0, "avg_logprob": -0.16116709611853774, "compression_ratio": 1.8544600938967135, "no_speech_prob": 0.007364042568951845}, {"id": 62, "seek": 27296, "start": 294.59999999999997, "end": 300.88, "text": " You just work, define your transactions, code your access to the database as if you are", "tokens": [51446, 509, 445, 589, 11, 6964, 428, 16856, 11, 3089, 428, 2105, 281, 264, 8149, 382, 498, 291, 366, 51760], "temperature": 0.0, "avg_logprob": -0.16116709611853774, "compression_ratio": 1.8544600938967135, "no_speech_prob": 0.007364042568951845}, {"id": 63, "seek": 27296, "start": 300.88, "end": 302.59999999999997, "text": " alone in the database.", "tokens": [51760, 3312, 294, 264, 8149, 13, 51846], "temperature": 0.0, "avg_logprob": -0.16116709611853774, "compression_ratio": 1.8544600938967135, "no_speech_prob": 0.007364042568951845}, {"id": 64, "seek": 30260, "start": 302.64000000000004, "end": 307.32000000000005, "text": " You do not have to look explicitly anything.", "tokens": [50366, 509, 360, 406, 362, 281, 574, 20803, 1340, 13, 50600], "temperature": 0.0, "avg_logprob": -0.21162910461425782, "compression_ratio": 1.6119402985074627, "no_speech_prob": 0.0030725733377039433}, {"id": 65, "seek": 30260, "start": 307.32000000000005, "end": 311.36, "text": " The database will do it for you.", "tokens": [50600, 440, 8149, 486, 360, 309, 337, 291, 13, 50802], "temperature": 0.0, "avg_logprob": -0.21162910461425782, "compression_ratio": 1.6119402985074627, "no_speech_prob": 0.0030725733377039433}, {"id": 66, "seek": 30260, "start": 311.36, "end": 318.84000000000003, "text": " So for the SQL standard, looks is something that can happen in the database but not visible", "tokens": [50802, 407, 337, 264, 19200, 3832, 11, 1542, 307, 746, 300, 393, 1051, 294, 264, 8149, 457, 406, 8974, 51176], "temperature": 0.0, "avg_logprob": -0.21162910461425782, "compression_ratio": 1.6119402985074627, "no_speech_prob": 0.0030725733377039433}, {"id": 67, "seek": 30260, "start": 318.84000000000003, "end": 321.0, "text": " to the user in the SQL standard.", "tokens": [51176, 281, 264, 4195, 294, 264, 19200, 3832, 13, 51284], "temperature": 0.0, "avg_logprob": -0.21162910461425782, "compression_ratio": 1.6119402985074627, "no_speech_prob": 0.0030725733377039433}, {"id": 68, "seek": 30260, "start": 321.0, "end": 324.56, "text": " There is no lock command for example.", "tokens": [51284, 821, 307, 572, 4017, 5622, 337, 1365, 13, 51462], "temperature": 0.0, "avg_logprob": -0.21162910461425782, "compression_ratio": 1.6119402985074627, "no_speech_prob": 0.0030725733377039433}, {"id": 69, "seek": 30260, "start": 324.56, "end": 332.44, "text": " But in real life, in the real databases that exist today, this is not how it works.", "tokens": [51462, 583, 294, 957, 993, 11, 294, 264, 957, 22380, 300, 2514, 965, 11, 341, 307, 406, 577, 309, 1985, 13, 51856], "temperature": 0.0, "avg_logprob": -0.21162910461425782, "compression_ratio": 1.6119402985074627, "no_speech_prob": 0.0030725733377039433}, {"id": 70, "seek": 33244, "start": 332.48, "end": 339.4, "text": " Most of databases are able to read from a past snapshot.", "tokens": [50366, 4534, 295, 22380, 366, 1075, 281, 1401, 490, 257, 1791, 30163, 13, 50712], "temperature": 0.0, "avg_logprob": -0.1680130185307683, "compression_ratio": 1.7814207650273224, "no_speech_prob": 0.00821568351238966}, {"id": 71, "seek": 33244, "start": 339.4, "end": 345.04, "text": " They record the changes and they are able to read from the past so that they don't have", "tokens": [50712, 814, 2136, 264, 2962, 293, 436, 366, 1075, 281, 1401, 490, 264, 1791, 370, 300, 436, 500, 380, 362, 50994], "temperature": 0.0, "avg_logprob": -0.1680130185307683, "compression_ratio": 1.7814207650273224, "no_speech_prob": 0.00821568351238966}, {"id": 72, "seek": 33244, "start": 345.04, "end": 354.04, "text": " to look too much and the developers can also choose to look themselves some information", "tokens": [50994, 281, 574, 886, 709, 293, 264, 8849, 393, 611, 2826, 281, 574, 2969, 512, 1589, 51444], "temperature": 0.0, "avg_logprob": -0.1680130185307683, "compression_ratio": 1.7814207650273224, "no_speech_prob": 0.00821568351238966}, {"id": 73, "seek": 33244, "start": 354.04, "end": 361.2, "text": " that they don't want to change, to be changed by other transactions during their transaction.", "tokens": [51444, 300, 436, 500, 380, 528, 281, 1319, 11, 281, 312, 3105, 538, 661, 16856, 1830, 641, 14425, 13, 51802], "temperature": 0.0, "avg_logprob": -0.1680130185307683, "compression_ratio": 1.7814207650273224, "no_speech_prob": 0.00821568351238966}, {"id": 74, "seek": 36120, "start": 361.24, "end": 363.68, "text": " That's typically the select for updates.", "tokens": [50366, 663, 311, 5850, 264, 3048, 337, 9205, 13, 50488], "temperature": 0.0, "avg_logprob": -0.21169722707648025, "compression_ratio": 1.505050505050505, "no_speech_prob": 0.012818807736039162}, {"id": 75, "seek": 36120, "start": 363.68, "end": 366.56, "text": " You will not find that in the SQL standard.", "tokens": [50488, 509, 486, 406, 915, 300, 294, 264, 19200, 3832, 13, 50632], "temperature": 0.0, "avg_logprob": -0.21169722707648025, "compression_ratio": 1.505050505050505, "no_speech_prob": 0.012818807736039162}, {"id": 76, "seek": 36120, "start": 366.56, "end": 372.44, "text": " You will find the syntax for select for updates but not to lock it.", "tokens": [50632, 509, 486, 915, 264, 28431, 337, 3048, 337, 9205, 457, 406, 281, 4017, 309, 13, 50926], "temperature": 0.0, "avg_logprob": -0.21169722707648025, "compression_ratio": 1.505050505050505, "no_speech_prob": 0.012818807736039162}, {"id": 77, "seek": 36120, "start": 372.44, "end": 381.64, "text": " So yeah, big mismatch between the theory and how databases work.", "tokens": [50926, 407, 1338, 11, 955, 23220, 852, 1296, 264, 5261, 293, 577, 22380, 589, 13, 51386], "temperature": 0.0, "avg_logprob": -0.21169722707648025, "compression_ratio": 1.505050505050505, "no_speech_prob": 0.012818807736039162}, {"id": 78, "seek": 36120, "start": 381.64, "end": 388.56, "text": " Before talking more about MVCC and defining it, I will introduce a few concepts.", "tokens": [51386, 4546, 1417, 544, 466, 17663, 11717, 293, 17827, 309, 11, 286, 486, 5366, 257, 1326, 10392, 13, 51732], "temperature": 0.0, "avg_logprob": -0.21169722707648025, "compression_ratio": 1.505050505050505, "no_speech_prob": 0.012818807736039162}, {"id": 79, "seek": 38856, "start": 388.56, "end": 393.04, "text": " My idea is that there are many databases and they have many versions.", "tokens": [50364, 1222, 1558, 307, 300, 456, 366, 867, 22380, 293, 436, 362, 867, 9606, 13, 50588], "temperature": 0.0, "avg_logprob": -0.16796746571858723, "compression_ratio": 1.5789473684210527, "no_speech_prob": 0.012587333098053932}, {"id": 80, "seek": 38856, "start": 393.04, "end": 398.84, "text": " You cannot learn, remember how everything works but if you have the basic concept then", "tokens": [50588, 509, 2644, 1466, 11, 1604, 577, 1203, 1985, 457, 498, 291, 362, 264, 3875, 3410, 550, 50878], "temperature": 0.0, "avg_logprob": -0.16796746571858723, "compression_ratio": 1.5789473684210527, "no_speech_prob": 0.012587333098053932}, {"id": 81, "seek": 38856, "start": 398.84, "end": 403.88, "text": " you can understand better how all those things are working.", "tokens": [50878, 291, 393, 1223, 1101, 577, 439, 729, 721, 366, 1364, 13, 51130], "temperature": 0.0, "avg_logprob": -0.16796746571858723, "compression_ratio": 1.5789473684210527, "no_speech_prob": 0.012587333098053932}, {"id": 82, "seek": 38856, "start": 403.88, "end": 409.6, "text": " So I will explain a bit more what is special about SQL transactions especially if you come", "tokens": [51130, 407, 286, 486, 2903, 257, 857, 544, 437, 307, 2121, 466, 19200, 16856, 2318, 498, 291, 808, 51416], "temperature": 0.0, "avg_logprob": -0.16796746571858723, "compression_ratio": 1.5789473684210527, "no_speech_prob": 0.012587333098053932}, {"id": 83, "seek": 38856, "start": 409.6, "end": 412.88, "text": " from no SQL databases.", "tokens": [51416, 490, 572, 19200, 22380, 13, 51580], "temperature": 0.0, "avg_logprob": -0.16796746571858723, "compression_ratio": 1.5789473684210527, "no_speech_prob": 0.012587333098053932}, {"id": 84, "seek": 41288, "start": 412.88, "end": 419.0, "text": " I will explain the reads and writes time in a transaction because transactions can be", "tokens": [50364, 286, 486, 2903, 264, 15700, 293, 13657, 565, 294, 257, 14425, 570, 16856, 393, 312, 50670], "temperature": 0.0, "avg_logprob": -0.35947777243221507, "compression_ratio": 1.6141304347826086, "no_speech_prob": 0.01560615561902523}, {"id": 85, "seek": 41288, "start": 419.0, "end": 426.96, "text": " long and we will see optimistic and payment-seemistic locking and maybe name them differently.", "tokens": [50670, 938, 293, 321, 486, 536, 19397, 293, 10224, 12, 405, 443, 3142, 23954, 293, 1310, 1315, 552, 7614, 13, 51068], "temperature": 0.0, "avg_logprob": -0.35947777243221507, "compression_ratio": 1.6141304347826086, "no_speech_prob": 0.01560615561902523}, {"id": 86, "seek": 41288, "start": 426.96, "end": 434.96, "text": " This explicit locking in SQL that is not in the standard but that you use in SQL applications.", "tokens": [51068, 639, 13691, 23954, 294, 19200, 300, 307, 406, 294, 264, 3832, 457, 300, 291, 764, 294, 19200, 5821, 13, 51468], "temperature": 0.0, "avg_logprob": -0.35947777243221507, "compression_ratio": 1.6141304347826086, "no_speech_prob": 0.01560615561902523}, {"id": 87, "seek": 41288, "start": 434.96, "end": 438.0, "text": " Any questions so far?", "tokens": [51468, 2639, 1651, 370, 1400, 30, 51620], "temperature": 0.0, "avg_logprob": -0.35947777243221507, "compression_ratio": 1.6141304347826086, "no_speech_prob": 0.01560615561902523}, {"id": 88, "seek": 43800, "start": 438.0, "end": 441.8, "text": " Okay, first, SQL transactions are complex.", "tokens": [50364, 1033, 11, 700, 11, 19200, 16856, 366, 3997, 13, 50554], "temperature": 0.0, "avg_logprob": -0.2793339093526204, "compression_ratio": 1.7528735632183907, "no_speech_prob": 0.014877166599035263}, {"id": 89, "seek": 43800, "start": 441.8, "end": 449.12, "text": " So if you work with SQL databases you probably know that if you work with no SQL databases", "tokens": [50554, 407, 498, 291, 589, 365, 19200, 22380, 291, 1391, 458, 300, 498, 291, 589, 365, 572, 19200, 22380, 50920], "temperature": 0.0, "avg_logprob": -0.2793339093526204, "compression_ratio": 1.7528735632183907, "no_speech_prob": 0.014877166599035263}, {"id": 90, "seek": 43800, "start": 449.12, "end": 454.0, "text": " and if you see the no SQL database vendors telling you that they have transaction, they", "tokens": [50920, 293, 498, 291, 536, 264, 572, 19200, 8149, 22056, 3585, 291, 300, 436, 362, 14425, 11, 436, 51164], "temperature": 0.0, "avg_logprob": -0.2793339093526204, "compression_ratio": 1.7528735632183907, "no_speech_prob": 0.014877166599035263}, {"id": 91, "seek": 43800, "start": 454.0, "end": 460.96, "text": " have AC properties, they may be, they are not talking about the same thing exactly.", "tokens": [51164, 362, 8157, 7221, 11, 436, 815, 312, 11, 436, 366, 406, 1417, 466, 264, 912, 551, 2293, 13, 51512], "temperature": 0.0, "avg_logprob": -0.2793339093526204, "compression_ratio": 1.7528735632183907, "no_speech_prob": 0.014877166599035263}, {"id": 92, "seek": 46096, "start": 460.96, "end": 468.59999999999997, "text": " SQL transactions are complex because they do many reads and writes during the transaction", "tokens": [50364, 19200, 16856, 366, 3997, 570, 436, 360, 867, 15700, 293, 13657, 1830, 264, 14425, 50746], "temperature": 0.0, "avg_logprob": -0.16836601893107098, "compression_ratio": 1.794871794871795, "no_speech_prob": 0.476188600063324}, {"id": 93, "seek": 46096, "start": 468.59999999999997, "end": 473.96, "text": " and the transaction can take a few milliseconds or seconds or even minutes.", "tokens": [50746, 293, 264, 14425, 393, 747, 257, 1326, 34184, 420, 3949, 420, 754, 2077, 13, 51014], "temperature": 0.0, "avg_logprob": -0.16836601893107098, "compression_ratio": 1.794871794871795, "no_speech_prob": 0.476188600063324}, {"id": 94, "seek": 46096, "start": 473.96, "end": 482.15999999999997, "text": " Many reads and writes and the complexity is that in a transaction usually the writes depend", "tokens": [51014, 5126, 15700, 293, 13657, 293, 264, 14024, 307, 300, 294, 257, 14425, 2673, 264, 13657, 5672, 51424], "temperature": 0.0, "avg_logprob": -0.16836601893107098, "compression_ratio": 1.794871794871795, "no_speech_prob": 0.476188600063324}, {"id": 95, "seek": 46096, "start": 482.15999999999997, "end": 484.44, "text": " on what you have read.", "tokens": [51424, 322, 437, 291, 362, 1401, 13, 51538], "temperature": 0.0, "avg_logprob": -0.16836601893107098, "compression_ratio": 1.794871794871795, "no_speech_prob": 0.476188600063324}, {"id": 96, "seek": 48444, "start": 484.44, "end": 494.04, "text": " Usually if you take a simple example you check in for a flight so you read to see the seats", "tokens": [50364, 11419, 498, 291, 747, 257, 2199, 1365, 291, 1520, 294, 337, 257, 7018, 370, 291, 1401, 281, 536, 264, 11069, 50844], "temperature": 0.0, "avg_logprob": -0.17764433634649848, "compression_ratio": 1.7476635514018692, "no_speech_prob": 0.2044609934091568}, {"id": 97, "seek": 48444, "start": 494.04, "end": 497.56, "text": " available and then you will pick one.", "tokens": [50844, 2435, 293, 550, 291, 486, 1888, 472, 13, 51020], "temperature": 0.0, "avg_logprob": -0.17764433634649848, "compression_ratio": 1.7476635514018692, "no_speech_prob": 0.2044609934091568}, {"id": 98, "seek": 48444, "start": 497.56, "end": 502.12, "text": " But your choice to pick one that is a write will depend on what you have read.", "tokens": [51020, 583, 428, 3922, 281, 1888, 472, 300, 307, 257, 2464, 486, 5672, 322, 437, 291, 362, 1401, 13, 51248], "temperature": 0.0, "avg_logprob": -0.17764433634649848, "compression_ratio": 1.7476635514018692, "no_speech_prob": 0.2044609934091568}, {"id": 99, "seek": 48444, "start": 502.12, "end": 505.44, "text": " You don't want to pick a seat that is not free.", "tokens": [51248, 509, 500, 380, 528, 281, 1888, 257, 6121, 300, 307, 406, 1737, 13, 51414], "temperature": 0.0, "avg_logprob": -0.17764433634649848, "compression_ratio": 1.7476635514018692, "no_speech_prob": 0.2044609934091568}, {"id": 100, "seek": 48444, "start": 505.44, "end": 511.44, "text": " And then the problem is that another transaction may have read the same map of the three seats", "tokens": [51414, 400, 550, 264, 1154, 307, 300, 1071, 14425, 815, 362, 1401, 264, 912, 4471, 295, 264, 1045, 11069, 51714], "temperature": 0.0, "avg_logprob": -0.17764433634649848, "compression_ratio": 1.7476635514018692, "no_speech_prob": 0.2044609934091568}, {"id": 101, "seek": 48444, "start": 511.44, "end": 512.92, "text": " and may pick the same.", "tokens": [51714, 293, 815, 1888, 264, 912, 13, 51788], "temperature": 0.0, "avg_logprob": -0.17764433634649848, "compression_ratio": 1.7476635514018692, "no_speech_prob": 0.2044609934091568}, {"id": 102, "seek": 51292, "start": 512.92, "end": 516.8, "text": " This is where we will have conflicts and we will see how it is solved.", "tokens": [50364, 639, 307, 689, 321, 486, 362, 19807, 293, 321, 486, 536, 577, 309, 307, 13041, 13, 50558], "temperature": 0.0, "avg_logprob": -0.15496982846941268, "compression_ratio": 1.6619718309859155, "no_speech_prob": 0.176324263215065}, {"id": 103, "seek": 51292, "start": 516.8, "end": 523.24, "text": " So SQL transactions are complex especially when you have a decision on what you have", "tokens": [50558, 407, 19200, 16856, 366, 3997, 2318, 562, 291, 362, 257, 3537, 322, 437, 291, 362, 50880], "temperature": 0.0, "avg_logprob": -0.15496982846941268, "compression_ratio": 1.6619718309859155, "no_speech_prob": 0.176324263215065}, {"id": 104, "seek": 51292, "start": 523.24, "end": 526.7199999999999, "text": " read that will determine what is done later.", "tokens": [50880, 1401, 300, 486, 6997, 437, 307, 1096, 1780, 13, 51054], "temperature": 0.0, "avg_logprob": -0.15496982846941268, "compression_ratio": 1.6619718309859155, "no_speech_prob": 0.176324263215065}, {"id": 105, "seek": 51292, "start": 526.7199999999999, "end": 532.5999999999999, "text": " And in SQL you do not declare everything that you will do.", "tokens": [51054, 400, 294, 19200, 291, 360, 406, 19710, 1203, 300, 291, 486, 360, 13, 51348], "temperature": 0.0, "avg_logprob": -0.15496982846941268, "compression_ratio": 1.6619718309859155, "no_speech_prob": 0.176324263215065}, {"id": 106, "seek": 51292, "start": 532.5999999999999, "end": 540.64, "text": " I can say begin transaction, read something, have a coffee, come back, write something because", "tokens": [51348, 286, 393, 584, 1841, 14425, 11, 1401, 746, 11, 362, 257, 4982, 11, 808, 646, 11, 2464, 746, 570, 51750], "temperature": 0.0, "avg_logprob": -0.15496982846941268, "compression_ratio": 1.6619718309859155, "no_speech_prob": 0.176324263215065}, {"id": 107, "seek": 54064, "start": 540.64, "end": 543.88, "text": " during the coffee I was thinking about what I will write.", "tokens": [50364, 1830, 264, 4982, 286, 390, 1953, 466, 437, 286, 486, 2464, 13, 50526], "temperature": 0.0, "avg_logprob": -0.2162851333618164, "compression_ratio": 1.4777777777777779, "no_speech_prob": 0.06998685002326965}, {"id": 108, "seek": 54064, "start": 543.88, "end": 550.4, "text": " That's very different from, for example, no SQL databases where each call you exactly", "tokens": [50526, 663, 311, 588, 819, 490, 11, 337, 1365, 11, 572, 19200, 22380, 689, 1184, 818, 291, 2293, 50852], "temperature": 0.0, "avg_logprob": -0.2162851333618164, "compression_ratio": 1.4777777777777779, "no_speech_prob": 0.06998685002326965}, {"id": 109, "seek": 54064, "start": 550.4, "end": 554.92, "text": " tell what you do, what the database has to do.", "tokens": [50852, 980, 437, 291, 360, 11, 437, 264, 8149, 575, 281, 360, 13, 51078], "temperature": 0.0, "avg_logprob": -0.2162851333618164, "compression_ratio": 1.4777777777777779, "no_speech_prob": 0.06998685002326965}, {"id": 110, "seek": 54064, "start": 554.92, "end": 561.92, "text": " Here you have a transaction with user, maybe user interaction between them.", "tokens": [51078, 1692, 291, 362, 257, 14425, 365, 4195, 11, 1310, 4195, 9285, 1296, 552, 13, 51428], "temperature": 0.0, "avg_logprob": -0.2162851333618164, "compression_ratio": 1.4777777777777779, "no_speech_prob": 0.06998685002326965}, {"id": 111, "seek": 56192, "start": 561.92, "end": 570.76, "text": " And even if you do a single row insert that looks like a simple write, so not this complex", "tokens": [50364, 400, 754, 498, 291, 360, 257, 2167, 5386, 8969, 300, 1542, 411, 257, 2199, 2464, 11, 370, 406, 341, 3997, 50806], "temperature": 0.0, "avg_logprob": -0.19942776362101236, "compression_ratio": 1.6166666666666667, "no_speech_prob": 0.28634122014045715}, {"id": 112, "seek": 56192, "start": 570.76, "end": 576.68, "text": " problem of reading, writing, actually on your table you may have foreign keys, you may have", "tokens": [50806, 1154, 295, 3760, 11, 3579, 11, 767, 322, 428, 3199, 291, 815, 362, 5329, 9317, 11, 291, 815, 362, 51102], "temperature": 0.0, "avg_logprob": -0.19942776362101236, "compression_ratio": 1.6166666666666667, "no_speech_prob": 0.28634122014045715}, {"id": 113, "seek": 56192, "start": 576.68, "end": 581.64, "text": " secondary indexes to update, you have a primary key.", "tokens": [51102, 11396, 8186, 279, 281, 5623, 11, 291, 362, 257, 6194, 2141, 13, 51350], "temperature": 0.0, "avg_logprob": -0.19942776362101236, "compression_ratio": 1.6166666666666667, "no_speech_prob": 0.28634122014045715}, {"id": 114, "seek": 56192, "start": 581.64, "end": 588.0799999999999, "text": " So even this simple statement has to read before write.", "tokens": [51350, 407, 754, 341, 2199, 5629, 575, 281, 1401, 949, 2464, 13, 51672], "temperature": 0.0, "avg_logprob": -0.19942776362101236, "compression_ratio": 1.6166666666666667, "no_speech_prob": 0.28634122014045715}, {"id": 115, "seek": 58808, "start": 588.08, "end": 591.0, "text": " You read, does the key already exist?", "tokens": [50364, 509, 1401, 11, 775, 264, 2141, 1217, 2514, 30, 50510], "temperature": 0.0, "avg_logprob": -0.2443316622478206, "compression_ratio": 1.6157635467980296, "no_speech_prob": 0.13598452508449554}, {"id": 116, "seek": 58808, "start": 591.0, "end": 593.84, "text": " If it exists already you have an exception.", "tokens": [50510, 759, 309, 8198, 1217, 291, 362, 364, 11183, 13, 50652], "temperature": 0.0, "avg_logprob": -0.2443316622478206, "compression_ratio": 1.6157635467980296, "no_speech_prob": 0.13598452508449554}, {"id": 117, "seek": 58808, "start": 593.84, "end": 596.36, "text": " If it doesn't exist then you can write.", "tokens": [50652, 759, 309, 1177, 380, 2514, 550, 291, 393, 2464, 13, 50778], "temperature": 0.0, "avg_logprob": -0.2443316622478206, "compression_ratio": 1.6157635467980296, "no_speech_prob": 0.13598452508449554}, {"id": 118, "seek": 58808, "start": 596.36, "end": 600.4000000000001, "text": " And when you write you write to secondary index, you check the foreign keys.", "tokens": [50778, 400, 562, 291, 2464, 291, 2464, 281, 11396, 8186, 11, 291, 1520, 264, 5329, 9317, 13, 50980], "temperature": 0.0, "avg_logprob": -0.2443316622478206, "compression_ratio": 1.6157635467980296, "no_speech_prob": 0.13598452508449554}, {"id": 119, "seek": 58808, "start": 600.4000000000001, "end": 605.84, "text": " So even something that is very simple from the developer point of view can be a complex", "tokens": [50980, 407, 754, 746, 300, 307, 588, 2199, 490, 264, 10754, 935, 295, 1910, 393, 312, 257, 3997, 51252], "temperature": 0.0, "avg_logprob": -0.2443316622478206, "compression_ratio": 1.6157635467980296, "no_speech_prob": 0.13598452508449554}, {"id": 120, "seek": 58808, "start": 605.84, "end": 612.76, "text": " transaction where write depends on reads.", "tokens": [51252, 14425, 689, 2464, 5946, 322, 15700, 13, 51598], "temperature": 0.0, "avg_logprob": -0.2443316622478206, "compression_ratio": 1.6157635467980296, "no_speech_prob": 0.13598452508449554}, {"id": 121, "seek": 61276, "start": 612.76, "end": 622.84, "text": " And as I mentioned, no SQL vendors now start to have some transactional behavior.", "tokens": [50364, 400, 382, 286, 2835, 11, 572, 19200, 22056, 586, 722, 281, 362, 512, 46688, 1966, 5223, 13, 50868], "temperature": 0.0, "avg_logprob": -0.19397275149822235, "compression_ratio": 1.4565217391304348, "no_speech_prob": 0.2559932768344879}, {"id": 122, "seek": 61276, "start": 622.84, "end": 632.56, "text": " But when they call that ACID like the SQL properties, it's not about those complex transactions.", "tokens": [50868, 583, 562, 436, 818, 300, 8157, 2777, 411, 264, 19200, 7221, 11, 309, 311, 406, 466, 729, 3997, 16856, 13, 51354], "temperature": 0.0, "avg_logprob": -0.19397275149822235, "compression_ratio": 1.4565217391304348, "no_speech_prob": 0.2559932768344879}, {"id": 123, "seek": 61276, "start": 632.56, "end": 638.96, "text": " For example, in no SQL databases you just have single calls you put or you get something.", "tokens": [51354, 1171, 1365, 11, 294, 572, 19200, 22380, 291, 445, 362, 2167, 5498, 291, 829, 420, 291, 483, 746, 13, 51674], "temperature": 0.0, "avg_logprob": -0.19397275149822235, "compression_ratio": 1.4565217391304348, "no_speech_prob": 0.2559932768344879}, {"id": 124, "seek": 63896, "start": 638.96, "end": 643.6, "text": " Many no SQL databases do not try to be consistent.", "tokens": [50364, 5126, 572, 19200, 22380, 360, 406, 853, 281, 312, 8398, 13, 50596], "temperature": 0.0, "avg_logprob": -0.1976754115178035, "compression_ratio": 1.5660377358490567, "no_speech_prob": 0.15072771906852722}, {"id": 125, "seek": 63896, "start": 643.6, "end": 647.4000000000001, "text": " They have individual consistency when updating the secondary index.", "tokens": [50596, 814, 362, 2609, 14416, 562, 25113, 264, 11396, 8186, 13, 50786], "temperature": 0.0, "avg_logprob": -0.1976754115178035, "compression_ratio": 1.5660377358490567, "no_speech_prob": 0.15072771906852722}, {"id": 126, "seek": 63896, "start": 647.4000000000001, "end": 651.12, "text": " They don't have unique keys, etc.", "tokens": [50786, 814, 500, 380, 362, 3845, 9317, 11, 5183, 13, 50972], "temperature": 0.0, "avg_logprob": -0.1976754115178035, "compression_ratio": 1.5660377358490567, "no_speech_prob": 0.15072771906852722}, {"id": 127, "seek": 63896, "start": 651.12, "end": 662.88, "text": " So that was what is more complex with SQL and why it's not so easy to implement a database.", "tokens": [50972, 407, 300, 390, 437, 307, 544, 3997, 365, 19200, 293, 983, 309, 311, 406, 370, 1858, 281, 4445, 257, 8149, 13, 51560], "temperature": 0.0, "avg_logprob": -0.1976754115178035, "compression_ratio": 1.5660377358490567, "no_speech_prob": 0.15072771906852722}, {"id": 128, "seek": 63896, "start": 662.88, "end": 668.1600000000001, "text": " And then during this transaction where you have reads and writes they cannot all happen", "tokens": [51560, 400, 550, 1830, 341, 14425, 689, 291, 362, 15700, 293, 13657, 436, 2644, 439, 1051, 51824], "temperature": 0.0, "avg_logprob": -0.1976754115178035, "compression_ratio": 1.5660377358490567, "no_speech_prob": 0.15072771906852722}, {"id": 129, "seek": 66816, "start": 668.16, "end": 673.88, "text": " at the same time because it's different place on disk, it's different CPU instructions.", "tokens": [50364, 412, 264, 912, 565, 570, 309, 311, 819, 1081, 322, 12355, 11, 309, 311, 819, 13199, 9415, 13, 50650], "temperature": 0.0, "avg_logprob": -0.21489166867905768, "compression_ratio": 1.5621621621621622, "no_speech_prob": 0.023988284170627594}, {"id": 130, "seek": 66816, "start": 673.88, "end": 684.4, "text": " So the problem is that the reads and writes happen at different time during your transaction.", "tokens": [50650, 407, 264, 1154, 307, 300, 264, 15700, 293, 13657, 1051, 412, 819, 565, 1830, 428, 14425, 13, 51176], "temperature": 0.0, "avg_logprob": -0.21489166867905768, "compression_ratio": 1.5621621621621622, "no_speech_prob": 0.023988284170627594}, {"id": 131, "seek": 66816, "start": 684.4, "end": 686.28, "text": " Cannot be atomic.", "tokens": [51176, 29866, 310, 312, 22275, 13, 51270], "temperature": 0.0, "avg_logprob": -0.21489166867905768, "compression_ratio": 1.5621621621621622, "no_speech_prob": 0.023988284170627594}, {"id": 132, "seek": 66816, "start": 686.28, "end": 695.8, "text": " But for the application it has to look like it is at atomic all happening at commit time.", "tokens": [51270, 583, 337, 264, 3861, 309, 575, 281, 574, 411, 309, 307, 412, 22275, 439, 2737, 412, 5599, 565, 13, 51746], "temperature": 0.0, "avg_logprob": -0.21489166867905768, "compression_ratio": 1.5621621621621622, "no_speech_prob": 0.023988284170627594}, {"id": 133, "seek": 69580, "start": 695.8, "end": 702.12, "text": " And so it happens at different time then on different states of the database and then", "tokens": [50364, 400, 370, 309, 2314, 412, 819, 565, 550, 322, 819, 4368, 295, 264, 8149, 293, 550, 50680], "temperature": 0.0, "avg_logprob": -0.21877354751398534, "compression_ratio": 1.839572192513369, "no_speech_prob": 0.1319434493780136}, {"id": 134, "seek": 69580, "start": 702.12, "end": 704.0799999999999, "text": " the consistency is difficult.", "tokens": [50680, 264, 14416, 307, 2252, 13, 50778], "temperature": 0.0, "avg_logprob": -0.21877354751398534, "compression_ratio": 1.839572192513369, "no_speech_prob": 0.1319434493780136}, {"id": 135, "seek": 69580, "start": 704.0799999999999, "end": 711.16, "text": " So how databases can try to reduce the number of different states where it reads and writes.", "tokens": [50778, 407, 577, 22380, 393, 853, 281, 5407, 264, 1230, 295, 819, 4368, 689, 309, 15700, 293, 13657, 13, 51132], "temperature": 0.0, "avg_logprob": -0.21877354751398534, "compression_ratio": 1.839572192513369, "no_speech_prob": 0.1319434493780136}, {"id": 136, "seek": 69580, "start": 711.16, "end": 718.04, "text": " You can read from the past if you recorded all changes like in a movie.", "tokens": [51132, 509, 393, 1401, 490, 264, 1791, 498, 291, 8287, 439, 2962, 411, 294, 257, 3169, 13, 51476], "temperature": 0.0, "avg_logprob": -0.21877354751398534, "compression_ratio": 1.839572192513369, "no_speech_prob": 0.1319434493780136}, {"id": 137, "seek": 69580, "start": 718.04, "end": 723.4799999999999, "text": " You can read from the past but you cannot read from the future.", "tokens": [51476, 509, 393, 1401, 490, 264, 1791, 457, 291, 2644, 1401, 490, 264, 2027, 13, 51748], "temperature": 0.0, "avg_logprob": -0.21877354751398534, "compression_ratio": 1.839572192513369, "no_speech_prob": 0.1319434493780136}, {"id": 138, "seek": 72348, "start": 723.9200000000001, "end": 728.24, "text": " Obviously you don't know what the others will do.", "tokens": [50386, 7580, 291, 500, 380, 458, 437, 264, 2357, 486, 360, 13, 50602], "temperature": 0.0, "avg_logprob": -0.22145166068241515, "compression_ratio": 1.646788990825688, "no_speech_prob": 0.03232261538505554}, {"id": 139, "seek": 72348, "start": 728.24, "end": 734.96, "text": " Except if there is no modification for example if you look everything that you read you can", "tokens": [50602, 16192, 498, 456, 307, 572, 26747, 337, 1365, 498, 291, 574, 1203, 300, 291, 1401, 291, 393, 50938], "temperature": 0.0, "avg_logprob": -0.22145166068241515, "compression_ratio": 1.646788990825688, "no_speech_prob": 0.03232261538505554}, {"id": 140, "seek": 72348, "start": 734.96, "end": 739.24, "text": " read from the future because you know that the future state is exactly the same as the", "tokens": [50938, 1401, 490, 264, 2027, 570, 291, 458, 300, 264, 2027, 1785, 307, 2293, 264, 912, 382, 264, 51152], "temperature": 0.0, "avg_logprob": -0.22145166068241515, "compression_ratio": 1.646788990825688, "no_speech_prob": 0.03232261538505554}, {"id": 141, "seek": 72348, "start": 739.24, "end": 741.76, "text": " current one.", "tokens": [51152, 2190, 472, 13, 51278], "temperature": 0.0, "avg_logprob": -0.22145166068241515, "compression_ratio": 1.646788990825688, "no_speech_prob": 0.03232261538505554}, {"id": 142, "seek": 72348, "start": 741.76, "end": 744.32, "text": " For writes it's the opposite.", "tokens": [51278, 1171, 13657, 309, 311, 264, 6182, 13, 51406], "temperature": 0.0, "avg_logprob": -0.22145166068241515, "compression_ratio": 1.646788990825688, "no_speech_prob": 0.03232261538505554}, {"id": 143, "seek": 72348, "start": 744.32, "end": 750.5600000000001, "text": " You cannot write to the past when you see movies where people go to the past and change", "tokens": [51406, 509, 2644, 2464, 281, 264, 1791, 562, 291, 536, 6233, 689, 561, 352, 281, 264, 1791, 293, 1319, 51718], "temperature": 0.0, "avg_logprob": -0.22145166068241515, "compression_ratio": 1.646788990825688, "no_speech_prob": 0.03232261538505554}, {"id": 144, "seek": 75056, "start": 750.56, "end": 754.4799999999999, "text": " something it's really consistent at the end.", "tokens": [50364, 746, 309, 311, 534, 8398, 412, 264, 917, 13, 50560], "temperature": 0.0, "avg_logprob": -0.17463355594211155, "compression_ratio": 1.586021505376344, "no_speech_prob": 0.007290780544281006}, {"id": 145, "seek": 75056, "start": 754.4799999999999, "end": 761.7199999999999, "text": " But again you can be sure that there are no modifications.", "tokens": [50560, 583, 797, 291, 393, 312, 988, 300, 456, 366, 572, 26881, 13, 50922], "temperature": 0.0, "avg_logprob": -0.17463355594211155, "compression_ratio": 1.586021505376344, "no_speech_prob": 0.007290780544281006}, {"id": 146, "seek": 75056, "start": 761.7199999999999, "end": 767.9599999999999, "text": " You look everything that you write and then where you write is the same state as at the", "tokens": [50922, 509, 574, 1203, 300, 291, 2464, 293, 550, 689, 291, 2464, 307, 264, 912, 1785, 382, 412, 264, 51234], "temperature": 0.0, "avg_logprob": -0.17463355594211155, "compression_ratio": 1.586021505376344, "no_speech_prob": 0.007290780544281006}, {"id": 147, "seek": 75056, "start": 767.9599999999999, "end": 770.1199999999999, "text": " end.", "tokens": [51234, 917, 13, 51342], "temperature": 0.0, "avg_logprob": -0.17463355594211155, "compression_ratio": 1.586021505376344, "no_speech_prob": 0.007290780544281006}, {"id": 148, "seek": 75056, "start": 770.1199999999999, "end": 779.68, "text": " So if I have a timeline between my begin transaction and commit I read and write at multiple times", "tokens": [51342, 407, 498, 286, 362, 257, 12933, 1296, 452, 1841, 14425, 293, 5599, 286, 1401, 293, 2464, 412, 3866, 1413, 51820], "temperature": 0.0, "avg_logprob": -0.17463355594211155, "compression_ratio": 1.586021505376344, "no_speech_prob": 0.007290780544281006}, {"id": 149, "seek": 77968, "start": 779.68, "end": 787.56, "text": " I can read and see as of the time of the start of my transaction for example.", "tokens": [50364, 286, 393, 1401, 293, 536, 382, 295, 264, 565, 295, 264, 722, 295, 452, 14425, 337, 1365, 13, 50758], "temperature": 0.0, "avg_logprob": -0.16931818693112105, "compression_ratio": 1.6307692307692307, "no_speech_prob": 0.01251608319580555}, {"id": 150, "seek": 77968, "start": 787.56, "end": 796.4, "text": " And I can read and write and at commit time come back to set the right time stamp as the", "tokens": [50758, 400, 286, 393, 1401, 293, 2464, 293, 412, 5599, 565, 808, 646, 281, 992, 264, 558, 565, 9921, 382, 264, 51200], "temperature": 0.0, "avg_logprob": -0.16931818693112105, "compression_ratio": 1.6307692307692307, "no_speech_prob": 0.01251608319580555}, {"id": 151, "seek": 77968, "start": 796.4, "end": 800.4799999999999, "text": " commit time because this is where everything is visible.", "tokens": [51200, 5599, 565, 570, 341, 307, 689, 1203, 307, 8974, 13, 51404], "temperature": 0.0, "avg_logprob": -0.16931818693112105, "compression_ratio": 1.6307692307692307, "no_speech_prob": 0.01251608319580555}, {"id": 152, "seek": 77968, "start": 800.4799999999999, "end": 809.64, "text": " So we'll see that in NVCC databases you read from a state at the beginning of your transaction", "tokens": [51404, 407, 321, 603, 536, 300, 294, 46512, 11717, 22380, 291, 1401, 490, 257, 1785, 412, 264, 2863, 295, 428, 14425, 51862], "temperature": 0.0, "avg_logprob": -0.16931818693112105, "compression_ratio": 1.6307692307692307, "no_speech_prob": 0.01251608319580555}, {"id": 153, "seek": 80964, "start": 809.64, "end": 814.56, "text": " and you write as of the commit time.", "tokens": [50364, 293, 291, 2464, 382, 295, 264, 5599, 565, 13, 50610], "temperature": 0.0, "avg_logprob": -0.1898941993713379, "compression_ratio": 1.4876543209876543, "no_speech_prob": 0.029329245910048485}, {"id": 154, "seek": 80964, "start": 814.56, "end": 820.72, "text": " That's the magic of databases to be able to do something that looks like happening at", "tokens": [50610, 663, 311, 264, 5585, 295, 22380, 281, 312, 1075, 281, 360, 746, 300, 1542, 411, 2737, 412, 50918], "temperature": 0.0, "avg_logprob": -0.1898941993713379, "compression_ratio": 1.4876543209876543, "no_speech_prob": 0.029329245910048485}, {"id": 155, "seek": 80964, "start": 820.72, "end": 825.6, "text": " the same time even if it's not possible physically.", "tokens": [50918, 264, 912, 565, 754, 498, 309, 311, 406, 1944, 9762, 13, 51162], "temperature": 0.0, "avg_logprob": -0.1898941993713379, "compression_ratio": 1.4876543209876543, "no_speech_prob": 0.029329245910048485}, {"id": 156, "seek": 80964, "start": 825.6, "end": 834.68, "text": " So to do that in NVCC databases the writes take an exclusive look.", "tokens": [51162, 407, 281, 360, 300, 294, 46512, 11717, 22380, 264, 13657, 747, 364, 13005, 574, 13, 51616], "temperature": 0.0, "avg_logprob": -0.1898941993713379, "compression_ratio": 1.4876543209876543, "no_speech_prob": 0.029329245910048485}, {"id": 157, "seek": 83468, "start": 834.68, "end": 841.68, "text": " In NVCC is about reading from the past the write you cannot do anything else than looking", "tokens": [50364, 682, 46512, 11717, 307, 466, 3760, 490, 264, 1791, 264, 2464, 291, 2644, 360, 1340, 1646, 813, 1237, 50714], "temperature": 0.0, "avg_logprob": -0.18286749657164228, "compression_ratio": 1.8138528138528138, "no_speech_prob": 0.5582578182220459}, {"id": 158, "seek": 83468, "start": 841.68, "end": 847.64, "text": " what you write to be sure that it doesn't change until the end of the transaction.", "tokens": [50714, 437, 291, 2464, 281, 312, 988, 300, 309, 1177, 380, 1319, 1826, 264, 917, 295, 264, 14425, 13, 51012], "temperature": 0.0, "avg_logprob": -0.18286749657164228, "compression_ratio": 1.8138528138528138, "no_speech_prob": 0.5582578182220459}, {"id": 159, "seek": 83468, "start": 847.64, "end": 853.68, "text": " To read you can read from the past and then instead of multiple different states of the", "tokens": [51012, 1407, 1401, 291, 393, 1401, 490, 264, 1791, 293, 550, 2602, 295, 3866, 819, 4368, 295, 264, 51314], "temperature": 0.0, "avg_logprob": -0.18286749657164228, "compression_ratio": 1.8138528138528138, "no_speech_prob": 0.5582578182220459}, {"id": 160, "seek": 83468, "start": 853.68, "end": 858.64, "text": " database you have only two states the read state and the write state.", "tokens": [51314, 8149, 291, 362, 787, 732, 4368, 264, 1401, 1785, 293, 264, 2464, 1785, 13, 51562], "temperature": 0.0, "avg_logprob": -0.18286749657164228, "compression_ratio": 1.8138528138528138, "no_speech_prob": 0.5582578182220459}, {"id": 161, "seek": 83468, "start": 858.64, "end": 864.16, "text": " But then you need some additional logic in the database that compares those states check", "tokens": [51562, 583, 550, 291, 643, 512, 4497, 9952, 294, 264, 8149, 300, 38334, 729, 4368, 1520, 51838], "temperature": 0.0, "avg_logprob": -0.18286749657164228, "compression_ratio": 1.8138528138528138, "no_speech_prob": 0.5582578182220459}, {"id": 162, "seek": 86416, "start": 864.16, "end": 866.8, "text": " if they are compatible.", "tokens": [50364, 498, 436, 366, 18218, 13, 50496], "temperature": 0.0, "avg_logprob": -0.1851172637939453, "compression_ratio": 1.766839378238342, "no_speech_prob": 0.057309895753860474}, {"id": 163, "seek": 86416, "start": 866.8, "end": 874.4399999999999, "text": " If something has changed in between it may have to raise an error to tell you okay you", "tokens": [50496, 759, 746, 575, 3105, 294, 1296, 309, 815, 362, 281, 5300, 364, 6713, 281, 980, 291, 1392, 291, 50878], "temperature": 0.0, "avg_logprob": -0.1851172637939453, "compression_ratio": 1.766839378238342, "no_speech_prob": 0.057309895753860474}, {"id": 164, "seek": 86416, "start": 874.4399999999999, "end": 880.4, "text": " have read from this state you have written on this state but they are not compatible", "tokens": [50878, 362, 1401, 490, 341, 1785, 291, 362, 3720, 322, 341, 1785, 457, 436, 366, 406, 18218, 51176], "temperature": 0.0, "avg_logprob": -0.1851172637939453, "compression_ratio": 1.766839378238342, "no_speech_prob": 0.057309895753860474}, {"id": 165, "seek": 86416, "start": 880.4, "end": 885.8, "text": " because someone changed something in the state in between.", "tokens": [51176, 570, 1580, 3105, 746, 294, 264, 1785, 294, 1296, 13, 51446], "temperature": 0.0, "avg_logprob": -0.1851172637939453, "compression_ratio": 1.766839378238342, "no_speech_prob": 0.057309895753860474}, {"id": 166, "seek": 86416, "start": 885.8, "end": 892.16, "text": " Another concept optimistic and pessimistic looking and so those are general names that", "tokens": [51446, 3996, 3410, 19397, 293, 37399, 3142, 1237, 293, 370, 729, 366, 2674, 5288, 300, 51764], "temperature": 0.0, "avg_logprob": -0.1851172637939453, "compression_ratio": 1.766839378238342, "no_speech_prob": 0.057309895753860474}, {"id": 167, "seek": 89216, "start": 892.16, "end": 894.04, "text": " are used at many levels.", "tokens": [50364, 366, 1143, 412, 867, 4358, 13, 50458], "temperature": 0.0, "avg_logprob": -0.23571672110721983, "compression_ratio": 1.7463414634146341, "no_speech_prob": 0.08964840322732925}, {"id": 168, "seek": 89216, "start": 894.04, "end": 899.88, "text": " At low level in the implementation but also from the application you can the idea is", "tokens": [50458, 1711, 2295, 1496, 294, 264, 11420, 457, 611, 490, 264, 3861, 291, 393, 264, 1558, 307, 50750], "temperature": 0.0, "avg_logprob": -0.23571672110721983, "compression_ratio": 1.7463414634146341, "no_speech_prob": 0.08964840322732925}, {"id": 169, "seek": 89216, "start": 899.88, "end": 906.68, "text": " that optimistic looking you think you will not have any conflicts or you do not do additional", "tokens": [50750, 300, 19397, 1237, 291, 519, 291, 486, 406, 362, 604, 19807, 420, 291, 360, 406, 360, 4497, 51090], "temperature": 0.0, "avg_logprob": -0.23571672110721983, "compression_ratio": 1.7463414634146341, "no_speech_prob": 0.08964840322732925}, {"id": 170, "seek": 89216, "start": 906.68, "end": 911.48, "text": " things for that you will just raise an error and retry if it happens.", "tokens": [51090, 721, 337, 300, 291, 486, 445, 5300, 364, 6713, 293, 1533, 627, 498, 309, 2314, 13, 51330], "temperature": 0.0, "avg_logprob": -0.23571672110721983, "compression_ratio": 1.7463414634146341, "no_speech_prob": 0.08964840322732925}, {"id": 171, "seek": 89216, "start": 911.48, "end": 917.92, "text": " Pessimistic looking you expect that you will be in conflict and then you wait on it.", "tokens": [51330, 430, 442, 332, 3142, 1237, 291, 2066, 300, 291, 486, 312, 294, 6596, 293, 550, 291, 1699, 322, 309, 13, 51652], "temperature": 0.0, "avg_logprob": -0.23571672110721983, "compression_ratio": 1.7463414634146341, "no_speech_prob": 0.08964840322732925}, {"id": 172, "seek": 91792, "start": 917.92, "end": 921.88, "text": " But those terms are a bit misleading.", "tokens": [50364, 583, 729, 2115, 366, 257, 857, 36429, 13, 50562], "temperature": 0.0, "avg_logprob": -0.30756025111421625, "compression_ratio": 1.644736842105263, "no_speech_prob": 0.3571060597896576}, {"id": 173, "seek": 91792, "start": 921.88, "end": 927.4, "text": " Those are terms for example in new Gabbai when we did the documentation we used other", "tokens": [50562, 3950, 366, 2115, 337, 1365, 294, 777, 460, 10797, 1301, 562, 321, 630, 264, 14333, 321, 1143, 661, 50838], "temperature": 0.0, "avg_logprob": -0.30756025111421625, "compression_ratio": 1.644736842105263, "no_speech_prob": 0.3571060597896576}, {"id": 174, "seek": 91792, "start": 927.4, "end": 930.76, "text": " terms like wait on conflict.", "tokens": [50838, 2115, 411, 1699, 322, 6596, 13, 51006], "temperature": 0.0, "avg_logprob": -0.30756025111421625, "compression_ratio": 1.644736842105263, "no_speech_prob": 0.3571060597896576}, {"id": 175, "seek": 91792, "start": 930.76, "end": 933.0, "text": " So this is really the behavior.", "tokens": [51006, 407, 341, 307, 534, 264, 5223, 13, 51118], "temperature": 0.0, "avg_logprob": -0.30756025111421625, "compression_ratio": 1.644736842105263, "no_speech_prob": 0.3571060597896576}, {"id": 176, "seek": 91792, "start": 933.0, "end": 937.88, "text": " A conflict is detected for example you want to take an exclusive lock someone else has", "tokens": [51118, 316, 6596, 307, 21896, 337, 1365, 291, 528, 281, 747, 364, 13005, 4017, 1580, 1646, 575, 51362], "temperature": 0.0, "avg_logprob": -0.30756025111421625, "compression_ratio": 1.644736842105263, "no_speech_prob": 0.3571060597896576}, {"id": 177, "seek": 91792, "start": 937.88, "end": 940.8399999999999, "text": " locked the row.", "tokens": [51362, 9376, 264, 5386, 13, 51510], "temperature": 0.0, "avg_logprob": -0.30756025111421625, "compression_ratio": 1.644736842105263, "no_speech_prob": 0.3571060597896576}, {"id": 178, "seek": 91792, "start": 940.8399999999999, "end": 947.48, "text": " You just wait that they are finished so that you can continue so there is an thank you.", "tokens": [51510, 509, 445, 1699, 300, 436, 366, 4335, 370, 300, 291, 393, 2354, 370, 456, 307, 364, 1309, 291, 13, 51842], "temperature": 0.0, "avg_logprob": -0.30756025111421625, "compression_ratio": 1.644736842105263, "no_speech_prob": 0.3571060597896576}, {"id": 179, "seek": 94748, "start": 948.24, "end": 956.52, "text": " So you wait for you detect the conflict on the row for example but you wait for transaction.", "tokens": [50402, 407, 291, 1699, 337, 291, 5531, 264, 6596, 322, 264, 5386, 337, 1365, 457, 291, 1699, 337, 14425, 13, 50816], "temperature": 0.0, "avg_logprob": -0.22195588458668103, "compression_ratio": 1.9141414141414141, "no_speech_prob": 0.004025521222501993}, {"id": 180, "seek": 94748, "start": 956.52, "end": 962.44, "text": " Another one is fail on conflict just you detect a conflict you don't wait you just raise an", "tokens": [50816, 3996, 472, 307, 3061, 322, 6596, 445, 291, 5531, 257, 6596, 291, 500, 380, 1699, 291, 445, 5300, 364, 51112], "temperature": 0.0, "avg_logprob": -0.22195588458668103, "compression_ratio": 1.9141414141414141, "no_speech_prob": 0.004025521222501993}, {"id": 181, "seek": 94748, "start": 962.44, "end": 968.12, "text": " error to the application and then the application can retry later with the hope that the conflict", "tokens": [51112, 6713, 281, 264, 3861, 293, 550, 264, 3861, 393, 1533, 627, 1780, 365, 264, 1454, 300, 264, 6596, 51396], "temperature": 0.0, "avg_logprob": -0.22195588458668103, "compression_ratio": 1.9141414141414141, "no_speech_prob": 0.004025521222501993}, {"id": 182, "seek": 94748, "start": 968.12, "end": 972.0, "text": " is gone.", "tokens": [51396, 307, 2780, 13, 51590], "temperature": 0.0, "avg_logprob": -0.22195588458668103, "compression_ratio": 1.9141414141414141, "no_speech_prob": 0.004025521222501993}, {"id": 183, "seek": 94748, "start": 972.0, "end": 976.2, "text": " But there is another one and that's also why optimistic and pessimistic looking are not", "tokens": [51590, 583, 456, 307, 1071, 472, 293, 300, 311, 611, 983, 19397, 293, 37399, 3142, 1237, 366, 406, 51800], "temperature": 0.0, "avg_logprob": -0.22195588458668103, "compression_ratio": 1.9141414141414141, "no_speech_prob": 0.004025521222501993}, {"id": 184, "seek": 97620, "start": 976.24, "end": 978.88, "text": " really useful.", "tokens": [50366, 534, 4420, 13, 50498], "temperature": 0.0, "avg_logprob": -0.1930893672985977, "compression_ratio": 1.6618357487922706, "no_speech_prob": 0.025562111288309097}, {"id": 185, "seek": 97620, "start": 978.88, "end": 983.96, "text": " There is another case where you may want to skip on conflict.", "tokens": [50498, 821, 307, 1071, 1389, 689, 291, 815, 528, 281, 10023, 322, 6596, 13, 50752], "temperature": 0.0, "avg_logprob": -0.1930893672985977, "compression_ratio": 1.6618357487922706, "no_speech_prob": 0.025562111288309097}, {"id": 186, "seek": 97620, "start": 983.96, "end": 991.2, "text": " For example you want to read and lock a row that is locked by another transaction.", "tokens": [50752, 1171, 1365, 291, 528, 281, 1401, 293, 4017, 257, 5386, 300, 307, 9376, 538, 1071, 14425, 13, 51114], "temperature": 0.0, "avg_logprob": -0.1930893672985977, "compression_ratio": 1.6618357487922706, "no_speech_prob": 0.025562111288309097}, {"id": 187, "seek": 97620, "start": 991.2, "end": 992.76, "text": " You don't want to wait for it.", "tokens": [51114, 509, 500, 380, 528, 281, 1699, 337, 309, 13, 51192], "temperature": 0.0, "avg_logprob": -0.1930893672985977, "compression_ratio": 1.6618357487922706, "no_speech_prob": 0.025562111288309097}, {"id": 188, "seek": 97620, "start": 992.76, "end": 997.12, "text": " You don't want to raise an error you will just ignore this row.", "tokens": [51192, 509, 500, 380, 528, 281, 5300, 364, 6713, 291, 486, 445, 11200, 341, 5386, 13, 51410], "temperature": 0.0, "avg_logprob": -0.1930893672985977, "compression_ratio": 1.6618357487922706, "no_speech_prob": 0.025562111288309097}, {"id": 189, "seek": 97620, "start": 997.12, "end": 1002.2, "text": " This again of course locks are not in SQL standard but this cannot be in the SQL standard", "tokens": [51410, 639, 797, 295, 1164, 20703, 366, 406, 294, 19200, 3832, 457, 341, 2644, 312, 294, 264, 19200, 3832, 51664], "temperature": 0.0, "avg_logprob": -0.1930893672985977, "compression_ratio": 1.6618357487922706, "no_speech_prob": 0.025562111288309097}, {"id": 190, "seek": 100220, "start": 1002.24, "end": 1007.48, "text": " because it's not very deterministic but this is used a lot for queues for example if you", "tokens": [50366, 570, 309, 311, 406, 588, 15957, 3142, 457, 341, 307, 1143, 257, 688, 337, 631, 1247, 337, 1365, 498, 291, 50628], "temperature": 0.0, "avg_logprob": -0.2049429100680064, "compression_ratio": 1.6700507614213198, "no_speech_prob": 0.02038569189608097}, {"id": 191, "seek": 100220, "start": 1007.48, "end": 1013.08, "text": " want to dequeue events that are in a table you want to lock them when you process them", "tokens": [50628, 528, 281, 368, 1077, 622, 3931, 300, 366, 294, 257, 3199, 291, 528, 281, 4017, 552, 562, 291, 1399, 552, 50908], "temperature": 0.0, "avg_logprob": -0.2049429100680064, "compression_ratio": 1.6700507614213198, "no_speech_prob": 0.02038569189608097}, {"id": 192, "seek": 100220, "start": 1013.08, "end": 1018.5200000000001, "text": " but if someone else is processing a row you just want to process the next one.", "tokens": [50908, 457, 498, 1580, 1646, 307, 9007, 257, 5386, 291, 445, 528, 281, 1399, 264, 958, 472, 13, 51180], "temperature": 0.0, "avg_logprob": -0.2049429100680064, "compression_ratio": 1.6700507614213198, "no_speech_prob": 0.02038569189608097}, {"id": 193, "seek": 100220, "start": 1018.5200000000001, "end": 1025.92, "text": " Typically we will see that it's the case of select for update skip locked.", "tokens": [51180, 23129, 321, 486, 536, 300, 309, 311, 264, 1389, 295, 3048, 337, 5623, 10023, 9376, 13, 51550], "temperature": 0.0, "avg_logprob": -0.2049429100680064, "compression_ratio": 1.6700507614213198, "no_speech_prob": 0.02038569189608097}, {"id": 194, "seek": 102592, "start": 1025.92, "end": 1032.92, "text": " And last concept before going into the different implementation.", "tokens": [50364, 400, 1036, 3410, 949, 516, 666, 264, 819, 11420, 13, 50714], "temperature": 0.0, "avg_logprob": -0.3403058893540326, "compression_ratio": 1.551948051948052, "no_speech_prob": 0.013784668408334255}, {"id": 195, "seek": 102592, "start": 1035.24, "end": 1042.24, "text": " Explicit locking so by the application again this is not in the SQL standard but this is", "tokens": [50830, 2111, 4770, 270, 23954, 370, 538, 264, 3861, 797, 341, 307, 406, 294, 264, 19200, 3832, 457, 341, 307, 51180], "temperature": 0.0, "avg_logprob": -0.3403058893540326, "compression_ratio": 1.551948051948052, "no_speech_prob": 0.013784668408334255}, {"id": 196, "seek": 102592, "start": 1042.76, "end": 1049.76, "text": " our most application under the anomalies that could happen in the different isolation", "tokens": [51206, 527, 881, 3861, 833, 264, 24769, 48872, 300, 727, 1051, 294, 264, 819, 16001, 51556], "temperature": 0.0, "avg_logprob": -0.3403058893540326, "compression_ratio": 1.551948051948052, "no_speech_prob": 0.013784668408334255}, {"id": 197, "seek": 104976, "start": 1050.72, "end": 1052.68, "text": " levels that you will see.", "tokens": [50412, 4358, 300, 291, 486, 536, 13, 50510], "temperature": 0.0, "avg_logprob": -0.18545337518056235, "compression_ratio": 1.6666666666666667, "no_speech_prob": 0.023027587682008743}, {"id": 198, "seek": 104976, "start": 1052.68, "end": 1059.68, "text": " And typically when you read a select for update is a read but it's a bit more than a read", "tokens": [50510, 400, 5850, 562, 291, 1401, 257, 3048, 337, 5623, 307, 257, 1401, 457, 309, 311, 257, 857, 544, 813, 257, 1401, 50860], "temperature": 0.0, "avg_logprob": -0.18545337518056235, "compression_ratio": 1.6666666666666667, "no_speech_prob": 0.023027587682008743}, {"id": 199, "seek": 104976, "start": 1059.72, "end": 1066.72, "text": " you read and you tell the database about your intention to update something which means", "tokens": [50862, 291, 1401, 293, 291, 980, 264, 8149, 466, 428, 7789, 281, 5623, 746, 597, 1355, 51212], "temperature": 0.0, "avg_logprob": -0.18545337518056235, "compression_ratio": 1.6666666666666667, "no_speech_prob": 0.023027587682008743}, {"id": 200, "seek": 104976, "start": 1068.68, "end": 1075.68, "text": " that it's a read that behaves like a write like an update lock with a lock on it.", "tokens": [51310, 300, 309, 311, 257, 1401, 300, 36896, 411, 257, 2464, 411, 364, 5623, 4017, 365, 257, 4017, 322, 309, 13, 51660], "temperature": 0.0, "avg_logprob": -0.18545337518056235, "compression_ratio": 1.6666666666666667, "no_speech_prob": 0.023027587682008743}, {"id": 201, "seek": 107568, "start": 1076.68, "end": 1080.68, "text": " And then you have those choices.", "tokens": [50414, 400, 550, 291, 362, 729, 7994, 13, 50614], "temperature": 0.0, "avg_logprob": -0.1972431785181949, "compression_ratio": 1.6388888888888888, "no_speech_prob": 0.013925854116678238}, {"id": 202, "seek": 107568, "start": 1080.68, "end": 1082.68, "text": " Wait on conflict.", "tokens": [50614, 3802, 322, 6596, 13, 50714], "temperature": 0.0, "avg_logprob": -0.1972431785181949, "compression_ratio": 1.6388888888888888, "no_speech_prob": 0.013925854116678238}, {"id": 203, "seek": 107568, "start": 1082.68, "end": 1083.68, "text": " Don't wait.", "tokens": [50714, 1468, 380, 1699, 13, 50764], "temperature": 0.0, "avg_logprob": -0.1972431785181949, "compression_ratio": 1.6388888888888888, "no_speech_prob": 0.013925854116678238}, {"id": 204, "seek": 107568, "start": 1083.68, "end": 1085.68, "text": " Raise an error or skip lock.", "tokens": [50764, 30062, 364, 6713, 420, 10023, 4017, 13, 50864], "temperature": 0.0, "avg_logprob": -0.1972431785181949, "compression_ratio": 1.6388888888888888, "no_speech_prob": 0.013925854116678238}, {"id": 205, "seek": 107568, "start": 1085.68, "end": 1092.68, "text": " Those three possibilities where the developer tells the database I want to read that I", "tokens": [50864, 3950, 1045, 12178, 689, 264, 10754, 5112, 264, 8149, 286, 528, 281, 1401, 300, 286, 51214], "temperature": 0.0, "avg_logprob": -0.1972431785181949, "compression_ratio": 1.6388888888888888, "no_speech_prob": 0.013925854116678238}, {"id": 206, "seek": 107568, "start": 1092.68, "end": 1098.68, "text": " don't want it to change or lock it and if you cannot lock it then give me an error or", "tokens": [51214, 500, 380, 528, 309, 281, 1319, 420, 4017, 309, 293, 498, 291, 2644, 4017, 309, 550, 976, 385, 364, 6713, 420, 51514], "temperature": 0.0, "avg_logprob": -0.1972431785181949, "compression_ratio": 1.6388888888888888, "no_speech_prob": 0.013925854116678238}, {"id": 207, "seek": 107568, "start": 1098.68, "end": 1104.68, "text": " wait until you can lock it or just go to the next row I will come back to this one later.", "tokens": [51514, 1699, 1826, 291, 393, 4017, 309, 420, 445, 352, 281, 264, 958, 5386, 286, 486, 808, 646, 281, 341, 472, 1780, 13, 51814], "temperature": 0.0, "avg_logprob": -0.1972431785181949, "compression_ratio": 1.6388888888888888, "no_speech_prob": 0.013925854116678238}, {"id": 208, "seek": 110568, "start": 1106.68, "end": 1113.68, "text": " So you can just ignore the isolation levels and just manage that from the application.", "tokens": [50414, 407, 291, 393, 445, 11200, 264, 16001, 4358, 293, 445, 3067, 300, 490, 264, 3861, 13, 50764], "temperature": 0.0, "avg_logprob": -0.13574306666851044, "compression_ratio": 1.6049382716049383, "no_speech_prob": 0.004381874576210976}, {"id": 209, "seek": 110568, "start": 1116.68, "end": 1123.68, "text": " If you know what you are doing for example if I know that I'm reading the status of a", "tokens": [50914, 759, 291, 458, 437, 291, 366, 884, 337, 1365, 498, 286, 458, 300, 286, 478, 3760, 264, 6558, 295, 257, 51264], "temperature": 0.0, "avg_logprob": -0.13574306666851044, "compression_ratio": 1.6049382716049383, "no_speech_prob": 0.004381874576210976}, {"id": 210, "seek": 110568, "start": 1125.68, "end": 1131.68, "text": " hotel room that I want to book I can select for update what I read and then I know that", "tokens": [51364, 7622, 1808, 300, 286, 528, 281, 1446, 286, 393, 3048, 337, 5623, 437, 286, 1401, 293, 550, 286, 458, 300, 51664], "temperature": 0.0, "avg_logprob": -0.13574306666851044, "compression_ratio": 1.6049382716049383, "no_speech_prob": 0.004381874576210976}, {"id": 211, "seek": 113168, "start": 1131.68, "end": 1136.68, "text": " nobody will change its status until I commit my transaction.", "tokens": [50364, 5079, 486, 1319, 1080, 6558, 1826, 286, 5599, 452, 14425, 13, 50614], "temperature": 0.0, "avg_logprob": -0.13271872638023063, "compression_ratio": 1.592964824120603, "no_speech_prob": 0.008915804326534271}, {"id": 212, "seek": 113168, "start": 1136.68, "end": 1143.68, "text": " So you don't really need to care about isolation levels if you are okay about thinking about", "tokens": [50614, 407, 291, 500, 380, 534, 643, 281, 1127, 466, 16001, 4358, 498, 291, 366, 1392, 466, 1953, 466, 50964], "temperature": 0.0, "avg_logprob": -0.13271872638023063, "compression_ratio": 1.592964824120603, "no_speech_prob": 0.008915804326534271}, {"id": 213, "seek": 113168, "start": 1145.68, "end": 1147.68, "text": " the conflict yourself.", "tokens": [51064, 264, 6596, 1803, 13, 51164], "temperature": 0.0, "avg_logprob": -0.13271872638023063, "compression_ratio": 1.592964824120603, "no_speech_prob": 0.008915804326534271}, {"id": 214, "seek": 113168, "start": 1147.68, "end": 1153.68, "text": " Thinking is in the code and of course in tests the problem with concurrency is that it's not", "tokens": [51164, 24460, 307, 294, 264, 3089, 293, 295, 1164, 294, 6921, 264, 1154, 365, 23702, 10457, 307, 300, 309, 311, 406, 51464], "temperature": 0.0, "avg_logprob": -0.13271872638023063, "compression_ratio": 1.592964824120603, "no_speech_prob": 0.008915804326534271}, {"id": 215, "seek": 113168, "start": 1153.68, "end": 1158.68, "text": " always easy to test the different combinations.", "tokens": [51464, 1009, 1858, 281, 1500, 264, 819, 21267, 13, 51714], "temperature": 0.0, "avg_logprob": -0.13271872638023063, "compression_ratio": 1.592964824120603, "no_speech_prob": 0.008915804326534271}, {"id": 216, "seek": 115868, "start": 1158.68, "end": 1161.68, "text": " But it's totally possible.", "tokens": [50364, 583, 309, 311, 3879, 1944, 13, 50514], "temperature": 0.0, "avg_logprob": -0.20169955330926018, "compression_ratio": 1.5706806282722514, "no_speech_prob": 0.00866877194494009}, {"id": 217, "seek": 115868, "start": 1161.68, "end": 1168.68, "text": " And those select for update we will see also for share those concern rows but sometimes to avoid", "tokens": [50514, 400, 729, 3048, 337, 5623, 321, 486, 536, 611, 337, 2073, 729, 3136, 13241, 457, 2171, 281, 5042, 50864], "temperature": 0.0, "avg_logprob": -0.20169955330926018, "compression_ratio": 1.5706806282722514, "no_speech_prob": 0.00866877194494009}, {"id": 218, "seek": 115868, "start": 1172.68, "end": 1178.68, "text": " some anomalies you may want to lock more than a row maybe a row that doesn't exist yet.", "tokens": [51064, 512, 24769, 48872, 291, 815, 528, 281, 4017, 544, 813, 257, 5386, 1310, 257, 5386, 300, 1177, 380, 2514, 1939, 13, 51364], "temperature": 0.0, "avg_logprob": -0.20169955330926018, "compression_ratio": 1.5706806282722514, "no_speech_prob": 0.00866877194494009}, {"id": 219, "seek": 115868, "start": 1178.68, "end": 1187.68, "text": " For example you don't want anyone to insert a new row that's where you realize that this", "tokens": [51364, 1171, 1365, 291, 500, 380, 528, 2878, 281, 8969, 257, 777, 5386, 300, 311, 689, 291, 4325, 300, 341, 51814], "temperature": 0.0, "avg_logprob": -0.20169955330926018, "compression_ratio": 1.5706806282722514, "no_speech_prob": 0.00866877194494009}, {"id": 220, "seek": 118768, "start": 1187.68, "end": 1191.68, "text": " row does not exist then you can also lock a table.", "tokens": [50364, 5386, 775, 406, 2514, 550, 291, 393, 611, 4017, 257, 3199, 13, 50564], "temperature": 0.0, "avg_logprob": -0.2144910651193538, "compression_ratio": 1.53551912568306, "no_speech_prob": 0.005492187105119228}, {"id": 221, "seek": 118768, "start": 1191.68, "end": 1197.68, "text": " Again you don't find that in the SQL standard but all databases give you the possibility to", "tokens": [50564, 3764, 291, 500, 380, 915, 300, 294, 264, 19200, 3832, 457, 439, 22380, 976, 291, 264, 7959, 281, 50864], "temperature": 0.0, "avg_logprob": -0.2144910651193538, "compression_ratio": 1.53551912568306, "no_speech_prob": 0.005492187105119228}, {"id": 222, "seek": 118768, "start": 1197.68, "end": 1198.68, "text": " lock.", "tokens": [50864, 4017, 13, 50914], "temperature": 0.0, "avg_logprob": -0.2144910651193538, "compression_ratio": 1.53551912568306, "no_speech_prob": 0.005492187105119228}, {"id": 223, "seek": 118768, "start": 1198.68, "end": 1203.68, "text": " Okay do you have any question about that?", "tokens": [50914, 1033, 360, 291, 362, 604, 1168, 466, 300, 30, 51164], "temperature": 0.0, "avg_logprob": -0.2144910651193538, "compression_ratio": 1.53551912568306, "no_speech_prob": 0.005492187105119228}, {"id": 224, "seek": 118768, "start": 1203.68, "end": 1211.68, "text": " So the main message there is that it's totally okay you can ignore the isolation levels do", "tokens": [51164, 407, 264, 2135, 3636, 456, 307, 300, 309, 311, 3879, 1392, 291, 393, 11200, 264, 16001, 4358, 360, 51564], "temperature": 0.0, "avg_logprob": -0.2144910651193538, "compression_ratio": 1.53551912568306, "no_speech_prob": 0.005492187105119228}, {"id": 225, "seek": 121168, "start": 1211.68, "end": 1216.68, "text": " your own looking it's totally okay but only if you understand them.", "tokens": [50364, 428, 1065, 1237, 309, 311, 3879, 1392, 457, 787, 498, 291, 1223, 552, 13, 50614], "temperature": 0.0, "avg_logprob": -0.14916604681860043, "compression_ratio": 1.6492890995260663, "no_speech_prob": 0.0192964319139719}, {"id": 226, "seek": 121168, "start": 1216.68, "end": 1225.68, "text": " So most people use the default isolation levels read committed in Postgres and that's fine.", "tokens": [50614, 407, 881, 561, 764, 264, 7576, 16001, 4358, 1401, 7784, 294, 10223, 45189, 293, 300, 311, 2489, 13, 51064], "temperature": 0.0, "avg_logprob": -0.14916604681860043, "compression_ratio": 1.6492890995260663, "no_speech_prob": 0.0192964319139719}, {"id": 227, "seek": 121168, "start": 1225.68, "end": 1231.68, "text": " You don't need other isolation level if you don't want to but you need to understand how it works", "tokens": [51064, 509, 500, 380, 643, 661, 16001, 1496, 498, 291, 500, 380, 528, 281, 457, 291, 643, 281, 1223, 577, 309, 1985, 51364], "temperature": 0.0, "avg_logprob": -0.14916604681860043, "compression_ratio": 1.6492890995260663, "no_speech_prob": 0.0192964319139719}, {"id": 228, "seek": 121168, "start": 1231.68, "end": 1236.68, "text": " to be sure that you handle correctly the cases where you have to block something yourself.", "tokens": [51364, 281, 312, 988, 300, 291, 4813, 8944, 264, 3331, 689, 291, 362, 281, 3461, 746, 1803, 13, 51614], "temperature": 0.0, "avg_logprob": -0.14916604681860043, "compression_ratio": 1.6492890995260663, "no_speech_prob": 0.0192964319139719}, {"id": 229, "seek": 124168, "start": 1241.68, "end": 1248.68, "text": " So basically that's the goal of the presentation talking about how it works so that you understand", "tokens": [50364, 407, 1936, 300, 311, 264, 3387, 295, 264, 5860, 1417, 466, 577, 309, 1985, 370, 300, 291, 1223, 50714], "temperature": 0.0, "avg_logprob": -0.13513466931771542, "compression_ratio": 1.7374301675977655, "no_speech_prob": 0.005364035256206989}, {"id": 230, "seek": 124168, "start": 1248.68, "end": 1255.68, "text": " it maybe you will not change your isolation level after understanding all that but at least you", "tokens": [50714, 309, 1310, 291, 486, 406, 1319, 428, 16001, 1496, 934, 3701, 439, 300, 457, 412, 1935, 291, 51064], "temperature": 0.0, "avg_logprob": -0.13513466931771542, "compression_ratio": 1.7374301675977655, "no_speech_prob": 0.005364035256206989}, {"id": 231, "seek": 124168, "start": 1255.68, "end": 1261.68, "text": " will understand how it works and if you have some flaws in the logic with the select for", "tokens": [51064, 486, 1223, 577, 309, 1985, 293, 498, 291, 362, 512, 27108, 294, 264, 9952, 365, 264, 3048, 337, 51364], "temperature": 0.0, "avg_logprob": -0.13513466931771542, "compression_ratio": 1.7374301675977655, "no_speech_prob": 0.005364035256206989}, {"id": 232, "seek": 124168, "start": 1261.68, "end": 1263.68, "text": " update you use for example.", "tokens": [51364, 5623, 291, 764, 337, 1365, 13, 51464], "temperature": 0.0, "avg_logprob": -0.13513466931771542, "compression_ratio": 1.7374301675977655, "no_speech_prob": 0.005364035256206989}, {"id": 233, "seek": 126368, "start": 1263.68, "end": 1272.68, "text": " So MVCC stands for multiversion concurrency control I don't really like this name others may call it", "tokens": [50364, 407, 17663, 11717, 7382, 337, 2120, 1762, 313, 23702, 10457, 1969, 286, 500, 380, 534, 411, 341, 1315, 2357, 815, 818, 309, 50814], "temperature": 0.0, "avg_logprob": -0.19892393258901742, "compression_ratio": 1.6162790697674418, "no_speech_prob": 0.03997825086116791}, {"id": 234, "seek": 126368, "start": 1272.68, "end": 1279.68, "text": " multiversion read consistency at least it makes it clear that it is only about reads.", "tokens": [50814, 2120, 1762, 313, 1401, 14416, 412, 1935, 309, 1669, 309, 1850, 300, 309, 307, 787, 466, 15700, 13, 51164], "temperature": 0.0, "avg_logprob": -0.19892393258901742, "compression_ratio": 1.6162790697674418, "no_speech_prob": 0.03997825086116791}, {"id": 235, "seek": 126368, "start": 1279.68, "end": 1286.68, "text": " The writes you cannot do anything else than looking what you write this is only about reads", "tokens": [51164, 440, 13657, 291, 2644, 360, 1340, 1646, 813, 1237, 437, 291, 2464, 341, 307, 787, 466, 15700, 51514], "temperature": 0.0, "avg_logprob": -0.19892393258901742, "compression_ratio": 1.6162790697674418, "no_speech_prob": 0.03997825086116791}, {"id": 236, "seek": 128668, "start": 1286.68, "end": 1293.68, "text": " isolation levels are only about reads it was also called multi-generational architecture", "tokens": [50364, 16001, 4358, 366, 787, 466, 15700, 309, 390, 611, 1219, 4825, 12, 21848, 1478, 9482, 50714], "temperature": 0.0, "avg_logprob": -0.1503107706705729, "compression_ratio": 1.5930232558139534, "no_speech_prob": 0.03186197951436043}, {"id": 237, "seek": 128668, "start": 1293.68, "end": 1300.68, "text": " in the first databases that implement it but basically it's versioning when you change a row", "tokens": [50714, 294, 264, 700, 22380, 300, 4445, 309, 457, 1936, 309, 311, 3037, 278, 562, 291, 1319, 257, 5386, 51064], "temperature": 0.0, "avg_logprob": -0.1503107706705729, "compression_ratio": 1.5930232558139534, "no_speech_prob": 0.03186197951436043}, {"id": 238, "seek": 128668, "start": 1300.68, "end": 1309.68, "text": " the database keeps the old version of the row so that you can read from a previous snapshot.", "tokens": [51064, 264, 8149, 5965, 264, 1331, 3037, 295, 264, 5386, 370, 300, 291, 393, 1401, 490, 257, 3894, 30163, 13, 51514], "temperature": 0.0, "avg_logprob": -0.1503107706705729, "compression_ratio": 1.5930232558139534, "no_speech_prob": 0.03186197951436043}, {"id": 239, "seek": 130968, "start": 1309.68, "end": 1319.68, "text": " Twenty years ago IBM in a paper that compared with Oracle was saying MVCC is implemented in", "tokens": [50364, 28789, 924, 2057, 23487, 294, 257, 3035, 300, 5347, 365, 25654, 390, 1566, 17663, 11717, 307, 12270, 294, 50864], "temperature": 0.0, "avg_logprob": -0.1493543443225679, "compression_ratio": 1.4863387978142077, "no_speech_prob": 0.078074149787426}, {"id": 240, "seek": 130968, "start": 1319.68, "end": 1328.68, "text": " only one database Oracle no other database did it because basically it's not good and today", "tokens": [50864, 787, 472, 8149, 25654, 572, 661, 8149, 630, 309, 570, 1936, 309, 311, 406, 665, 293, 965, 51314], "temperature": 0.0, "avg_logprob": -0.1493543443225679, "compression_ratio": 1.4863387978142077, "no_speech_prob": 0.078074149787426}, {"id": 241, "seek": 130968, "start": 1328.68, "end": 1338.68, "text": " I think that only DB2 is not using MVCC release or the history has proved that they were", "tokens": [51314, 286, 519, 300, 787, 26754, 17, 307, 406, 1228, 17663, 11717, 4374, 420, 264, 2503, 575, 14617, 300, 436, 645, 51814], "temperature": 0.0, "avg_logprob": -0.1493543443225679, "compression_ratio": 1.4863387978142077, "no_speech_prob": 0.078074149787426}, {"id": 242, "seek": 133868, "start": 1338.68, "end": 1348.68, "text": " actually wrong now all databases use MVCC because you don't have to look too much when you read.", "tokens": [50364, 767, 2085, 586, 439, 22380, 764, 17663, 11717, 570, 291, 500, 380, 362, 281, 574, 886, 709, 562, 291, 1401, 13, 50864], "temperature": 0.0, "avg_logprob": -0.13974736718570485, "compression_ratio": 1.5913978494623655, "no_speech_prob": 0.031169936060905457}, {"id": 243, "seek": 133868, "start": 1348.68, "end": 1355.68, "text": " Another thing that they were saying was that the model where you look what you read the one that is", "tokens": [50864, 3996, 551, 300, 436, 645, 1566, 390, 300, 264, 2316, 689, 291, 574, 437, 291, 1401, 264, 472, 300, 307, 51214], "temperature": 0.0, "avg_logprob": -0.13974736718570485, "compression_ratio": 1.5913978494623655, "no_speech_prob": 0.031169936060905457}, {"id": 244, "seek": 133868, "start": 1355.68, "end": 1362.68, "text": " defined in the SQL standard is better because the developer or the user doesn't have to think about", "tokens": [51214, 7642, 294, 264, 19200, 3832, 307, 1101, 570, 264, 10754, 420, 264, 4195, 1177, 380, 362, 281, 519, 466, 51564], "temperature": 0.0, "avg_logprob": -0.13974736718570485, "compression_ratio": 1.5913978494623655, "no_speech_prob": 0.031169936060905457}, {"id": 245, "seek": 136268, "start": 1362.68, "end": 1371.68, "text": " the code around the select for updates but finally most application developers really prefer to put", "tokens": [50364, 264, 3089, 926, 264, 3048, 337, 9205, 457, 2721, 881, 3861, 8849, 534, 4382, 281, 829, 50814], "temperature": 0.0, "avg_logprob": -0.16451912177236458, "compression_ratio": 1.7777777777777777, "no_speech_prob": 0.07218293845653534}, {"id": 246, "seek": 136268, "start": 1371.68, "end": 1376.68, "text": " the select for updates in the transactions where they are needed rather than going to", "tokens": [50814, 264, 3048, 337, 9205, 294, 264, 16856, 689, 436, 366, 2978, 2831, 813, 516, 281, 51064], "temperature": 0.0, "avg_logprob": -0.16451912177236458, "compression_ratio": 1.7777777777777777, "no_speech_prob": 0.07218293845653534}, {"id": 247, "seek": 136268, "start": 1376.68, "end": 1383.68, "text": " isolation levels that may have other problems the only thing where they were right in this paper", "tokens": [51064, 16001, 4358, 300, 815, 362, 661, 2740, 264, 787, 551, 689, 436, 645, 558, 294, 341, 3035, 51414], "temperature": 0.0, "avg_logprob": -0.16451912177236458, "compression_ratio": 1.7777777777777777, "no_speech_prob": 0.07218293845653534}, {"id": 248, "seek": 136268, "start": 1383.68, "end": 1391.68, "text": " was saying that you need to understand it in your database because all implementations are different.", "tokens": [51414, 390, 1566, 300, 291, 643, 281, 1223, 309, 294, 428, 8149, 570, 439, 4445, 763, 366, 819, 13, 51814], "temperature": 0.0, "avg_logprob": -0.16451912177236458, "compression_ratio": 1.7777777777777777, "no_speech_prob": 0.07218293845653534}, {"id": 249, "seek": 139168, "start": 1391.68, "end": 1400.68, "text": " So the non-NVCC ones like the DB2 they cannot read from the past because they do not record all the changes", "tokens": [50364, 407, 264, 2107, 12, 45, 53, 11717, 2306, 411, 264, 26754, 17, 436, 2644, 1401, 490, 264, 1791, 570, 436, 360, 406, 2136, 439, 264, 2962, 50814], "temperature": 0.0, "avg_logprob": -0.11812541909413794, "compression_ratio": 1.6745562130177514, "no_speech_prob": 0.017678439617156982}, {"id": 250, "seek": 139168, "start": 1400.68, "end": 1406.68, "text": " they have to record it for recovery reason but they don't record it for this reason.", "tokens": [50814, 436, 362, 281, 2136, 309, 337, 8597, 1778, 457, 436, 500, 380, 2136, 309, 337, 341, 1778, 13, 51114], "temperature": 0.0, "avg_logprob": -0.11812541909413794, "compression_ratio": 1.6745562130177514, "no_speech_prob": 0.017678439617156982}, {"id": 251, "seek": 139168, "start": 1406.68, "end": 1415.68, "text": " So they cannot go to the past the only way is to look when you read you look in share mode", "tokens": [51114, 407, 436, 2644, 352, 281, 264, 1791, 264, 787, 636, 307, 281, 574, 562, 291, 1401, 291, 574, 294, 2073, 4391, 51564], "temperature": 0.0, "avg_logprob": -0.11812541909413794, "compression_ratio": 1.6745562130177514, "no_speech_prob": 0.017678439617156982}, {"id": 252, "seek": 141568, "start": 1415.68, "end": 1421.68, "text": " so many people can read at the same time but nobody can update something that you have read", "tokens": [50364, 370, 867, 561, 393, 1401, 412, 264, 912, 565, 457, 5079, 393, 5623, 746, 300, 291, 362, 1401, 50664], "temperature": 0.0, "avg_logprob": -0.17116184234619142, "compression_ratio": 1.6327683615819208, "no_speech_prob": 0.0530436709523201}, {"id": 253, "seek": 141568, "start": 1421.68, "end": 1429.68, "text": " which cause problem because then you may have deadlocks then you may have you look too much basically", "tokens": [50664, 597, 3082, 1154, 570, 550, 291, 815, 362, 3116, 34896, 550, 291, 815, 362, 291, 574, 886, 709, 1936, 51064], "temperature": 0.0, "avg_logprob": -0.17116184234619142, "compression_ratio": 1.6327683615819208, "no_speech_prob": 0.0530436709523201}, {"id": 254, "seek": 141568, "start": 1429.68, "end": 1438.68, "text": " for no LTP application and MVCC databases they look only for the rights they read from the past", "tokens": [51064, 337, 572, 441, 16804, 3861, 293, 17663, 11717, 22380, 436, 574, 787, 337, 264, 4601, 436, 1401, 490, 264, 1791, 51514], "temperature": 0.0, "avg_logprob": -0.17116184234619142, "compression_ratio": 1.6327683615819208, "no_speech_prob": 0.0530436709523201}, {"id": 255, "seek": 143868, "start": 1438.68, "end": 1447.68, "text": " and they have some conflict detection to see if those two states conflict with your transaction consistency or not.", "tokens": [50364, 293, 436, 362, 512, 6596, 17784, 281, 536, 498, 729, 732, 4368, 6596, 365, 428, 14425, 14416, 420, 406, 13, 50814], "temperature": 0.0, "avg_logprob": -0.2848699981091069, "compression_ratio": 1.5629139072847682, "no_speech_prob": 0.5084058046340942}, {"id": 256, "seek": 143868, "start": 1447.68, "end": 1457.68, "text": " This is also for repeatable read only because if you do read commit even within transaction", "tokens": [50814, 639, 307, 611, 337, 7149, 712, 1401, 787, 570, 498, 291, 360, 1401, 5599, 754, 1951, 14425, 51314], "temperature": 0.0, "avg_logprob": -0.2848699981091069, "compression_ratio": 1.5629139072847682, "no_speech_prob": 0.5084058046340942}, {"id": 257, "seek": 143868, "start": 1457.68, "end": 1459.68, "text": " you will read the current...", "tokens": [51314, 291, 486, 1401, 264, 2190, 485, 51414], "temperature": 0.0, "avg_logprob": -0.2848699981091069, "compression_ratio": 1.5629139072847682, "no_speech_prob": 0.5084058046340942}, {"id": 258, "seek": 145968, "start": 1459.68, "end": 1464.68, "text": " The remark is that when I say I read from the beginning of the transaction", "tokens": [50364, 440, 7942, 307, 300, 562, 286, 584, 286, 1401, 490, 264, 2863, 295, 264, 14425, 50614], "temperature": 0.0, "avg_logprob": -0.13722984210864916, "compression_ratio": 1.6702702702702703, "no_speech_prob": 0.12640754878520966}, {"id": 259, "seek": 145968, "start": 1464.68, "end": 1470.68, "text": " that's the general case in read committed we will see the isolation level at the end", "tokens": [50614, 300, 311, 264, 2674, 1389, 294, 1401, 7784, 321, 486, 536, 264, 16001, 1496, 412, 264, 917, 50914], "temperature": 0.0, "avg_logprob": -0.13722984210864916, "compression_ratio": 1.6702702702702703, "no_speech_prob": 0.12640754878520966}, {"id": 260, "seek": 145968, "start": 1470.68, "end": 1477.68, "text": " the read time may be reset for each statement and we will see why.", "tokens": [50914, 264, 1401, 565, 815, 312, 14322, 337, 1184, 5629, 293, 321, 486, 536, 983, 13, 51264], "temperature": 0.0, "avg_logprob": -0.13722984210864916, "compression_ratio": 1.6702702702702703, "no_speech_prob": 0.12640754878520966}, {"id": 261, "seek": 145968, "start": 1477.68, "end": 1482.68, "text": " But the idea is that you have only two states when you are reading your statement.", "tokens": [51264, 583, 264, 1558, 307, 300, 291, 362, 787, 732, 4368, 562, 291, 366, 3760, 428, 5629, 13, 51514], "temperature": 0.0, "avg_logprob": -0.13722984210864916, "compression_ratio": 1.6702702702702703, "no_speech_prob": 0.12640754878520966}, {"id": 262, "seek": 148268, "start": 1483.68, "end": 1487.68, "text": " And yeah this is about read.", "tokens": [50414, 400, 1338, 341, 307, 466, 1401, 13, 50614], "temperature": 0.0, "avg_logprob": -0.20096876356336807, "compression_ratio": 1.4592592592592593, "no_speech_prob": 0.18206271529197693}, {"id": 263, "seek": 148268, "start": 1490.68, "end": 1496.68, "text": " I will go first I have a reference on the first mention of this architecture", "tokens": [50764, 286, 486, 352, 700, 286, 362, 257, 6408, 322, 264, 700, 2152, 295, 341, 9482, 51064], "temperature": 0.0, "avg_logprob": -0.20096876356336807, "compression_ratio": 1.4592592592592593, "no_speech_prob": 0.18206271529197693}, {"id": 264, "seek": 148268, "start": 1496.68, "end": 1503.68, "text": " but basically the changes are versioned we will see that there are different implementation", "tokens": [51064, 457, 1936, 264, 2962, 366, 3037, 292, 321, 486, 536, 300, 456, 366, 819, 11420, 51414], "temperature": 0.0, "avg_logprob": -0.20096876356336807, "compression_ratio": 1.4592592592592593, "no_speech_prob": 0.18206271529197693}, {"id": 265, "seek": 150368, "start": 1504.68, "end": 1515.68, "text": " Postgres versions the rows in the table and query can read as of a specific time", "tokens": [50414, 10223, 45189, 9606, 264, 13241, 294, 264, 3199, 293, 14581, 393, 1401, 382, 295, 257, 2685, 565, 50964], "temperature": 0.0, "avg_logprob": -0.1465721912071353, "compression_ratio": 1.5974842767295598, "no_speech_prob": 0.2573404610157013}, {"id": 266, "seek": 150368, "start": 1515.68, "end": 1522.68, "text": " so we will see as of the beginning of the transaction or as of the start of a statement", "tokens": [50964, 370, 321, 486, 536, 382, 295, 264, 2863, 295, 264, 14425, 420, 382, 295, 264, 722, 295, 257, 5629, 51314], "temperature": 0.0, "avg_logprob": -0.1465721912071353, "compression_ratio": 1.5974842767295598, "no_speech_prob": 0.2573404610157013}, {"id": 267, "seek": 150368, "start": 1522.68, "end": 1529.68, "text": " and then it can do those optimistic looking without locks that's the main value of it", "tokens": [51314, 293, 550, 309, 393, 360, 729, 19397, 1237, 1553, 20703, 300, 311, 264, 2135, 2158, 295, 309, 51664], "temperature": 0.0, "avg_logprob": -0.1465721912071353, "compression_ratio": 1.5974842767295598, "no_speech_prob": 0.2573404610157013}, {"id": 268, "seek": 152968, "start": 1529.68, "end": 1534.68, "text": " the readers do not block the writers.", "tokens": [50364, 264, 17147, 360, 406, 3461, 264, 13491, 13, 50614], "temperature": 0.0, "avg_logprob": -0.1269052781556782, "compression_ratio": 1.568421052631579, "no_speech_prob": 0.06132182478904724}, {"id": 269, "seek": 152968, "start": 1534.68, "end": 1542.68, "text": " Typically in non-MVCC databases if you are the DBA and just want to count the tables", "tokens": [50614, 23129, 294, 2107, 12, 44, 53, 11717, 22380, 498, 291, 366, 264, 413, 9295, 293, 445, 528, 281, 1207, 264, 8020, 51014], "temperature": 0.0, "avg_logprob": -0.1269052781556782, "compression_ratio": 1.568421052631579, "no_speech_prob": 0.06132182478904724}, {"id": 270, "seek": 152968, "start": 1542.68, "end": 1550.68, "text": " the rows in the table and you do a select count star which you do easily in Postgres", "tokens": [51014, 264, 13241, 294, 264, 3199, 293, 291, 360, 257, 3048, 1207, 3543, 597, 291, 360, 3612, 294, 10223, 45189, 51414], "temperature": 0.0, "avg_logprob": -0.1269052781556782, "compression_ratio": 1.568421052631579, "no_speech_prob": 0.06132182478904724}, {"id": 271, "seek": 152968, "start": 1550.68, "end": 1556.68, "text": " if you do that in DB2 you will lock all your applications because you will lock everything", "tokens": [51414, 498, 291, 360, 300, 294, 26754, 17, 291, 486, 4017, 439, 428, 5821, 570, 291, 486, 4017, 1203, 51714], "temperature": 0.0, "avg_logprob": -0.1269052781556782, "compression_ratio": 1.568421052631579, "no_speech_prob": 0.06132182478904724}, {"id": 272, "seek": 155668, "start": 1556.68, "end": 1562.68, "text": " so yeah quite nice to be able to read without blocking the others.", "tokens": [50364, 370, 1338, 1596, 1481, 281, 312, 1075, 281, 1401, 1553, 17776, 264, 2357, 13, 50664], "temperature": 0.0, "avg_logprob": -0.13664681771222284, "compression_ratio": 1.507936507936508, "no_speech_prob": 0.02205640822649002}, {"id": 273, "seek": 155668, "start": 1562.68, "end": 1569.68, "text": " So basically MVCC became popular because it allowed mixed workloads", "tokens": [50664, 407, 1936, 17663, 11717, 3062, 3743, 570, 309, 4350, 7467, 32452, 51014], "temperature": 0.0, "avg_logprob": -0.13664681771222284, "compression_ratio": 1.507936507936508, "no_speech_prob": 0.02205640822649002}, {"id": 274, "seek": 155668, "start": 1569.68, "end": 1573.68, "text": " even if you have a no LTP application there is some reporting on it", "tokens": [51014, 754, 498, 291, 362, 257, 572, 441, 16804, 3861, 456, 307, 512, 10031, 322, 309, 51214], "temperature": 0.0, "avg_logprob": -0.13664681771222284, "compression_ratio": 1.507936507936508, "no_speech_prob": 0.02205640822649002}, {"id": 275, "seek": 155668, "start": 1573.68, "end": 1578.68, "text": " there are some analytic queries on it and you don't want them to block the others.", "tokens": [51214, 456, 366, 512, 40358, 24109, 322, 309, 293, 291, 500, 380, 528, 552, 281, 3461, 264, 2357, 13, 51464], "temperature": 0.0, "avg_logprob": -0.13664681771222284, "compression_ratio": 1.507936507936508, "no_speech_prob": 0.02205640822649002}, {"id": 276, "seek": 157868, "start": 1579.68, "end": 1590.68, "text": " So then the implementation all databases most databases today implement MVCC", "tokens": [50414, 407, 550, 264, 11420, 439, 22380, 881, 22380, 965, 4445, 17663, 11717, 50964], "temperature": 0.0, "avg_logprob": -0.20370628720238096, "compression_ratio": 1.646341463414634, "no_speech_prob": 0.044901102781295776}, {"id": 277, "seek": 157868, "start": 1590.68, "end": 1595.68, "text": " but all in a different way and then the bravio may be different", "tokens": [50964, 457, 439, 294, 257, 819, 636, 293, 550, 264, 1548, 85, 1004, 815, 312, 819, 51214], "temperature": 0.0, "avg_logprob": -0.20370628720238096, "compression_ratio": 1.646341463414634, "no_speech_prob": 0.044901102781295776}, {"id": 278, "seek": 157868, "start": 1595.68, "end": 1598.68, "text": " and that's why it's interesting to understand it.", "tokens": [51214, 293, 300, 311, 983, 309, 311, 1880, 281, 1223, 309, 13, 51364], "temperature": 0.0, "avg_logprob": -0.20370628720238096, "compression_ratio": 1.646341463414634, "no_speech_prob": 0.044901102781295776}, {"id": 279, "seek": 157868, "start": 1598.68, "end": 1604.68, "text": " First when you version you have a version number some databases use a timestamp", "tokens": [51364, 2386, 562, 291, 3037, 291, 362, 257, 3037, 1230, 512, 22380, 764, 257, 49108, 1215, 51664], "temperature": 0.0, "avg_logprob": -0.20370628720238096, "compression_ratio": 1.646341463414634, "no_speech_prob": 0.044901102781295776}, {"id": 280, "seek": 160468, "start": 1604.68, "end": 1610.68, "text": " some databases use a number that is always increasing the log sequence number", "tokens": [50364, 512, 22380, 764, 257, 1230, 300, 307, 1009, 5662, 264, 3565, 8310, 1230, 50664], "temperature": 0.0, "avg_logprob": -0.12702368383538232, "compression_ratio": 1.6353591160220995, "no_speech_prob": 0.009876318275928497}, {"id": 281, "seek": 160468, "start": 1610.68, "end": 1615.68, "text": " for example in Postgres and what do you version?", "tokens": [50664, 337, 1365, 294, 10223, 45189, 293, 437, 360, 291, 3037, 30, 50914], "temperature": 0.0, "avg_logprob": -0.12702368383538232, "compression_ratio": 1.6353591160220995, "no_speech_prob": 0.009876318275928497}, {"id": 282, "seek": 160468, "start": 1615.68, "end": 1622.68, "text": " Many databases version the rows in Postgres each row if you update a row", "tokens": [50914, 5126, 22380, 3037, 264, 13241, 294, 10223, 45189, 1184, 5386, 498, 291, 5623, 257, 5386, 51264], "temperature": 0.0, "avg_logprob": -0.12702368383538232, "compression_ratio": 1.6353591160220995, "no_speech_prob": 0.009876318275928497}, {"id": 283, "seek": 160468, "start": 1622.68, "end": 1626.68, "text": " you will have a new version of the row.", "tokens": [51264, 291, 486, 362, 257, 777, 3037, 295, 264, 5386, 13, 51464], "temperature": 0.0, "avg_logprob": -0.12702368383538232, "compression_ratio": 1.6353591160220995, "no_speech_prob": 0.009876318275928497}, {"id": 284, "seek": 160468, "start": 1626.68, "end": 1630.68, "text": " Then the question is I say what about the index entries?", "tokens": [51464, 1396, 264, 1168, 307, 286, 584, 437, 466, 264, 8186, 23041, 30, 51664], "temperature": 0.0, "avg_logprob": -0.12702368383538232, "compression_ratio": 1.6353591160220995, "no_speech_prob": 0.009876318275928497}, {"id": 285, "seek": 163068, "start": 1630.68, "end": 1634.68, "text": " There are some databases that also version the index entries", "tokens": [50364, 821, 366, 512, 22380, 300, 611, 3037, 264, 8186, 23041, 50564], "temperature": 0.0, "avg_logprob": -0.1810737739909779, "compression_ratio": 1.9292929292929293, "no_speech_prob": 0.012870965525507927}, {"id": 286, "seek": 163068, "start": 1634.68, "end": 1640.68, "text": " Postgres doesn't do versioning for the index so the index has the two entries", "tokens": [50564, 10223, 45189, 1177, 380, 360, 3037, 278, 337, 264, 8186, 370, 264, 8186, 575, 264, 732, 23041, 50864], "temperature": 0.0, "avg_logprob": -0.1810737739909779, "compression_ratio": 1.9292929292929293, "no_speech_prob": 0.012870965525507927}, {"id": 287, "seek": 163068, "start": 1640.68, "end": 1644.68, "text": " and then in the row you have this version number.", "tokens": [50864, 293, 550, 294, 264, 5386, 291, 362, 341, 3037, 1230, 13, 51064], "temperature": 0.0, "avg_logprob": -0.1810737739909779, "compression_ratio": 1.9292929292929293, "no_speech_prob": 0.012870965525507927}, {"id": 288, "seek": 163068, "start": 1644.68, "end": 1650.68, "text": " There are some databases actually I think there is only one database that doesn't version at all level", "tokens": [51064, 821, 366, 512, 22380, 767, 286, 519, 456, 307, 787, 472, 8149, 300, 1177, 380, 3037, 412, 439, 1496, 51364], "temperature": 0.0, "avg_logprob": -0.1810737739909779, "compression_ratio": 1.9292929292929293, "no_speech_prob": 0.012870965525507927}, {"id": 289, "seek": 163068, "start": 1650.68, "end": 1656.68, "text": " but at block level so a low level the storage the page or vehicle does that at block level", "tokens": [51364, 457, 412, 3461, 1496, 370, 257, 2295, 1496, 264, 6725, 264, 3028, 420, 5864, 775, 300, 412, 3461, 1496, 51664], "temperature": 0.0, "avg_logprob": -0.1810737739909779, "compression_ratio": 1.9292929292929293, "no_speech_prob": 0.012870965525507927}, {"id": 290, "seek": 165668, "start": 1656.68, "end": 1662.68, "text": " so very different implementation and where do you store the past versions?", "tokens": [50364, 370, 588, 819, 11420, 293, 689, 360, 291, 3531, 264, 1791, 9606, 30, 50664], "temperature": 0.0, "avg_logprob": -0.15514013880775088, "compression_ratio": 1.7233009708737863, "no_speech_prob": 0.025497648864984512}, {"id": 291, "seek": 165668, "start": 1662.68, "end": 1670.68, "text": " That's also a big problem you can store it keep it where it is for example in Postgres", "tokens": [50664, 663, 311, 611, 257, 955, 1154, 291, 393, 3531, 309, 1066, 309, 689, 309, 307, 337, 1365, 294, 10223, 45189, 51064], "temperature": 0.0, "avg_logprob": -0.15514013880775088, "compression_ratio": 1.7233009708737863, "no_speech_prob": 0.025497648864984512}, {"id": 292, "seek": 165668, "start": 1670.68, "end": 1676.68, "text": " you have a row you update it the new version will be written at the end of the heap table", "tokens": [51064, 291, 362, 257, 5386, 291, 5623, 309, 264, 777, 3037, 486, 312, 3720, 412, 264, 917, 295, 264, 33591, 3199, 51364], "temperature": 0.0, "avg_logprob": -0.15514013880775088, "compression_ratio": 1.7233009708737863, "no_speech_prob": 0.025497648864984512}, {"id": 293, "seek": 165668, "start": 1676.68, "end": 1685.68, "text": " and the old versions just stays there in other databases this old version will be moved to an undue log", "tokens": [51364, 293, 264, 1331, 9606, 445, 10834, 456, 294, 661, 22380, 341, 1331, 3037, 486, 312, 4259, 281, 364, 674, 622, 3565, 51814], "temperature": 0.0, "avg_logprob": -0.15514013880775088, "compression_ratio": 1.7233009708737863, "no_speech_prob": 0.025497648864984512}, {"id": 294, "seek": 168568, "start": 1685.68, "end": 1693.68, "text": " a rollback segment can have a different name and both are pros and cons.", "tokens": [50364, 257, 3373, 3207, 9469, 393, 362, 257, 819, 1315, 293, 1293, 366, 6267, 293, 1014, 13, 50764], "temperature": 0.0, "avg_logprob": -0.15897961151905549, "compression_ratio": 1.673913043478261, "no_speech_prob": 0.024371296167373657}, {"id": 295, "seek": 168568, "start": 1693.68, "end": 1699.68, "text": " If you move it then you have the overhead to move it but you don't put overhead on the other", "tokens": [50764, 759, 291, 1286, 309, 550, 291, 362, 264, 19922, 281, 1286, 309, 457, 291, 500, 380, 829, 19922, 322, 264, 661, 51064], "temperature": 0.0, "avg_logprob": -0.15897961151905549, "compression_ratio": 1.673913043478261, "no_speech_prob": 0.024371296167373657}, {"id": 296, "seek": 168568, "start": 1699.68, "end": 1705.68, "text": " that we have to read and the size of the table so many different implementations.", "tokens": [51064, 300, 321, 362, 281, 1401, 293, 264, 2744, 295, 264, 3199, 370, 867, 819, 4445, 763, 13, 51364], "temperature": 0.0, "avg_logprob": -0.15897961151905549, "compression_ratio": 1.673913043478261, "no_speech_prob": 0.024371296167373657}, {"id": 297, "seek": 168568, "start": 1705.68, "end": 1712.68, "text": " Also you need to change the versions if an index go to a row", "tokens": [51364, 2743, 291, 643, 281, 1319, 264, 9606, 498, 364, 8186, 352, 281, 257, 5386, 51714], "temperature": 0.0, "avg_logprob": -0.15897961151905549, "compression_ratio": 1.673913043478261, "no_speech_prob": 0.024371296167373657}, {"id": 298, "seek": 171268, "start": 1712.68, "end": 1719.68, "text": " and then you see that this version is too early when compared to your read time", "tokens": [50364, 293, 550, 291, 536, 300, 341, 3037, 307, 886, 2440, 562, 5347, 281, 428, 1401, 565, 50714], "temperature": 0.0, "avg_logprob": -0.08431935619998288, "compression_ratio": 1.7751479289940828, "no_speech_prob": 0.017557509243488312}, {"id": 299, "seek": 171268, "start": 1719.68, "end": 1724.68, "text": " you want to go to a past version or it can be the opposite you always go to the past version", "tokens": [50714, 291, 528, 281, 352, 281, 257, 1791, 3037, 420, 309, 393, 312, 264, 6182, 291, 1009, 352, 281, 264, 1791, 3037, 50964], "temperature": 0.0, "avg_logprob": -0.08431935619998288, "compression_ratio": 1.7751479289940828, "no_speech_prob": 0.017557509243488312}, {"id": 300, "seek": 171268, "start": 1724.68, "end": 1728.68, "text": " and then you see if there are new changes.", "tokens": [50964, 293, 550, 291, 536, 498, 456, 366, 777, 2962, 13, 51164], "temperature": 0.0, "avg_logprob": -0.08431935619998288, "compression_ratio": 1.7751479289940828, "no_speech_prob": 0.017557509243488312}, {"id": 301, "seek": 171268, "start": 1728.68, "end": 1736.68, "text": " So in Postgres when a row is updated a new version is written at the end of the heap", "tokens": [51164, 407, 294, 10223, 45189, 562, 257, 5386, 307, 10588, 257, 777, 3037, 307, 3720, 412, 264, 917, 295, 264, 33591, 51564], "temperature": 0.0, "avg_logprob": -0.08431935619998288, "compression_ratio": 1.7751479289940828, "no_speech_prob": 0.017557509243488312}, {"id": 302, "seek": 173668, "start": 1736.68, "end": 1740.68, "text": " and the old version has a pointer to it so from old to the old.", "tokens": [50364, 293, 264, 1331, 3037, 575, 257, 23918, 281, 309, 370, 490, 1331, 281, 264, 1331, 13, 50564], "temperature": 0.0, "avg_logprob": -0.3234702171163356, "compression_ratio": 1.3245614035087718, "no_speech_prob": 0.10391250997781754}, {"id": 303, "seek": 173668, "start": 1740.68, "end": 1742.68, "text": " Question?", "tokens": [50564, 14464, 30, 50664], "temperature": 0.0, "avg_logprob": -0.3234702171163356, "compression_ratio": 1.3245614035087718, "no_speech_prob": 0.10391250997781754}, {"id": 304, "seek": 173668, "start": 1742.68, "end": 1755.68, "text": " I didn't get the end of the question.", "tokens": [50664, 286, 994, 380, 483, 264, 917, 295, 264, 1168, 13, 51314], "temperature": 0.0, "avg_logprob": -0.3234702171163356, "compression_ratio": 1.3245614035087718, "no_speech_prob": 0.10391250997781754}, {"id": 305, "seek": 173668, "start": 1755.68, "end": 1761.68, "text": " We have a microphone it will be easier.", "tokens": [51314, 492, 362, 257, 10952, 309, 486, 312, 3571, 13, 51614], "temperature": 0.0, "avg_logprob": -0.3234702171163356, "compression_ratio": 1.3245614035087718, "no_speech_prob": 0.10391250997781754}, {"id": 306, "seek": 176168, "start": 1761.68, "end": 1770.68, "text": " I'm just asking that the version number whatever it is which shows that a change has been made", "tokens": [50364, 286, 478, 445, 3365, 300, 264, 3037, 1230, 2035, 309, 307, 597, 3110, 300, 257, 1319, 575, 668, 1027, 50814], "temperature": 0.0, "avg_logprob": -0.1649016879853748, "compression_ratio": 1.729032258064516, "no_speech_prob": 0.26492467522621155}, {"id": 307, "seek": 176168, "start": 1770.68, "end": 1778.68, "text": " so will it also point to the row or rows which have been updated or deleted or changed like in one version", "tokens": [50814, 370, 486, 309, 611, 935, 281, 264, 5386, 420, 13241, 597, 362, 668, 10588, 420, 22981, 420, 3105, 411, 294, 472, 3037, 51214], "temperature": 0.0, "avg_logprob": -0.1649016879853748, "compression_ratio": 1.729032258064516, "no_speech_prob": 0.26492467522621155}, {"id": 308, "seek": 176168, "start": 1778.68, "end": 1783.68, "text": " or it just shows that this table has been changed in this version?", "tokens": [51214, 420, 309, 445, 3110, 300, 341, 3199, 575, 668, 3105, 294, 341, 3037, 30, 51464], "temperature": 0.0, "avg_logprob": -0.1649016879853748, "compression_ratio": 1.729032258064516, "no_speech_prob": 0.26492467522621155}, {"id": 309, "seek": 178368, "start": 1783.68, "end": 1791.68, "text": " For example in Postgres it is per row so typically if I read from an index the index entry", "tokens": [50364, 1171, 1365, 294, 10223, 45189, 309, 307, 680, 5386, 370, 5850, 498, 286, 1401, 490, 364, 8186, 264, 8186, 8729, 50764], "temperature": 0.0, "avg_logprob": -0.10508546829223633, "compression_ratio": 1.6420454545454546, "no_speech_prob": 0.33300912380218506}, {"id": 310, "seek": 178368, "start": 1791.68, "end": 1797.68, "text": " the value that I'm looking for I have one or multiple index entries for that", "tokens": [50764, 264, 2158, 300, 286, 478, 1237, 337, 286, 362, 472, 420, 3866, 8186, 23041, 337, 300, 51064], "temperature": 0.0, "avg_logprob": -0.10508546829223633, "compression_ratio": 1.6420454545454546, "no_speech_prob": 0.33300912380218506}, {"id": 311, "seek": 178368, "start": 1797.68, "end": 1805.68, "text": " and then it will go to the table and then if it's not the right version it will go to the right version", "tokens": [51064, 293, 550, 309, 486, 352, 281, 264, 3199, 293, 550, 498, 309, 311, 406, 264, 558, 3037, 309, 486, 352, 281, 264, 558, 3037, 51464], "temperature": 0.0, "avg_logprob": -0.10508546829223633, "compression_ratio": 1.6420454545454546, "no_speech_prob": 0.33300912380218506}, {"id": 312, "seek": 178368, "start": 1805.68, "end": 1807.68, "text": " so it follows it.", "tokens": [51464, 370, 309, 10002, 309, 13, 51564], "temperature": 0.0, "avg_logprob": -0.10508546829223633, "compression_ratio": 1.6420454545454546, "no_speech_prob": 0.33300912380218506}, {"id": 313, "seek": 180768, "start": 1807.68, "end": 1814.68, "text": " Okay so I think it's kind of an idea which is attached to each row and not the whole table right?", "tokens": [50364, 1033, 370, 286, 519, 309, 311, 733, 295, 364, 1558, 597, 307, 8570, 281, 1184, 5386, 293, 406, 264, 1379, 3199, 558, 30, 50714], "temperature": 0.0, "avg_logprob": -0.17588416440987292, "compression_ratio": 1.731958762886598, "no_speech_prob": 0.04659371078014374}, {"id": 314, "seek": 180768, "start": 1814.68, "end": 1819.68, "text": " Yeah the version is per row for each row.", "tokens": [50714, 865, 264, 3037, 307, 680, 5386, 337, 1184, 5386, 13, 50964], "temperature": 0.0, "avg_logprob": -0.17588416440987292, "compression_ratio": 1.731958762886598, "no_speech_prob": 0.04659371078014374}, {"id": 315, "seek": 180768, "start": 1819.68, "end": 1826.68, "text": " I think only Oracle is very different where the version is per page so you read a page", "tokens": [50964, 286, 519, 787, 25654, 307, 588, 819, 689, 264, 3037, 307, 680, 3028, 370, 291, 1401, 257, 3028, 51314], "temperature": 0.0, "avg_logprob": -0.17588416440987292, "compression_ratio": 1.731958762886598, "no_speech_prob": 0.04659371078014374}, {"id": 316, "seek": 180768, "start": 1826.68, "end": 1834.68, "text": " you see which transactions are there and then there is the information to undo the page to a previous version", "tokens": [51314, 291, 536, 597, 16856, 366, 456, 293, 550, 456, 307, 264, 1589, 281, 23779, 264, 3028, 281, 257, 3894, 3037, 51714], "temperature": 0.0, "avg_logprob": -0.17588416440987292, "compression_ratio": 1.731958762886598, "no_speech_prob": 0.04659371078014374}, {"id": 317, "seek": 183468, "start": 1834.68, "end": 1837.68, "text": " but most databases do it per row.", "tokens": [50364, 457, 881, 22380, 360, 309, 680, 5386, 13, 50514], "temperature": 0.0, "avg_logprob": -0.10726162006980494, "compression_ratio": 1.6994535519125684, "no_speech_prob": 0.00542871281504631}, {"id": 318, "seek": 183468, "start": 1837.68, "end": 1844.68, "text": " Of course it has an overhead in the row because you need enough information to follow that.", "tokens": [50514, 2720, 1164, 309, 575, 364, 19922, 294, 264, 5386, 570, 291, 643, 1547, 1589, 281, 1524, 300, 13, 50864], "temperature": 0.0, "avg_logprob": -0.10726162006980494, "compression_ratio": 1.6994535519125684, "no_speech_prob": 0.00542871281504631}, {"id": 319, "seek": 183468, "start": 1844.68, "end": 1849.68, "text": " And also the big question you keep all versions but how long?", "tokens": [50864, 400, 611, 264, 955, 1168, 291, 1066, 439, 9606, 457, 577, 938, 30, 51114], "temperature": 0.0, "avg_logprob": -0.10726162006980494, "compression_ratio": 1.6994535519125684, "no_speech_prob": 0.00542871281504631}, {"id": 320, "seek": 183468, "start": 1849.68, "end": 1854.68, "text": " Because your database will grow if you just keep all versions.", "tokens": [51114, 1436, 428, 8149, 486, 1852, 498, 291, 445, 1066, 439, 9606, 13, 51364], "temperature": 0.0, "avg_logprob": -0.10726162006980494, "compression_ratio": 1.6994535519125684, "no_speech_prob": 0.00542871281504631}, {"id": 321, "seek": 183468, "start": 1854.68, "end": 1861.68, "text": " So you need to keep all versions to cover the longest query.", "tokens": [51364, 407, 291, 643, 281, 1066, 439, 9606, 281, 2060, 264, 15438, 14581, 13, 51714], "temperature": 0.0, "avg_logprob": -0.10726162006980494, "compression_ratio": 1.6994535519125684, "no_speech_prob": 0.00542871281504631}, {"id": 322, "seek": 186168, "start": 1861.68, "end": 1870.68, "text": " If I have a long report that takes one hour and if it's read time is one hour ago I need one hour of versions", "tokens": [50364, 759, 286, 362, 257, 938, 2275, 300, 2516, 472, 1773, 293, 498, 309, 311, 1401, 565, 307, 472, 1773, 2057, 286, 643, 472, 1773, 295, 9606, 50814], "temperature": 0.0, "avg_logprob": -0.0981987730249182, "compression_ratio": 1.6632124352331605, "no_speech_prob": 0.008732090704143047}, {"id": 323, "seek": 186168, "start": 1870.68, "end": 1877.68, "text": " but after some time you need to clean that and it Postgres is the vacuum that does that.", "tokens": [50814, 457, 934, 512, 565, 291, 643, 281, 2541, 300, 293, 309, 10223, 45189, 307, 264, 14224, 300, 775, 300, 13, 51164], "temperature": 0.0, "avg_logprob": -0.0981987730249182, "compression_ratio": 1.6632124352331605, "no_speech_prob": 0.008732090704143047}, {"id": 324, "seek": 186168, "start": 1877.68, "end": 1881.68, "text": " Kind of garbage collection again it has different name in all databases", "tokens": [51164, 9242, 295, 14150, 5765, 797, 309, 575, 819, 1315, 294, 439, 22380, 51364], "temperature": 0.0, "avg_logprob": -0.0981987730249182, "compression_ratio": 1.6632124352331605, "no_speech_prob": 0.008732090704143047}, {"id": 325, "seek": 186168, "start": 1881.68, "end": 1885.68, "text": " but basically you need something that cleans that.", "tokens": [51364, 457, 1936, 291, 643, 746, 300, 16912, 300, 13, 51564], "temperature": 0.0, "avg_logprob": -0.0981987730249182, "compression_ratio": 1.6632124352331605, "no_speech_prob": 0.008732090704143047}, {"id": 326, "seek": 188568, "start": 1885.68, "end": 1891.68, "text": " If the old version was moved in a different place then the cleanup may be easy.", "tokens": [50364, 759, 264, 1331, 3037, 390, 4259, 294, 257, 819, 1081, 550, 264, 40991, 815, 312, 1858, 13, 50664], "temperature": 0.0, "avg_logprob": -0.06427570087153738, "compression_ratio": 1.783068783068783, "no_speech_prob": 0.043408047407865524}, {"id": 327, "seek": 188568, "start": 1891.68, "end": 1895.68, "text": " You have the overhead when you move it but then the cleanup may be easy.", "tokens": [50664, 509, 362, 264, 19922, 562, 291, 1286, 309, 457, 550, 264, 40991, 815, 312, 1858, 13, 50864], "temperature": 0.0, "avg_logprob": -0.06427570087153738, "compression_ratio": 1.783068783068783, "no_speech_prob": 0.043408047407865524}, {"id": 328, "seek": 188568, "start": 1895.68, "end": 1903.68, "text": " If it's done in a lazy way where the old version stays in place then you need something that cleans up.", "tokens": [50864, 759, 309, 311, 1096, 294, 257, 14847, 636, 689, 264, 1331, 3037, 10834, 294, 1081, 550, 291, 643, 746, 300, 16912, 493, 13, 51264], "temperature": 0.0, "avg_logprob": -0.06427570087153738, "compression_ratio": 1.783068783068783, "no_speech_prob": 0.043408047407865524}, {"id": 329, "seek": 188568, "start": 1903.68, "end": 1910.68, "text": " So all implementations are different and then the most difficult is the indexes.", "tokens": [51264, 407, 439, 4445, 763, 366, 819, 293, 550, 264, 881, 2252, 307, 264, 8186, 279, 13, 51614], "temperature": 0.0, "avg_logprob": -0.06427570087153738, "compression_ratio": 1.783068783068783, "no_speech_prob": 0.043408047407865524}, {"id": 330, "seek": 191068, "start": 1910.68, "end": 1919.68, "text": " The secondary indexes in Postgres all indexes are secondary indexes because the row is stored in the heap tables.", "tokens": [50364, 440, 11396, 8186, 279, 294, 10223, 45189, 439, 8186, 279, 366, 11396, 8186, 279, 570, 264, 5386, 307, 12187, 294, 264, 33591, 8020, 13, 50814], "temperature": 0.0, "avg_logprob": -0.1134106385080438, "compression_ratio": 1.6958333333333333, "no_speech_prob": 0.015536868944764137}, {"id": 331, "seek": 191068, "start": 1919.68, "end": 1924.68, "text": " They have all the entries and then when you clean up the old version you need also to clean up the index.", "tokens": [50814, 814, 362, 439, 264, 23041, 293, 550, 562, 291, 2541, 493, 264, 1331, 3037, 291, 643, 611, 281, 2541, 493, 264, 8186, 13, 51064], "temperature": 0.0, "avg_logprob": -0.1134106385080438, "compression_ratio": 1.6958333333333333, "no_speech_prob": 0.015536868944764137}, {"id": 332, "seek": 191068, "start": 1924.68, "end": 1930.68, "text": " So it's really something that is very complex to implement MVCC in databases.", "tokens": [51064, 407, 309, 311, 534, 746, 300, 307, 588, 3997, 281, 4445, 17663, 11717, 294, 22380, 13, 51364], "temperature": 0.0, "avg_logprob": -0.1134106385080438, "compression_ratio": 1.6958333333333333, "no_speech_prob": 0.015536868944764137}, {"id": 333, "seek": 191068, "start": 1930.68, "end": 1939.68, "text": " It has the big value of readers not blocking writers but it's not easy and all implementations are different.", "tokens": [51364, 467, 575, 264, 955, 2158, 295, 17147, 406, 17776, 13491, 457, 309, 311, 406, 1858, 293, 439, 4445, 763, 366, 819, 13, 51814], "temperature": 0.0, "avg_logprob": -0.1134106385080438, "compression_ratio": 1.6958333333333333, "no_speech_prob": 0.015536868944764137}, {"id": 334, "seek": 193968, "start": 1939.68, "end": 1945.68, "text": " I will not go into the detail in a few databases that I compared.", "tokens": [50364, 286, 486, 406, 352, 666, 264, 2607, 294, 257, 1326, 22380, 300, 286, 5347, 13, 50664], "temperature": 0.0, "avg_logprob": -0.18353944282009177, "compression_ratio": 1.4971098265895955, "no_speech_prob": 0.02266192063689232}, {"id": 335, "seek": 193968, "start": 1945.68, "end": 1952.68, "text": " So I already mentioned the level of versioning table rows for Postgres.", "tokens": [50664, 407, 286, 1217, 2835, 264, 1496, 295, 3037, 278, 3199, 13241, 337, 10223, 45189, 13, 51014], "temperature": 0.0, "avg_logprob": -0.18353944282009177, "compression_ratio": 1.4971098265895955, "no_speech_prob": 0.02266192063689232}, {"id": 336, "seek": 193968, "start": 1952.68, "end": 1955.68, "text": " Oracle does it per block.", "tokens": [51014, 25654, 775, 309, 680, 3461, 13, 51164], "temperature": 0.0, "avg_logprob": -0.18353944282009177, "compression_ratio": 1.4971098265895955, "no_speech_prob": 0.02266192063689232}, {"id": 337, "seek": 193968, "start": 1955.68, "end": 1959.68, "text": " For example in Ugabite we are per row but also per index.", "tokens": [51164, 1171, 1365, 294, 624, 70, 455, 642, 321, 366, 680, 5386, 457, 611, 680, 8186, 13, 51364], "temperature": 0.0, "avg_logprob": -0.18353944282009177, "compression_ratio": 1.4971098265895955, "no_speech_prob": 0.02266192063689232}, {"id": 338, "seek": 193968, "start": 1959.68, "end": 1963.68, "text": " So the index has also the versioning.", "tokens": [51364, 407, 264, 8186, 575, 611, 264, 3037, 278, 13, 51564], "temperature": 0.0, "avg_logprob": -0.18353944282009177, "compression_ratio": 1.4971098265895955, "no_speech_prob": 0.02266192063689232}, {"id": 339, "seek": 196368, "start": 1963.68, "end": 1970.68, "text": " The interface is the same as it's compatible with Postgres but the storage is completely different.", "tokens": [50364, 440, 9226, 307, 264, 912, 382, 309, 311, 18218, 365, 10223, 45189, 457, 264, 6725, 307, 2584, 819, 13, 50714], "temperature": 0.0, "avg_logprob": -0.12121537152458639, "compression_ratio": 1.5806451612903225, "no_speech_prob": 0.014726531691849232}, {"id": 340, "seek": 196368, "start": 1970.68, "end": 1977.68, "text": " So I already mentioned how it works with Postgres, happened to the heap table.", "tokens": [50714, 407, 286, 1217, 2835, 577, 309, 1985, 365, 10223, 45189, 11, 2011, 281, 264, 33591, 3199, 13, 51064], "temperature": 0.0, "avg_logprob": -0.12121537152458639, "compression_ratio": 1.5806451612903225, "no_speech_prob": 0.014726531691849232}, {"id": 341, "seek": 196368, "start": 1977.68, "end": 1981.68, "text": " Then you have to think about where are those versions.", "tokens": [51064, 1396, 291, 362, 281, 519, 466, 689, 366, 729, 9606, 13, 51264], "temperature": 0.0, "avg_logprob": -0.12121537152458639, "compression_ratio": 1.5806451612903225, "no_speech_prob": 0.014726531691849232}, {"id": 342, "seek": 196368, "start": 1981.68, "end": 1986.68, "text": " If it is happened then the different versions are scattered.", "tokens": [51264, 759, 309, 307, 2011, 550, 264, 819, 9606, 366, 21986, 13, 51514], "temperature": 0.0, "avg_logprob": -0.12121537152458639, "compression_ratio": 1.5806451612903225, "no_speech_prob": 0.014726531691849232}, {"id": 343, "seek": 198668, "start": 1986.68, "end": 1996.68, "text": " There are some other implementations where all versions of a key, the primary key are together.", "tokens": [50364, 821, 366, 512, 661, 4445, 763, 689, 439, 9606, 295, 257, 2141, 11, 264, 6194, 2141, 366, 1214, 13, 50864], "temperature": 0.0, "avg_logprob": -0.14592394110274642, "compression_ratio": 1.553921568627451, "no_speech_prob": 0.05550280213356018}, {"id": 344, "seek": 198668, "start": 1996.68, "end": 2003.68, "text": " For example SQL Server implemented MVCC very late compared to the other databases.", "tokens": [50864, 1171, 1365, 19200, 25684, 12270, 17663, 11717, 588, 3469, 5347, 281, 264, 661, 22380, 13, 51214], "temperature": 0.0, "avg_logprob": -0.14592394110274642, "compression_ratio": 1.553921568627451, "no_speech_prob": 0.05550280213356018}, {"id": 345, "seek": 198668, "start": 2003.68, "end": 2011.68, "text": " They move the old version to another database where initially the time DB now they have a specific storage for that.", "tokens": [51214, 814, 1286, 264, 1331, 3037, 281, 1071, 8149, 689, 9105, 264, 565, 26754, 586, 436, 362, 257, 2685, 6725, 337, 300, 13, 51614], "temperature": 0.0, "avg_logprob": -0.14592394110274642, "compression_ratio": 1.553921568627451, "no_speech_prob": 0.05550280213356018}, {"id": 346, "seek": 198668, "start": 2011.68, "end": 2014.68, "text": " But it's all per key.", "tokens": [51614, 583, 309, 311, 439, 680, 2141, 13, 51764], "temperature": 0.0, "avg_logprob": -0.14592394110274642, "compression_ratio": 1.553921568627451, "no_speech_prob": 0.05550280213356018}, {"id": 347, "seek": 201468, "start": 2014.68, "end": 2018.68, "text": " MySQL is also very special. MySQL doesn't have heap tables.", "tokens": [50364, 1222, 39934, 307, 611, 588, 2121, 13, 1222, 39934, 1177, 380, 362, 33591, 8020, 13, 50564], "temperature": 0.0, "avg_logprob": -0.13398384518093534, "compression_ratio": 1.5571428571428572, "no_speech_prob": 0.02352435700595379}, {"id": 348, "seek": 201468, "start": 2018.68, "end": 2021.68, "text": " It's only in the index organized table.", "tokens": [50564, 467, 311, 787, 294, 264, 8186, 9983, 3199, 13, 50714], "temperature": 0.0, "avg_logprob": -0.13398384518093534, "compression_ratio": 1.5571428571428572, "no_speech_prob": 0.02352435700595379}, {"id": 349, "seek": 201468, "start": 2021.68, "end": 2024.68, "text": " So the rows stored in the primary key.", "tokens": [50714, 407, 264, 13241, 12187, 294, 264, 6194, 2141, 13, 50864], "temperature": 0.0, "avg_logprob": -0.13398384518093534, "compression_ratio": 1.5571428571428572, "no_speech_prob": 0.02352435700595379}, {"id": 350, "seek": 201468, "start": 2024.68, "end": 2026.68, "text": " And they have two logs.", "tokens": [50864, 400, 436, 362, 732, 20820, 13, 50964], "temperature": 0.0, "avg_logprob": -0.13398384518093534, "compression_ratio": 1.5571428571428572, "no_speech_prob": 0.02352435700595379}, {"id": 351, "seek": 201468, "start": 2026.68, "end": 2031.68, "text": " They have an insert log which you don't really care when you read from the past.", "tokens": [50964, 814, 362, 364, 8969, 3565, 597, 291, 500, 380, 534, 1127, 562, 291, 1401, 490, 264, 1791, 13, 51214], "temperature": 0.0, "avg_logprob": -0.13398384518093534, "compression_ratio": 1.5571428571428572, "no_speech_prob": 0.02352435700595379}, {"id": 352, "seek": 201468, "start": 2031.68, "end": 2038.68, "text": " You just ignore the new insert but they have also a log for the updates or deletes.", "tokens": [51214, 509, 445, 11200, 264, 777, 8969, 457, 436, 362, 611, 257, 3565, 337, 264, 9205, 420, 1103, 37996, 13, 51564], "temperature": 0.0, "avg_logprob": -0.13398384518093534, "compression_ratio": 1.5571428571428572, "no_speech_prob": 0.02352435700595379}, {"id": 353, "seek": 203868, "start": 2038.68, "end": 2046.68, "text": " If you delete it, it's just marked like an update saying it is the end of lifecycle of the whole.", "tokens": [50364, 759, 291, 12097, 309, 11, 309, 311, 445, 12658, 411, 364, 5623, 1566, 309, 307, 264, 917, 295, 45722, 295, 264, 1379, 13, 50764], "temperature": 0.0, "avg_logprob": -0.23497696445412833, "compression_ratio": 1.3795180722891567, "no_speech_prob": 0.07105600088834763}, {"id": 354, "seek": 203868, "start": 2046.68, "end": 2049.6800000000003, "text": " So they have another log for that.", "tokens": [50764, 407, 436, 362, 1071, 3565, 337, 300, 13, 50914], "temperature": 0.0, "avg_logprob": -0.23497696445412833, "compression_ratio": 1.3795180722891567, "no_speech_prob": 0.07105600088834763}, {"id": 355, "seek": 203868, "start": 2049.6800000000003, "end": 2051.6800000000003, "text": " Yeah, question?", "tokens": [50914, 865, 11, 1168, 30, 51014], "temperature": 0.0, "avg_logprob": -0.23497696445412833, "compression_ratio": 1.3795180722891567, "no_speech_prob": 0.07105600088834763}, {"id": 356, "seek": 203868, "start": 2058.6800000000003, "end": 2062.6800000000003, "text": " It has only one log, not two logs. It has different types.", "tokens": [51364, 467, 575, 787, 472, 3565, 11, 406, 732, 20820, 13, 467, 575, 819, 3467, 13, 51564], "temperature": 0.0, "avg_logprob": -0.23497696445412833, "compression_ratio": 1.3795180722891567, "no_speech_prob": 0.07105600088834763}, {"id": 357, "seek": 203868, "start": 2062.6800000000003, "end": 2064.6800000000003, "text": " In MySQL?", "tokens": [51564, 682, 1222, 39934, 30, 51664], "temperature": 0.0, "avg_logprob": -0.23497696445412833, "compression_ratio": 1.3795180722891567, "no_speech_prob": 0.07105600088834763}, {"id": 358, "seek": 203868, "start": 2064.6800000000003, "end": 2065.6800000000003, "text": " In Unodebs.", "tokens": [51664, 682, 1156, 1429, 929, 13, 51714], "temperature": 0.0, "avg_logprob": -0.23497696445412833, "compression_ratio": 1.3795180722891567, "no_speech_prob": 0.07105600088834763}, {"id": 359, "seek": 206568, "start": 2065.68, "end": 2068.68, "text": " Yeah, okay. Yeah, thanks.", "tokens": [50364, 865, 11, 1392, 13, 865, 11, 3231, 13, 50514], "temperature": 0.0, "avg_logprob": -0.28568164954024755, "compression_ratio": 1.507936507936508, "no_speech_prob": 0.01310088112950325}, {"id": 360, "seek": 206568, "start": 2068.68, "end": 2070.68, "text": " Only one log.", "tokens": [50514, 5686, 472, 3565, 13, 50614], "temperature": 0.0, "avg_logprob": -0.28568164954024755, "compression_ratio": 1.507936507936508, "no_speech_prob": 0.01310088112950325}, {"id": 361, "seek": 206568, "start": 2070.68, "end": 2072.68, "text": " Those are very different.", "tokens": [50614, 3950, 366, 588, 819, 13, 50714], "temperature": 0.0, "avg_logprob": -0.28568164954024755, "compression_ratio": 1.507936507936508, "no_speech_prob": 0.01310088112950325}, {"id": 362, "seek": 206568, "start": 2072.68, "end": 2077.68, "text": " I know quite well Postgres, the Wacol and of course, you Gabbite.", "tokens": [50714, 286, 458, 1596, 731, 10223, 45189, 11, 264, 343, 326, 401, 293, 295, 1164, 11, 291, 460, 10797, 642, 13, 50964], "temperature": 0.0, "avg_logprob": -0.28568164954024755, "compression_ratio": 1.507936507936508, "no_speech_prob": 0.01310088112950325}, {"id": 363, "seek": 206568, "start": 2077.68, "end": 2079.68, "text": " I know a bit less those.", "tokens": [50964, 286, 458, 257, 857, 1570, 729, 13, 51064], "temperature": 0.0, "avg_logprob": -0.28568164954024755, "compression_ratio": 1.507936507936508, "no_speech_prob": 0.01310088112950325}, {"id": 364, "seek": 206568, "start": 2079.68, "end": 2084.68, "text": " The documentation is also not very...", "tokens": [51064, 440, 14333, 307, 611, 406, 588, 485, 51314], "temperature": 0.0, "avg_logprob": -0.28568164954024755, "compression_ratio": 1.507936507936508, "no_speech_prob": 0.01310088112950325}, {"id": 365, "seek": 206568, "start": 2084.68, "end": 2088.68, "text": " The SQL Server implementation, there are not a lot of documentation about it.", "tokens": [51314, 440, 19200, 25684, 11420, 11, 456, 366, 406, 257, 688, 295, 14333, 466, 309, 13, 51514], "temperature": 0.0, "avg_logprob": -0.28568164954024755, "compression_ratio": 1.507936507936508, "no_speech_prob": 0.01310088112950325}, {"id": 366, "seek": 206568, "start": 2088.68, "end": 2090.68, "text": " MySQL, yeah.", "tokens": [51514, 1222, 39934, 11, 1338, 13, 51614], "temperature": 0.0, "avg_logprob": -0.28568164954024755, "compression_ratio": 1.507936507936508, "no_speech_prob": 0.01310088112950325}, {"id": 367, "seek": 209068, "start": 2090.68, "end": 2100.68, "text": " But basically, they all have also garbage collection and the main difference, the choice of the databases.", "tokens": [50364, 583, 1936, 11, 436, 439, 362, 611, 14150, 5765, 293, 264, 2135, 2649, 11, 264, 3922, 295, 264, 22380, 13, 50864], "temperature": 0.0, "avg_logprob": -0.12120530055119441, "compression_ratio": 1.5055555555555555, "no_speech_prob": 0.01326110027730465}, {"id": 368, "seek": 209068, "start": 2100.68, "end": 2107.68, "text": " I said that the retention of version must cover the longest query.", "tokens": [50864, 286, 848, 300, 264, 22871, 295, 3037, 1633, 2060, 264, 15438, 14581, 13, 51214], "temperature": 0.0, "avg_logprob": -0.12120530055119441, "compression_ratio": 1.5055555555555555, "no_speech_prob": 0.01326110027730465}, {"id": 369, "seek": 209068, "start": 2107.68, "end": 2117.68, "text": " Some databases, for example, Wacol, doesn't care after a while not to have too many old versions.", "tokens": [51214, 2188, 22380, 11, 337, 1365, 11, 343, 326, 401, 11, 1177, 380, 1127, 934, 257, 1339, 406, 281, 362, 886, 867, 1331, 9606, 13, 51714], "temperature": 0.0, "avg_logprob": -0.12120530055119441, "compression_ratio": 1.5055555555555555, "no_speech_prob": 0.01326110027730465}, {"id": 370, "seek": 211768, "start": 2117.68, "end": 2121.68, "text": " So it will remove it. You set the retention that you do.", "tokens": [50364, 407, 309, 486, 4159, 309, 13, 509, 992, 264, 22871, 300, 291, 360, 13, 50564], "temperature": 0.0, "avg_logprob": -0.13228363565879292, "compression_ratio": 1.6294820717131475, "no_speech_prob": 0.08281683176755905}, {"id": 371, "seek": 211768, "start": 2121.68, "end": 2127.68, "text": " But that means that a long query may encounter this snapshot to old error saying,", "tokens": [50564, 583, 300, 1355, 300, 257, 938, 14581, 815, 8593, 341, 30163, 281, 1331, 6713, 1566, 11, 50864], "temperature": 0.0, "avg_logprob": -0.13228363565879292, "compression_ratio": 1.6294820717131475, "no_speech_prob": 0.08281683176755905}, {"id": 372, "seek": 211768, "start": 2127.68, "end": 2130.68, "text": " oh, I cannot rebuild the read time that you ask for.", "tokens": [50864, 1954, 11, 286, 2644, 16877, 264, 1401, 565, 300, 291, 1029, 337, 13, 51014], "temperature": 0.0, "avg_logprob": -0.13228363565879292, "compression_ratio": 1.6294820717131475, "no_speech_prob": 0.08281683176755905}, {"id": 373, "seek": 211768, "start": 2130.68, "end": 2138.68, "text": " Other databases will just don't do garbage collection, render longer running queries.", "tokens": [51014, 5358, 22380, 486, 445, 500, 380, 360, 14150, 5765, 11, 15529, 2854, 2614, 24109, 13, 51414], "temperature": 0.0, "avg_logprob": -0.13228363565879292, "compression_ratio": 1.6294820717131475, "no_speech_prob": 0.08281683176755905}, {"id": 374, "seek": 211768, "start": 2138.68, "end": 2146.68, "text": " For example, in Postgres, if you have a long running query, vacuum will not be able to clean up everything that it has to clean up.", "tokens": [51414, 1171, 1365, 11, 294, 10223, 45189, 11, 498, 291, 362, 257, 938, 2614, 14581, 11, 14224, 486, 406, 312, 1075, 281, 2541, 493, 1203, 300, 309, 575, 281, 2541, 493, 13, 51814], "temperature": 0.0, "avg_logprob": -0.13228363565879292, "compression_ratio": 1.6294820717131475, "no_speech_prob": 0.08281683176755905}, {"id": 375, "seek": 214668, "start": 2146.68, "end": 2149.68, "text": " And that can be problematic when you read from a standby.", "tokens": [50364, 400, 300, 393, 312, 19011, 562, 291, 1401, 490, 257, 50170, 13, 50514], "temperature": 0.0, "avg_logprob": -0.17984188519991362, "compression_ratio": 1.6269430051813472, "no_speech_prob": 0.018679389730095863}, {"id": 376, "seek": 214668, "start": 2149.68, "end": 2154.68, "text": " And that can be different. You can have the same equivalent of error.", "tokens": [50514, 400, 300, 393, 312, 819, 13, 509, 393, 362, 264, 912, 10344, 295, 6713, 13, 50764], "temperature": 0.0, "avg_logprob": -0.17984188519991362, "compression_ratio": 1.6269430051813472, "no_speech_prob": 0.018679389730095863}, {"id": 377, "seek": 214668, "start": 2154.68, "end": 2156.68, "text": " I'm not going to go into all detail.", "tokens": [50764, 286, 478, 406, 516, 281, 352, 666, 439, 2607, 13, 50864], "temperature": 0.0, "avg_logprob": -0.17984188519991362, "compression_ratio": 1.6269430051813472, "no_speech_prob": 0.018679389730095863}, {"id": 378, "seek": 214668, "start": 2156.68, "end": 2159.68, "text": " The most important is that you understand the different concepts.", "tokens": [50864, 440, 881, 1021, 307, 300, 291, 1223, 264, 819, 10392, 13, 51014], "temperature": 0.0, "avg_logprob": -0.17984188519991362, "compression_ratio": 1.6269430051813472, "no_speech_prob": 0.018679389730095863}, {"id": 379, "seek": 214668, "start": 2159.68, "end": 2161.68, "text": " Those are different.", "tokens": [51014, 3950, 366, 819, 13, 51114], "temperature": 0.0, "avg_logprob": -0.17984188519991362, "compression_ratio": 1.6269430051813472, "no_speech_prob": 0.018679389730095863}, {"id": 380, "seek": 214668, "start": 2161.68, "end": 2170.68, "text": " Those are pros and cons, the overhead on different operations.", "tokens": [51114, 3950, 366, 6267, 293, 1014, 11, 264, 19922, 322, 819, 7705, 13, 51564], "temperature": 0.0, "avg_logprob": -0.17984188519991362, "compression_ratio": 1.6269430051813472, "no_speech_prob": 0.018679389730095863}, {"id": 381, "seek": 217068, "start": 2170.68, "end": 2177.68, "text": " One that is very nice with Postgres because you have all the old version in place.", "tokens": [50364, 1485, 300, 307, 588, 1481, 365, 10223, 45189, 570, 291, 362, 439, 264, 1331, 3037, 294, 1081, 13, 50714], "temperature": 0.0, "avg_logprob": -0.12416771636612114, "compression_ratio": 1.642512077294686, "no_speech_prob": 0.038871586322784424}, {"id": 382, "seek": 217068, "start": 2177.68, "end": 2180.68, "text": " Rollback is very fast.", "tokens": [50714, 9926, 3207, 307, 588, 2370, 13, 50864], "temperature": 0.0, "avg_logprob": -0.12416771636612114, "compression_ratio": 1.642512077294686, "no_speech_prob": 0.038871586322784424}, {"id": 383, "seek": 217068, "start": 2180.68, "end": 2186.68, "text": " Usually don't really care about how fast is a rollback in normal operation.", "tokens": [50864, 11419, 500, 380, 534, 1127, 466, 577, 2370, 307, 257, 3373, 3207, 294, 2710, 6916, 13, 51164], "temperature": 0.0, "avg_logprob": -0.12416771636612114, "compression_ratio": 1.642512077294686, "no_speech_prob": 0.038871586322784424}, {"id": 384, "seek": 217068, "start": 2186.68, "end": 2194.68, "text": " But when you have a crash recovery, you need to rollback the transaction that were not committed at the time of the crash.", "tokens": [51164, 583, 562, 291, 362, 257, 8252, 8597, 11, 291, 643, 281, 3373, 3207, 264, 14425, 300, 645, 406, 7784, 412, 264, 565, 295, 264, 8252, 13, 51564], "temperature": 0.0, "avg_logprob": -0.12416771636612114, "compression_ratio": 1.642512077294686, "no_speech_prob": 0.038871586322784424}, {"id": 385, "seek": 217068, "start": 2194.68, "end": 2197.68, "text": " So this is really fast in Postgres.", "tokens": [51564, 407, 341, 307, 534, 2370, 294, 10223, 45189, 13, 51714], "temperature": 0.0, "avg_logprob": -0.12416771636612114, "compression_ratio": 1.642512077294686, "no_speech_prob": 0.038871586322784424}, {"id": 386, "seek": 219768, "start": 2197.68, "end": 2205.68, "text": " But in Postgres, keeping the old version in place, you have all these problems with bloat and vacuum that you have to manage.", "tokens": [50364, 583, 294, 10223, 45189, 11, 5145, 264, 1331, 3037, 294, 1081, 11, 291, 362, 439, 613, 2740, 365, 1749, 267, 293, 14224, 300, 291, 362, 281, 3067, 13, 50764], "temperature": 0.0, "avg_logprob": -0.08524436512212644, "compression_ratio": 1.751131221719457, "no_speech_prob": 0.014589587226510048}, {"id": 387, "seek": 219768, "start": 2205.68, "end": 2214.68, "text": " In other databases, the problem of stopping garbage collection or not when you have long running query,", "tokens": [50764, 682, 661, 22380, 11, 264, 1154, 295, 12767, 14150, 5765, 420, 406, 562, 291, 362, 938, 2614, 14581, 11, 51214], "temperature": 0.0, "avg_logprob": -0.08524436512212644, "compression_ratio": 1.751131221719457, "no_speech_prob": 0.014589587226510048}, {"id": 388, "seek": 219768, "start": 2214.68, "end": 2218.68, "text": " do you want to give priority to those queries that they can finish?", "tokens": [51214, 360, 291, 528, 281, 976, 9365, 281, 729, 24109, 300, 436, 393, 2413, 30, 51414], "temperature": 0.0, "avg_logprob": -0.08524436512212644, "compression_ratio": 1.751131221719457, "no_speech_prob": 0.014589587226510048}, {"id": 389, "seek": 219768, "start": 2218.68, "end": 2222.68, "text": " Or do you want to give priority to the garbage collection that maintains the performance?", "tokens": [51414, 1610, 360, 291, 528, 281, 976, 9365, 281, 264, 14150, 5765, 300, 33385, 264, 3389, 30, 51614], "temperature": 0.0, "avg_logprob": -0.08524436512212644, "compression_ratio": 1.751131221719457, "no_speech_prob": 0.014589587226510048}, {"id": 390, "seek": 222268, "start": 2222.68, "end": 2227.68, "text": " So those are different pros and cons that we have seen.", "tokens": [50364, 407, 729, 366, 819, 6267, 293, 1014, 300, 321, 362, 1612, 13, 50614], "temperature": 0.0, "avg_logprob": -0.09662775246493788, "compression_ratio": 1.675392670157068, "no_speech_prob": 0.10351606458425522}, {"id": 391, "seek": 222268, "start": 2227.68, "end": 2230.68, "text": " Important to know what is the default isolation level.", "tokens": [50614, 42908, 281, 458, 437, 307, 264, 7576, 16001, 1496, 13, 50764], "temperature": 0.0, "avg_logprob": -0.09662775246493788, "compression_ratio": 1.675392670157068, "no_speech_prob": 0.10351606458425522}, {"id": 392, "seek": 222268, "start": 2230.68, "end": 2233.68, "text": " Important to know because most people do not change it.", "tokens": [50764, 42908, 281, 458, 570, 881, 561, 360, 406, 1319, 309, 13, 50914], "temperature": 0.0, "avg_logprob": -0.09662775246493788, "compression_ratio": 1.675392670157068, "no_speech_prob": 0.10351606458425522}, {"id": 393, "seek": 222268, "start": 2233.68, "end": 2234.68, "text": " They use the default.", "tokens": [50914, 814, 764, 264, 7576, 13, 50964], "temperature": 0.0, "avg_logprob": -0.09662775246493788, "compression_ratio": 1.675392670157068, "no_speech_prob": 0.10351606458425522}, {"id": 394, "seek": 222268, "start": 2234.68, "end": 2237.68, "text": " So at least you should know what you are using.", "tokens": [50964, 407, 412, 1935, 291, 820, 458, 437, 291, 366, 1228, 13, 51114], "temperature": 0.0, "avg_logprob": -0.09662775246493788, "compression_ratio": 1.675392670157068, "no_speech_prob": 0.10351606458425522}, {"id": 395, "seek": 222268, "start": 2237.68, "end": 2241.68, "text": " In Postgres, it is the read committed isolation level.", "tokens": [51114, 682, 10223, 45189, 11, 309, 307, 264, 1401, 7784, 16001, 1496, 13, 51314], "temperature": 0.0, "avg_logprob": -0.09662775246493788, "compression_ratio": 1.675392670157068, "no_speech_prob": 0.10351606458425522}, {"id": 396, "seek": 222268, "start": 2241.68, "end": 2244.68, "text": " The same for many databases.", "tokens": [51314, 440, 912, 337, 867, 22380, 13, 51464], "temperature": 0.0, "avg_logprob": -0.09662775246493788, "compression_ratio": 1.675392670157068, "no_speech_prob": 0.10351606458425522}, {"id": 397, "seek": 224468, "start": 2244.68, "end": 2246.68, "text": " And mostly for performance reasons.", "tokens": [50364, 400, 5240, 337, 3389, 4112, 13, 50464], "temperature": 0.0, "avg_logprob": -0.10959955417748654, "compression_ratio": 1.483695652173913, "no_speech_prob": 0.08166975528001785}, {"id": 398, "seek": 224468, "start": 2246.68, "end": 2256.68, "text": " If serializable was easy and fast, probably everybody would use it, but not the case.", "tokens": [50464, 759, 17436, 22395, 390, 1858, 293, 2370, 11, 1391, 2201, 576, 764, 309, 11, 457, 406, 264, 1389, 13, 50964], "temperature": 0.0, "avg_logprob": -0.10959955417748654, "compression_ratio": 1.483695652173913, "no_speech_prob": 0.08166975528001785}, {"id": 399, "seek": 224468, "start": 2256.68, "end": 2266.68, "text": " And even if they all use read committed, they have a different behavior.", "tokens": [50964, 400, 754, 498, 436, 439, 764, 1401, 7784, 11, 436, 362, 257, 819, 5223, 13, 51464], "temperature": 0.0, "avg_logprob": -0.10959955417748654, "compression_ratio": 1.483695652173913, "no_speech_prob": 0.08166975528001785}, {"id": 400, "seek": 224468, "start": 2266.68, "end": 2273.68, "text": " I said that at some point it has to detect conflicts between reads and writes.", "tokens": [51464, 286, 848, 300, 412, 512, 935, 309, 575, 281, 5531, 19807, 1296, 15700, 293, 13657, 13, 51814], "temperature": 0.0, "avg_logprob": -0.10959955417748654, "compression_ratio": 1.483695652173913, "no_speech_prob": 0.08166975528001785}, {"id": 401, "seek": 227368, "start": 2273.68, "end": 2280.68, "text": " And when it detects a conflict, the big advantage of read committed, and I will explain that later,", "tokens": [50364, 400, 562, 309, 5531, 82, 257, 6596, 11, 264, 955, 5002, 295, 1401, 7784, 11, 293, 286, 486, 2903, 300, 1780, 11, 50714], "temperature": 0.0, "avg_logprob": -0.0918070137500763, "compression_ratio": 1.6581632653061225, "no_speech_prob": 0.006631054449826479}, {"id": 402, "seek": 227368, "start": 2280.68, "end": 2288.68, "text": " the big advantage is that when there is a conflict, in some cases the database can restart the statement", "tokens": [50714, 264, 955, 5002, 307, 300, 562, 456, 307, 257, 6596, 11, 294, 512, 3331, 264, 8149, 393, 21022, 264, 5629, 51114], "temperature": 0.0, "avg_logprob": -0.0918070137500763, "compression_ratio": 1.6581632653061225, "no_speech_prob": 0.006631054449826479}, {"id": 403, "seek": 227368, "start": 2288.68, "end": 2290.68, "text": " to a newer read time.", "tokens": [51114, 281, 257, 17628, 1401, 565, 13, 51214], "temperature": 0.0, "avg_logprob": -0.0918070137500763, "compression_ratio": 1.6581632653061225, "no_speech_prob": 0.006631054449826479}, {"id": 404, "seek": 227368, "start": 2290.68, "end": 2298.68, "text": " So from the application point of view, you just wait a bit more and it is managed by the database.", "tokens": [51214, 407, 490, 264, 3861, 935, 295, 1910, 11, 291, 445, 1699, 257, 857, 544, 293, 309, 307, 6453, 538, 264, 8149, 13, 51614], "temperature": 0.0, "avg_logprob": -0.0918070137500763, "compression_ratio": 1.6581632653061225, "no_speech_prob": 0.006631054449826479}, {"id": 405, "seek": 229868, "start": 2298.68, "end": 2303.68, "text": " Postgres does not restart the statement, but it can reread a row,", "tokens": [50364, 10223, 45189, 775, 406, 21022, 264, 5629, 11, 457, 309, 393, 46453, 345, 257, 5386, 11, 50614], "temperature": 0.0, "avg_logprob": -0.11880707740783691, "compression_ratio": 1.5222222222222221, "no_speech_prob": 0.02882828563451767}, {"id": 406, "seek": 229868, "start": 2303.68, "end": 2315.68, "text": " which may show some inconsistency because it can read a row from a different read time.", "tokens": [50614, 597, 815, 855, 512, 22039, 468, 3020, 570, 309, 393, 1401, 257, 5386, 490, 257, 819, 1401, 565, 13, 51214], "temperature": 0.0, "avg_logprob": -0.11880707740783691, "compression_ratio": 1.5222222222222221, "no_speech_prob": 0.02882828563451767}, {"id": 407, "seek": 229868, "start": 2315.68, "end": 2319.68, "text": " In my SQL, the default is repeatable read.", "tokens": [51214, 682, 452, 19200, 11, 264, 7576, 307, 7149, 712, 1401, 13, 51414], "temperature": 0.0, "avg_logprob": -0.11880707740783691, "compression_ratio": 1.5222222222222221, "no_speech_prob": 0.02882828563451767}, {"id": 408, "seek": 229868, "start": 2319.68, "end": 2326.68, "text": " We have also some strange things that may happen and look like inconsistency.", "tokens": [51414, 492, 362, 611, 512, 5861, 721, 300, 815, 1051, 293, 574, 411, 22039, 468, 3020, 13, 51764], "temperature": 0.0, "avg_logprob": -0.11880707740783691, "compression_ratio": 1.5222222222222221, "no_speech_prob": 0.02882828563451767}, {"id": 409, "seek": 232668, "start": 2326.68, "end": 2330.68, "text": " Some operations are not really isolated.", "tokens": [50364, 2188, 7705, 366, 406, 534, 14621, 13, 50564], "temperature": 0.0, "avg_logprob": -0.16174756664119355, "compression_ratio": 1.594871794871795, "no_speech_prob": 0.02489696443080902}, {"id": 410, "seek": 232668, "start": 2330.68, "end": 2332.68, "text": " The serializable.", "tokens": [50564, 440, 17436, 22395, 13, 50664], "temperature": 0.0, "avg_logprob": -0.16174756664119355, "compression_ratio": 1.594871794871795, "no_speech_prob": 0.02489696443080902}, {"id": 411, "seek": 232668, "start": 2332.68, "end": 2336.68, "text": " Very few databases use serializable by default.", "tokens": [50664, 4372, 1326, 22380, 764, 17436, 22395, 538, 7576, 13, 50864], "temperature": 0.0, "avg_logprob": -0.16174756664119355, "compression_ratio": 1.594871794871795, "no_speech_prob": 0.02489696443080902}, {"id": 412, "seek": 232668, "start": 2336.68, "end": 2342.68, "text": " A few distributed SQL databases use it, but for example,", "tokens": [50864, 316, 1326, 12631, 19200, 22380, 764, 309, 11, 457, 337, 1365, 11, 51164], "temperature": 0.0, "avg_logprob": -0.16174756664119355, "compression_ratio": 1.594871794871795, "no_speech_prob": 0.02489696443080902}, {"id": 413, "seek": 232668, "start": 2342.68, "end": 2344.68, "text": " co-crochet is implementing read committed.", "tokens": [51164, 598, 12, 23401, 36433, 307, 18114, 1401, 7784, 13, 51264], "temperature": 0.0, "avg_logprob": -0.16174756664119355, "compression_ratio": 1.594871794871795, "no_speech_prob": 0.02489696443080902}, {"id": 414, "seek": 232668, "start": 2344.68, "end": 2354.68, "text": " Mostly to be compatible with existing applications and because serializable has to look too many things.", "tokens": [51264, 29035, 281, 312, 18218, 365, 6741, 5821, 293, 570, 17436, 22395, 575, 281, 574, 886, 867, 721, 13, 51764], "temperature": 0.0, "avg_logprob": -0.16174756664119355, "compression_ratio": 1.594871794871795, "no_speech_prob": 0.02489696443080902}, {"id": 415, "seek": 235468, "start": 2354.68, "end": 2358.68, "text": " So I mentioned the read restart.", "tokens": [50364, 407, 286, 2835, 264, 1401, 21022, 13, 50564], "temperature": 0.0, "avg_logprob": -0.12347510163213166, "compression_ratio": 1.7401129943502824, "no_speech_prob": 0.01314423605799675}, {"id": 416, "seek": 235468, "start": 2358.68, "end": 2367.68, "text": " When, so in read committed, what is different with read committed is that the contract with the developer", "tokens": [50564, 1133, 11, 370, 294, 1401, 7784, 11, 437, 307, 819, 365, 1401, 7784, 307, 300, 264, 4364, 365, 264, 10754, 51014], "temperature": 0.0, "avg_logprob": -0.12347510163213166, "compression_ratio": 1.7401129943502824, "no_speech_prob": 0.01314423605799675}, {"id": 417, "seek": 235468, "start": 2367.68, "end": 2374.68, "text": " is that the read time can change during a transaction for each statement.", "tokens": [51014, 307, 300, 264, 1401, 565, 393, 1319, 1830, 257, 14425, 337, 1184, 5629, 13, 51364], "temperature": 0.0, "avg_logprob": -0.12347510163213166, "compression_ratio": 1.7401129943502824, "no_speech_prob": 0.01314423605799675}, {"id": 418, "seek": 235468, "start": 2374.68, "end": 2380.68, "text": " If I am in isolation levels above, the read time is also the time where the transaction starts,", "tokens": [51364, 759, 286, 669, 294, 16001, 4358, 3673, 11, 264, 1401, 565, 307, 611, 264, 565, 689, 264, 14425, 3719, 11, 51664], "temperature": 0.0, "avg_logprob": -0.12347510163213166, "compression_ratio": 1.7401129943502824, "no_speech_prob": 0.01314423605799675}, {"id": 419, "seek": 238068, "start": 2380.68, "end": 2382.68, "text": " the begin transaction.", "tokens": [50364, 264, 1841, 14425, 13, 50464], "temperature": 0.0, "avg_logprob": -0.11588399069649832, "compression_ratio": 1.6045197740112995, "no_speech_prob": 0.10050778836011887}, {"id": 420, "seek": 238068, "start": 2382.68, "end": 2386.68, "text": " With read committed, each statement has its own read time,", "tokens": [50464, 2022, 1401, 7784, 11, 1184, 5629, 575, 1080, 1065, 1401, 565, 11, 50664], "temperature": 0.0, "avg_logprob": -0.11588399069649832, "compression_ratio": 1.6045197740112995, "no_speech_prob": 0.10050778836011887}, {"id": 421, "seek": 238068, "start": 2386.68, "end": 2394.68, "text": " which may bring more anomalies if you rely on what has been read before.", "tokens": [50664, 597, 815, 1565, 544, 24769, 48872, 498, 291, 10687, 322, 437, 575, 668, 1401, 949, 13, 51064], "temperature": 0.0, "avg_logprob": -0.11588399069649832, "compression_ratio": 1.6045197740112995, "no_speech_prob": 0.10050778836011887}, {"id": 422, "seek": 238068, "start": 2394.68, "end": 2400.68, "text": " But the big advantage of it, because the read time can change during a transaction,", "tokens": [51064, 583, 264, 955, 5002, 295, 309, 11, 570, 264, 1401, 565, 393, 1319, 1830, 257, 14425, 11, 51364], "temperature": 0.0, "avg_logprob": -0.11588399069649832, "compression_ratio": 1.6045197740112995, "no_speech_prob": 0.10050778836011887}, {"id": 423, "seek": 238068, "start": 2400.68, "end": 2405.68, "text": " if a conflict is detected within a statement,", "tokens": [51364, 498, 257, 6596, 307, 21896, 1951, 257, 5629, 11, 51614], "temperature": 0.0, "avg_logprob": -0.11588399069649832, "compression_ratio": 1.6045197740112995, "no_speech_prob": 0.10050778836011887}, {"id": 424, "seek": 240568, "start": 2405.68, "end": 2411.68, "text": " the database may be able to restart it as of a newer read time.", "tokens": [50364, 264, 8149, 815, 312, 1075, 281, 21022, 309, 382, 295, 257, 17628, 1401, 565, 13, 50664], "temperature": 0.0, "avg_logprob": -0.06613281591614681, "compression_ratio": 1.639344262295082, "no_speech_prob": 0.03368305787444115}, {"id": 425, "seek": 240568, "start": 2411.68, "end": 2417.68, "text": " You cannot do that for the whole transaction because you don't know what the application did before.", "tokens": [50664, 509, 2644, 360, 300, 337, 264, 1379, 14425, 570, 291, 500, 380, 458, 437, 264, 3861, 630, 949, 13, 50964], "temperature": 0.0, "avg_logprob": -0.06613281591614681, "compression_ratio": 1.639344262295082, "no_speech_prob": 0.03368305787444115}, {"id": 426, "seek": 240568, "start": 2417.68, "end": 2421.68, "text": " Maybe the transaction did something not transactional.", "tokens": [50964, 2704, 264, 14425, 630, 746, 406, 46688, 1966, 13, 51164], "temperature": 0.0, "avg_logprob": -0.06613281591614681, "compression_ratio": 1.639344262295082, "no_speech_prob": 0.03368305787444115}, {"id": 427, "seek": 240568, "start": 2421.68, "end": 2431.68, "text": " Some databases restart the read in read committed when they encounter a problem.", "tokens": [51164, 2188, 22380, 21022, 264, 1401, 294, 1401, 7784, 562, 436, 8593, 257, 1154, 13, 51664], "temperature": 0.0, "avg_logprob": -0.06613281591614681, "compression_ratio": 1.639344262295082, "no_speech_prob": 0.03368305787444115}, {"id": 428, "seek": 243168, "start": 2431.68, "end": 2436.68, "text": " Postgres doesn't. Postgres just rereads the new whole.", "tokens": [50364, 10223, 45189, 1177, 380, 13, 10223, 45189, 445, 46453, 5834, 264, 777, 1379, 13, 50614], "temperature": 0.0, "avg_logprob": -0.24817284872365553, "compression_ratio": 1.7028571428571428, "no_speech_prob": 0.4696407616138458}, {"id": 429, "seek": 243168, "start": 2436.68, "end": 2441.68, "text": " I think, I'm not sure, I think the main reason is that to restart a statement,", "tokens": [50614, 286, 519, 11, 286, 478, 406, 988, 11, 286, 519, 264, 2135, 1778, 307, 300, 281, 21022, 257, 5629, 11, 50864], "temperature": 0.0, "avg_logprob": -0.24817284872365553, "compression_ratio": 1.7028571428571428, "no_speech_prob": 0.4696407616138458}, {"id": 430, "seek": 243168, "start": 2441.68, "end": 2450.68, "text": " you have to take a snapshot just before and to roll back to this safe point.", "tokens": [50864, 291, 362, 281, 747, 257, 30163, 445, 949, 293, 281, 3373, 646, 281, 341, 3273, 935, 13, 51314], "temperature": 0.0, "avg_logprob": -0.24817284872365553, "compression_ratio": 1.7028571428571428, "no_speech_prob": 0.4696407616138458}, {"id": 431, "seek": 243168, "start": 2450.68, "end": 2453.68, "text": " I said stop shots, I must say a safe point.", "tokens": [51314, 286, 848, 1590, 8305, 11, 286, 1633, 584, 257, 3273, 935, 13, 51464], "temperature": 0.0, "avg_logprob": -0.24817284872365553, "compression_ratio": 1.7028571428571428, "no_speech_prob": 0.4696407616138458}, {"id": 432, "seek": 243168, "start": 2453.68, "end": 2456.68, "text": " To roll back to this safe point to redo it.", "tokens": [51464, 1407, 3373, 646, 281, 341, 3273, 935, 281, 29956, 309, 13, 51614], "temperature": 0.0, "avg_logprob": -0.24817284872365553, "compression_ratio": 1.7028571428571428, "no_speech_prob": 0.4696407616138458}, {"id": 433, "seek": 245668, "start": 2456.68, "end": 2466.68, "text": " And in postgres, current version taking safe points for each statement is probably too much overhead.", "tokens": [50364, 400, 294, 2183, 45189, 11, 2190, 3037, 1940, 3273, 2793, 337, 1184, 5629, 307, 1391, 886, 709, 19922, 13, 50864], "temperature": 0.0, "avg_logprob": -0.17316033763270225, "compression_ratio": 1.6011560693641618, "no_speech_prob": 0.022244054824113846}, {"id": 434, "seek": 245668, "start": 2466.68, "end": 2471.68, "text": " Actually, this read restart is also possible in other isolation levels", "tokens": [50864, 5135, 11, 341, 1401, 21022, 307, 611, 1944, 294, 661, 16001, 4358, 51114], "temperature": 0.0, "avg_logprob": -0.17316033763270225, "compression_ratio": 1.6011560693641618, "no_speech_prob": 0.022244054824113846}, {"id": 435, "seek": 245668, "start": 2471.68, "end": 2476.68, "text": " if it is the first statement of the transaction.", "tokens": [51114, 498, 309, 307, 264, 700, 5629, 295, 264, 14425, 13, 51364], "temperature": 0.0, "avg_logprob": -0.17316033763270225, "compression_ratio": 1.6011560693641618, "no_speech_prob": 0.022244054824113846}, {"id": 436, "seek": 245668, "start": 2476.68, "end": 2480.68, "text": " The thing is not really related to the isolation level.", "tokens": [51364, 440, 551, 307, 406, 534, 4077, 281, 264, 16001, 1496, 13, 51564], "temperature": 0.0, "avg_logprob": -0.17316033763270225, "compression_ratio": 1.6011560693641618, "no_speech_prob": 0.022244054824113846}, {"id": 437, "seek": 248068, "start": 2480.68, "end": 2485.68, "text": " It's more when the database knows that the application did nothing before,", "tokens": [50364, 467, 311, 544, 562, 264, 8149, 3255, 300, 264, 3861, 630, 1825, 949, 11, 50614], "temperature": 0.0, "avg_logprob": -0.12680175487811748, "compression_ratio": 1.5279503105590062, "no_speech_prob": 0.039565309882164}, {"id": 438, "seek": 248068, "start": 2485.68, "end": 2493.68, "text": " then it can move the read point.", "tokens": [50614, 550, 309, 393, 1286, 264, 1401, 935, 13, 51014], "temperature": 0.0, "avg_logprob": -0.12680175487811748, "compression_ratio": 1.5279503105590062, "no_speech_prob": 0.039565309882164}, {"id": 439, "seek": 248068, "start": 2493.68, "end": 2497.68, "text": " So basically, I'm going fast on that.", "tokens": [51014, 407, 1936, 11, 286, 478, 516, 2370, 322, 300, 13, 51214], "temperature": 0.0, "avg_logprob": -0.12680175487811748, "compression_ratio": 1.5279503105590062, "no_speech_prob": 0.039565309882164}, {"id": 440, "seek": 248068, "start": 2497.68, "end": 2503.68, "text": " Basically, bad things can happen with all databases at all isolation level", "tokens": [51214, 8537, 11, 1578, 721, 393, 1051, 365, 439, 22380, 412, 439, 16001, 1496, 51514], "temperature": 0.0, "avg_logprob": -0.12680175487811748, "compression_ratio": 1.5279503105590062, "no_speech_prob": 0.039565309882164}, {"id": 441, "seek": 248068, "start": 2503.68, "end": 2506.68, "text": " and it's good to know it.", "tokens": [51514, 293, 309, 311, 665, 281, 458, 309, 13, 51664], "temperature": 0.0, "avg_logprob": -0.12680175487811748, "compression_ratio": 1.5279503105590062, "no_speech_prob": 0.039565309882164}, {"id": 442, "seek": 250668, "start": 2506.68, "end": 2512.68, "text": " So postgres can read rows at different point in time.", "tokens": [50364, 407, 2183, 45189, 393, 1401, 13241, 412, 819, 935, 294, 565, 13, 50664], "temperature": 0.0, "avg_logprob": -0.22911212179395887, "compression_ratio": 1.4042553191489362, "no_speech_prob": 0.014971709810197353}, {"id": 443, "seek": 250668, "start": 2512.68, "end": 2516.68, "text": " Oracle can set a reusable that is not reusable.", "tokens": [50664, 25654, 393, 992, 257, 41807, 300, 307, 406, 41807, 13, 50864], "temperature": 0.0, "avg_logprob": -0.22911212179395887, "compression_ratio": 1.4042553191489362, "no_speech_prob": 0.014971709810197353}, {"id": 444, "seek": 250668, "start": 2516.68, "end": 2521.68, "text": " It's kind of a lie in interpreting the isolation levels.", "tokens": [50864, 467, 311, 733, 295, 257, 4544, 294, 37395, 264, 16001, 4358, 13, 51114], "temperature": 0.0, "avg_logprob": -0.22911212179395887, "compression_ratio": 1.4042553191489362, "no_speech_prob": 0.014971709810197353}, {"id": 445, "seek": 250668, "start": 2521.68, "end": 2529.68, "text": " SQL server has MVCC, but when it needs to lock, there is an eye overhead,", "tokens": [51114, 19200, 7154, 575, 17663, 11717, 11, 457, 562, 309, 2203, 281, 4017, 11, 456, 307, 364, 3313, 19922, 11, 51514], "temperature": 0.0, "avg_logprob": -0.22911212179395887, "compression_ratio": 1.4042553191489362, "no_speech_prob": 0.014971709810197353}, {"id": 446, "seek": 250668, "start": 2529.68, "end": 2533.68, "text": " so it's not always recommended.", "tokens": [51514, 370, 309, 311, 406, 1009, 9628, 13, 51714], "temperature": 0.0, "avg_logprob": -0.22911212179395887, "compression_ratio": 1.4042553191489362, "no_speech_prob": 0.014971709810197353}, {"id": 447, "seek": 253368, "start": 2533.68, "end": 2538.68, "text": " MySQL in repeatable read can see commits by others.", "tokens": [50364, 1222, 39934, 294, 7149, 712, 1401, 393, 536, 48311, 538, 2357, 13, 50614], "temperature": 0.0, "avg_logprob": -0.16945285331912158, "compression_ratio": 1.4928909952606635, "no_speech_prob": 0.019061988219618797}, {"id": 448, "seek": 253368, "start": 2538.68, "end": 2545.68, "text": " So basically, bad things can happen at any level, not at real serializable,", "tokens": [50614, 407, 1936, 11, 1578, 721, 393, 1051, 412, 604, 1496, 11, 406, 412, 957, 17436, 22395, 11, 50964], "temperature": 0.0, "avg_logprob": -0.16945285331912158, "compression_ratio": 1.4928909952606635, "no_speech_prob": 0.019061988219618797}, {"id": 449, "seek": 253368, "start": 2545.68, "end": 2549.68, "text": " but this has a cost in terms of performance.", "tokens": [50964, 457, 341, 575, 257, 2063, 294, 2115, 295, 3389, 13, 51164], "temperature": 0.0, "avg_logprob": -0.16945285331912158, "compression_ratio": 1.4928909952606635, "no_speech_prob": 0.019061988219618797}, {"id": 450, "seek": 253368, "start": 2549.68, "end": 2555.68, "text": " But it's not a big problem if you understand it", "tokens": [51164, 583, 309, 311, 406, 257, 955, 1154, 498, 291, 1223, 309, 51464], "temperature": 0.0, "avg_logprob": -0.16945285331912158, "compression_ratio": 1.4928909952606635, "no_speech_prob": 0.019061988219618797}, {"id": 451, "seek": 253368, "start": 2555.68, "end": 2561.68, "text": " and you know that you can do your own concurrency control with select for update, for example.", "tokens": [51464, 293, 291, 458, 300, 291, 393, 360, 428, 1065, 23702, 10457, 1969, 365, 3048, 337, 5623, 11, 337, 1365, 13, 51764], "temperature": 0.0, "avg_logprob": -0.16945285331912158, "compression_ratio": 1.4928909952606635, "no_speech_prob": 0.019061988219618797}, {"id": 452, "seek": 256168, "start": 2561.68, "end": 2567.68, "text": " So the goal is to know which problem can happen with your transaction.", "tokens": [50364, 407, 264, 3387, 307, 281, 458, 597, 1154, 393, 1051, 365, 428, 14425, 13, 50664], "temperature": 0.0, "avg_logprob": -0.07400824473454402, "compression_ratio": 1.572139303482587, "no_speech_prob": 0.01096833311021328}, {"id": 453, "seek": 256168, "start": 2567.68, "end": 2571.68, "text": " It depends on the isolation level, the database you use,", "tokens": [50664, 467, 5946, 322, 264, 16001, 1496, 11, 264, 8149, 291, 764, 11, 50864], "temperature": 0.0, "avg_logprob": -0.07400824473454402, "compression_ratio": 1.572139303482587, "no_speech_prob": 0.01096833311021328}, {"id": 454, "seek": 256168, "start": 2571.68, "end": 2573.68, "text": " but also what you are doing in your transaction,", "tokens": [50864, 457, 611, 437, 291, 366, 884, 294, 428, 14425, 11, 50964], "temperature": 0.0, "avg_logprob": -0.07400824473454402, "compression_ratio": 1.572139303482587, "no_speech_prob": 0.01096833311021328}, {"id": 455, "seek": 256168, "start": 2573.68, "end": 2578.68, "text": " and then you can use mostly select for update to manage that.", "tokens": [50964, 293, 550, 291, 393, 764, 5240, 3048, 337, 5623, 281, 3067, 300, 13, 51214], "temperature": 0.0, "avg_logprob": -0.07400824473454402, "compression_ratio": 1.572139303482587, "no_speech_prob": 0.01096833311021328}, {"id": 456, "seek": 256168, "start": 2578.68, "end": 2586.68, "text": " So with implicit locking, I already said that it was not in the SQL standard.", "tokens": [51214, 407, 365, 26947, 23954, 11, 286, 1217, 848, 300, 309, 390, 406, 294, 264, 19200, 3832, 13, 51614], "temperature": 0.0, "avg_logprob": -0.07400824473454402, "compression_ratio": 1.572139303482587, "no_speech_prob": 0.01096833311021328}, {"id": 457, "seek": 258668, "start": 2586.68, "end": 2593.68, "text": " SQL standard was made for a lot of user interactions, long transactions,", "tokens": [50364, 19200, 3832, 390, 1027, 337, 257, 688, 295, 4195, 13280, 11, 938, 16856, 11, 50714], "temperature": 0.0, "avg_logprob": -0.1454414766888286, "compression_ratio": 1.7235023041474655, "no_speech_prob": 0.07040099799633026}, {"id": 458, "seek": 258668, "start": 2593.68, "end": 2603.68, "text": " where a user really starts a transaction, can go back later at the time where users are at only one screen,", "tokens": [50714, 689, 257, 4195, 534, 3719, 257, 14425, 11, 393, 352, 646, 1780, 412, 264, 565, 689, 5022, 366, 412, 787, 472, 2568, 11, 51214], "temperature": 0.0, "avg_logprob": -0.1454414766888286, "compression_ratio": 1.7235023041474655, "no_speech_prob": 0.07040099799633026}, {"id": 459, "seek": 258668, "start": 2603.68, "end": 2607.68, "text": " so you cannot switch to another application and leave a transaction open.", "tokens": [51214, 370, 291, 2644, 3679, 281, 1071, 3861, 293, 1856, 257, 14425, 1269, 13, 51414], "temperature": 0.0, "avg_logprob": -0.1454414766888286, "compression_ratio": 1.7235023041474655, "no_speech_prob": 0.07040099799633026}, {"id": 460, "seek": 258668, "start": 2607.68, "end": 2609.68, "text": " Today, you just don't want to do that.", "tokens": [51414, 2692, 11, 291, 445, 500, 380, 528, 281, 360, 300, 13, 51514], "temperature": 0.0, "avg_logprob": -0.1454414766888286, "compression_ratio": 1.7235023041474655, "no_speech_prob": 0.07040099799633026}, {"id": 461, "seek": 258668, "start": 2609.68, "end": 2615.68, "text": " Today, applications probably know all the transaction intent from the beginning,", "tokens": [51514, 2692, 11, 5821, 1391, 458, 439, 264, 14425, 8446, 490, 264, 2863, 11, 51814], "temperature": 0.0, "avg_logprob": -0.1454414766888286, "compression_ratio": 1.7235023041474655, "no_speech_prob": 0.07040099799633026}, {"id": 462, "seek": 261568, "start": 2615.68, "end": 2618.68, "text": " which means that the application can say,", "tokens": [50364, 597, 1355, 300, 264, 3861, 393, 584, 11, 50514], "temperature": 0.0, "avg_logprob": -0.12125341892242432, "compression_ratio": 1.538860103626943, "no_speech_prob": 0.014608857221901417}, {"id": 463, "seek": 261568, "start": 2618.68, "end": 2626.68, "text": " okay, I'm reading, but with the goal, the intent of writing, then I do a select for update.", "tokens": [50514, 1392, 11, 286, 478, 3760, 11, 457, 365, 264, 3387, 11, 264, 8446, 295, 3579, 11, 550, 286, 360, 257, 3048, 337, 5623, 13, 50914], "temperature": 0.0, "avg_logprob": -0.12125341892242432, "compression_ratio": 1.538860103626943, "no_speech_prob": 0.014608857221901417}, {"id": 464, "seek": 261568, "start": 2626.68, "end": 2634.68, "text": " And in short, if you use read committed, big advantage, there are no locks on what you read,", "tokens": [50914, 400, 294, 2099, 11, 498, 291, 764, 1401, 7784, 11, 955, 5002, 11, 456, 366, 572, 20703, 322, 437, 291, 1401, 11, 51314], "temperature": 0.0, "avg_logprob": -0.12125341892242432, "compression_ratio": 1.538860103626943, "no_speech_prob": 0.014608857221901417}, {"id": 465, "seek": 261568, "start": 2634.68, "end": 2639.68, "text": " and the read time is the start of the statement, which is really cool.", "tokens": [51314, 293, 264, 1401, 565, 307, 264, 722, 295, 264, 5629, 11, 597, 307, 534, 1627, 13, 51564], "temperature": 0.0, "avg_logprob": -0.12125341892242432, "compression_ratio": 1.538860103626943, "no_speech_prob": 0.014608857221901417}, {"id": 466, "seek": 263968, "start": 2639.68, "end": 2645.68, "text": " And if you want, but may have some anomalies, if you don't want those anomalies,", "tokens": [50364, 400, 498, 291, 528, 11, 457, 815, 362, 512, 24769, 48872, 11, 498, 291, 500, 380, 528, 729, 24769, 48872, 11, 50664], "temperature": 0.0, "avg_logprob": -0.08734737195466694, "compression_ratio": 1.8137254901960784, "no_speech_prob": 0.01574133150279522}, {"id": 467, "seek": 263968, "start": 2645.68, "end": 2650.68, "text": " just use select for share, select for update to lock what you want.", "tokens": [50664, 445, 764, 3048, 337, 2073, 11, 3048, 337, 5623, 281, 4017, 437, 291, 528, 13, 50914], "temperature": 0.0, "avg_logprob": -0.08734737195466694, "compression_ratio": 1.8137254901960784, "no_speech_prob": 0.01574133150279522}, {"id": 468, "seek": 263968, "start": 2650.68, "end": 2657.68, "text": " Instead of having the database locking all reads, you just lock the few ones that you need to lock.", "tokens": [50914, 7156, 295, 1419, 264, 8149, 23954, 439, 15700, 11, 291, 445, 4017, 264, 1326, 2306, 300, 291, 643, 281, 4017, 13, 51264], "temperature": 0.0, "avg_logprob": -0.08734737195466694, "compression_ratio": 1.8137254901960784, "no_speech_prob": 0.01574133150279522}, {"id": 469, "seek": 263968, "start": 2657.68, "end": 2662.68, "text": " In repeatable read, the difference is that the read time is the start of the transaction,", "tokens": [51264, 682, 7149, 712, 1401, 11, 264, 2649, 307, 300, 264, 1401, 565, 307, 264, 722, 295, 264, 14425, 11, 51514], "temperature": 0.0, "avg_logprob": -0.08734737195466694, "compression_ratio": 1.8137254901960784, "no_speech_prob": 0.01574133150279522}, {"id": 470, "seek": 263968, "start": 2662.68, "end": 2666.68, "text": " not the start of the statement.", "tokens": [51514, 406, 264, 722, 295, 264, 5629, 13, 51714], "temperature": 0.0, "avg_logprob": -0.08734737195466694, "compression_ratio": 1.8137254901960784, "no_speech_prob": 0.01574133150279522}, {"id": 471, "seek": 266668, "start": 2666.68, "end": 2670.68, "text": " The problem is that there, a conflict may raise an error,", "tokens": [50364, 440, 1154, 307, 300, 456, 11, 257, 6596, 815, 5300, 364, 6713, 11, 50564], "temperature": 0.0, "avg_logprob": -0.13446308044065913, "compression_ratio": 1.6117021276595744, "no_speech_prob": 0.02349013276398182}, {"id": 472, "seek": 266668, "start": 2670.68, "end": 2679.68, "text": " and then in the application, you need to catch this error, a serializable error, to retry later.", "tokens": [50564, 293, 550, 294, 264, 3861, 11, 291, 643, 281, 3745, 341, 6713, 11, 257, 17436, 22395, 6713, 11, 281, 1533, 627, 1780, 13, 51014], "temperature": 0.0, "avg_logprob": -0.13446308044065913, "compression_ratio": 1.6117021276595744, "no_speech_prob": 0.02349013276398182}, {"id": 473, "seek": 266668, "start": 2679.68, "end": 2686.68, "text": " But you can also lock with select for update, or lock at a higher level, lock a table,", "tokens": [51014, 583, 291, 393, 611, 4017, 365, 3048, 337, 5623, 11, 420, 4017, 412, 257, 2946, 1496, 11, 4017, 257, 3199, 11, 51364], "temperature": 0.0, "avg_logprob": -0.13446308044065913, "compression_ratio": 1.6117021276595744, "no_speech_prob": 0.02349013276398182}, {"id": 474, "seek": 266668, "start": 2686.68, "end": 2691.68, "text": " but then, be careful, you lock a table, nobody can update it.", "tokens": [51364, 457, 550, 11, 312, 5026, 11, 291, 4017, 257, 3199, 11, 5079, 393, 5623, 309, 13, 51614], "temperature": 0.0, "avg_logprob": -0.13446308044065913, "compression_ratio": 1.6117021276595744, "no_speech_prob": 0.02349013276398182}, {"id": 475, "seek": 269168, "start": 2691.68, "end": 2695.68, "text": " In serializable level, everything works well.", "tokens": [50364, 682, 17436, 22395, 1496, 11, 1203, 1985, 731, 13, 50564], "temperature": 0.0, "avg_logprob": -0.12105568800822343, "compression_ratio": 1.6724890829694323, "no_speech_prob": 0.08110378682613373}, {"id": 476, "seek": 269168, "start": 2695.68, "end": 2699.68, "text": " You don't have to care, you don't have to lock anything yourself.", "tokens": [50564, 509, 500, 380, 362, 281, 1127, 11, 291, 500, 380, 362, 281, 4017, 1340, 1803, 13, 50764], "temperature": 0.0, "avg_logprob": -0.12105568800822343, "compression_ratio": 1.6724890829694323, "no_speech_prob": 0.08110378682613373}, {"id": 477, "seek": 269168, "start": 2699.68, "end": 2707.68, "text": " There is a performance penalty, but also, the developer doesn't have to care about locking,", "tokens": [50764, 821, 307, 257, 3389, 16263, 11, 457, 611, 11, 264, 10754, 1177, 380, 362, 281, 1127, 466, 23954, 11, 51164], "temperature": 0.0, "avg_logprob": -0.12105568800822343, "compression_ratio": 1.6724890829694323, "no_speech_prob": 0.08110378682613373}, {"id": 478, "seek": 269168, "start": 2707.68, "end": 2710.68, "text": " but has to care about the retry logic.", "tokens": [51164, 457, 575, 281, 1127, 466, 264, 1533, 627, 9952, 13, 51314], "temperature": 0.0, "avg_logprob": -0.12105568800822343, "compression_ratio": 1.6724890829694323, "no_speech_prob": 0.08110378682613373}, {"id": 479, "seek": 269168, "start": 2710.68, "end": 2714.68, "text": " And that's not so easy, it's not just retry until it works.", "tokens": [51314, 400, 300, 311, 406, 370, 1858, 11, 309, 311, 406, 445, 1533, 627, 1826, 309, 1985, 13, 51514], "temperature": 0.0, "avg_logprob": -0.12105568800822343, "compression_ratio": 1.6724890829694323, "no_speech_prob": 0.08110378682613373}, {"id": 480, "seek": 269168, "start": 2714.68, "end": 2720.68, "text": " You probably went like an exponential back off, you retry 10 milliseconds later,", "tokens": [51514, 509, 1391, 1437, 411, 364, 21510, 646, 766, 11, 291, 1533, 627, 1266, 34184, 1780, 11, 51814], "temperature": 0.0, "avg_logprob": -0.12105568800822343, "compression_ratio": 1.6724890829694323, "no_speech_prob": 0.08110378682613373}, {"id": 481, "seek": 272068, "start": 2720.68, "end": 2724.68, "text": " if it still blocked, you retry 100 milliseconds later.", "tokens": [50364, 498, 309, 920, 15470, 11, 291, 1533, 627, 2319, 34184, 1780, 13, 50564], "temperature": 0.0, "avg_logprob": -0.13679235914479132, "compression_ratio": 1.691542288557214, "no_speech_prob": 0.005406696815043688}, {"id": 482, "seek": 272068, "start": 2724.68, "end": 2727.68, "text": " Okay.", "tokens": [50564, 1033, 13, 50714], "temperature": 0.0, "avg_logprob": -0.13679235914479132, "compression_ratio": 1.691542288557214, "no_speech_prob": 0.005406696815043688}, {"id": 483, "seek": 272068, "start": 2727.68, "end": 2733.68, "text": " Going fast on that, there is more than select for updates, you can select for share,", "tokens": [50714, 10963, 2370, 322, 300, 11, 456, 307, 544, 813, 3048, 337, 9205, 11, 291, 393, 3048, 337, 2073, 11, 51014], "temperature": 0.0, "avg_logprob": -0.13679235914479132, "compression_ratio": 1.691542288557214, "no_speech_prob": 0.005406696815043688}, {"id": 484, "seek": 272068, "start": 2733.68, "end": 2737.68, "text": " it's just a read lock, many sessions can select for share,", "tokens": [51014, 309, 311, 445, 257, 1401, 4017, 11, 867, 11081, 393, 3048, 337, 2073, 11, 51214], "temperature": 0.0, "avg_logprob": -0.13679235914479132, "compression_ratio": 1.691542288557214, "no_speech_prob": 0.005406696815043688}, {"id": 485, "seek": 272068, "start": 2737.68, "end": 2741.68, "text": " but be careful, if in a transaction, you select for share,", "tokens": [51214, 457, 312, 5026, 11, 498, 294, 257, 14425, 11, 291, 3048, 337, 2073, 11, 51414], "temperature": 0.0, "avg_logprob": -0.13679235914479132, "compression_ratio": 1.691542288557214, "no_speech_prob": 0.005406696815043688}, {"id": 486, "seek": 272068, "start": 2741.68, "end": 2748.68, "text": " and then you update, you may have some cases where you will have a conflict,", "tokens": [51414, 293, 550, 291, 5623, 11, 291, 815, 362, 512, 3331, 689, 291, 486, 362, 257, 6596, 11, 51764], "temperature": 0.0, "avg_logprob": -0.13679235914479132, "compression_ratio": 1.691542288557214, "no_speech_prob": 0.005406696815043688}, {"id": 487, "seek": 274868, "start": 2748.68, "end": 2754.68, "text": " and then you prefer to reserve with an exclusive lock before.", "tokens": [50364, 293, 550, 291, 4382, 281, 17824, 365, 364, 13005, 4017, 949, 13, 50664], "temperature": 0.0, "avg_logprob": -0.1360386409116595, "compression_ratio": 1.5, "no_speech_prob": 0.005927364341914654}, {"id": 488, "seek": 274868, "start": 2754.68, "end": 2759.68, "text": " You can lock tables, but be careful, and for all of them,", "tokens": [50664, 509, 393, 4017, 8020, 11, 457, 312, 5026, 11, 293, 337, 439, 295, 552, 11, 50914], "temperature": 0.0, "avg_logprob": -0.1360386409116595, "compression_ratio": 1.5, "no_speech_prob": 0.005927364341914654}, {"id": 489, "seek": 274868, "start": 2759.68, "end": 2766.68, "text": " you have the choice of wait on conflict, or raise and error, or skip it, if it's a queue.", "tokens": [50914, 291, 362, 264, 3922, 295, 1699, 322, 6596, 11, 420, 5300, 293, 6713, 11, 420, 10023, 309, 11, 498, 309, 311, 257, 18639, 13, 51264], "temperature": 0.0, "avg_logprob": -0.1360386409116595, "compression_ratio": 1.5, "no_speech_prob": 0.005927364341914654}, {"id": 490, "seek": 274868, "start": 2766.68, "end": 2770.68, "text": " Okay, we are just on time.", "tokens": [51264, 1033, 11, 321, 366, 445, 322, 565, 13, 51464], "temperature": 0.0, "avg_logprob": -0.1360386409116595, "compression_ratio": 1.5, "no_speech_prob": 0.005927364341914654}, {"id": 491, "seek": 274868, "start": 2770.68, "end": 2775.68, "text": " I have a series, or I don't know, maybe 10 block post about it.", "tokens": [51464, 286, 362, 257, 2638, 11, 420, 286, 500, 380, 458, 11, 1310, 1266, 3461, 2183, 466, 309, 13, 51714], "temperature": 0.0, "avg_logprob": -0.1360386409116595, "compression_ratio": 1.5, "no_speech_prob": 0.005927364341914654}, {"id": 492, "seek": 277568, "start": 2775.68, "end": 2779.68, "text": " So I try to summarize that in this presentation.", "tokens": [50364, 407, 286, 853, 281, 20858, 300, 294, 341, 5860, 13, 50564], "temperature": 0.0, "avg_logprob": -0.12136402349362428, "compression_ratio": 1.768181818181818, "no_speech_prob": 0.01908101700246334}, {"id": 493, "seek": 277568, "start": 2779.68, "end": 2784.68, "text": " This is a topic that is very interesting, because different in all databases,", "tokens": [50564, 639, 307, 257, 4829, 300, 307, 588, 1880, 11, 570, 819, 294, 439, 22380, 11, 50814], "temperature": 0.0, "avg_logprob": -0.12136402349362428, "compression_ratio": 1.768181818181818, "no_speech_prob": 0.01908101700246334}, {"id": 494, "seek": 277568, "start": 2784.68, "end": 2790.68, "text": " and many developers, there are a lot of developers that do not develop only on Postgres,", "tokens": [50814, 293, 867, 8849, 11, 456, 366, 257, 688, 295, 8849, 300, 360, 406, 1499, 787, 322, 10223, 45189, 11, 51114], "temperature": 0.0, "avg_logprob": -0.12136402349362428, "compression_ratio": 1.768181818181818, "no_speech_prob": 0.01908101700246334}, {"id": 495, "seek": 277568, "start": 2790.68, "end": 2798.68, "text": " they have other databases, and many developers think that they can write database agnostic applications", "tokens": [51114, 436, 362, 661, 22380, 11, 293, 867, 8849, 519, 300, 436, 393, 2464, 8149, 623, 77, 19634, 5821, 51514], "temperature": 0.0, "avg_logprob": -0.12136402349362428, "compression_ratio": 1.768181818181818, "no_speech_prob": 0.01908101700246334}, {"id": 496, "seek": 277568, "start": 2798.68, "end": 2803.68, "text": " by using a framework that can generate the syntax for many databases,", "tokens": [51514, 538, 1228, 257, 8388, 300, 393, 8460, 264, 28431, 337, 867, 22380, 11, 51764], "temperature": 0.0, "avg_logprob": -0.12136402349362428, "compression_ratio": 1.768181818181818, "no_speech_prob": 0.01908101700246334}, {"id": 497, "seek": 280368, "start": 2803.68, "end": 2809.68, "text": " that works for the syntax, but as we have seen, the preview is different on all databases,", "tokens": [50364, 300, 1985, 337, 264, 28431, 11, 457, 382, 321, 362, 1612, 11, 264, 14281, 307, 819, 322, 439, 22380, 11, 50664], "temperature": 0.0, "avg_logprob": -0.14916700957923806, "compression_ratio": 1.6415094339622642, "no_speech_prob": 0.02702455036342144}, {"id": 498, "seek": 280368, "start": 2809.68, "end": 2813.68, "text": " so there is nothing like a database agnostic application.", "tokens": [50664, 370, 456, 307, 1825, 411, 257, 8149, 623, 77, 19634, 3861, 13, 50864], "temperature": 0.0, "avg_logprob": -0.14916700957923806, "compression_ratio": 1.6415094339622642, "no_speech_prob": 0.02702455036342144}, {"id": 499, "seek": 280368, "start": 2813.68, "end": 2819.68, "text": " If you have questions, do not hesitate to contact me.", "tokens": [50864, 759, 291, 362, 1651, 11, 360, 406, 20842, 281, 3385, 385, 13, 51164], "temperature": 0.0, "avg_logprob": -0.14916700957923806, "compression_ratio": 1.6415094339622642, "no_speech_prob": 0.02702455036342144}, {"id": 500, "seek": 280368, "start": 2819.68, "end": 2823.68, "text": " I will be there all day, but I have a session in one hour,", "tokens": [51164, 286, 486, 312, 456, 439, 786, 11, 457, 286, 362, 257, 5481, 294, 472, 1773, 11, 51364], "temperature": 0.0, "avg_logprob": -0.14916700957923806, "compression_ratio": 1.6415094339622642, "no_speech_prob": 0.02702455036342144}, {"id": 501, "seek": 280368, "start": 2823.68, "end": 2827.68, "text": " the other side on something different, Linux, load average,", "tokens": [51364, 264, 661, 1252, 322, 746, 819, 11, 18734, 11, 3677, 4274, 11, 51564], "temperature": 0.0, "avg_logprob": -0.14916700957923806, "compression_ratio": 1.6415094339622642, "no_speech_prob": 0.02702455036342144}, {"id": 502, "seek": 280368, "start": 2827.68, "end": 2830.68, "text": " if you want to look at it.", "tokens": [51564, 498, 291, 528, 281, 574, 412, 309, 13, 51714], "temperature": 0.0, "avg_logprob": -0.14916700957923806, "compression_ratio": 1.6415094339622642, "no_speech_prob": 0.02702455036342144}], "language": "en"}